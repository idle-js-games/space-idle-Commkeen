{"version":3,"sources":["webpack:///src/app/app.component.html","webpack:///src/app/components/actions/actions.component.html","webpack:///src/app/components/common/ability-button/ability-button.component.html","webpack:///src/app/components/common/game-button/game-button.component.html","webpack:///src/app/components/common/progress-bar/progress-bar.component.html","webpack:///src/app/components/common/resource-bar/resource-bar.component.html","webpack:///src/app/components/common/task-button/task-button.component.html","webpack:///src/app/components/game-tooltip/game-tooltip.component.html","webpack:///src/app/components/planet-interaction/pi-command/pi-command.component.html","webpack:///src/app/components/planet-interaction/pi-structures/pi-structures.component.html","webpack:///src/app/components/planet-interaction/pi-terrain/pi-terrain.component.html","webpack:///src/app/components/planet-interaction/planet-interaction.component.html","webpack:///src/app/components/resource-overview/resource-overview.component.html","webpack:///src/app/components/ship-interaction/ship-interaction.component.html","webpack:///src/app/components/ship-interaction/si-research/si-research.component.html","webpack:///src/app/components/ship-interaction/si-systems/si-systems.component.html","webpack:///src/app/components/ship-interaction/si-upgrades/si-upgrades.component.html","webpack:///src/app/components/ship-overview/ship-overview.component.html","webpack:///src/app/components/system-overview/system-overview.component.html","webpack:///node_modules/tslib/tslib.es6.js","webpack:///src/$_lazy_route_resource lazy namespace object","webpack:///src/app/app.component.scss","webpack:///src/app/app.component.ts","webpack:///src/app/app.module.ts","webpack:///src/app/components/actions/actions.component.scss","webpack:///src/app/components/actions/actions.component.ts","webpack:///src/app/components/common/ability-button/ability-button.component.scss","webpack:///src/app/components/common/ability-button/ability-button.component.ts","webpack:///src/app/components/common/game-button/game-button.component.scss","webpack:///src/app/components/common/game-button/game-button.component.ts","webpack:///src/app/components/common/progress-bar/progress-bar.component.scss","webpack:///src/app/components/common/progress-bar/progress-bar.component.ts","webpack:///src/app/components/common/resource-bar/resource-bar.component.scss","webpack:///src/app/components/common/resource-bar/resource-bar.component.ts","webpack:///src/app/components/common/task-button/task-button.component.scss","webpack:///src/app/components/common/task-button/task-button.component.ts","webpack:///src/app/components/game-tooltip/game-tooltip.component.scss","webpack:///src/app/components/game-tooltip/game-tooltip.component.ts","webpack:///src/app/components/planet-interaction/pi-command/pi-command.component.scss","webpack:///src/app/components/planet-interaction/pi-command/pi-command.component.ts","webpack:///src/app/components/planet-interaction/pi-structures/pi-structures.component.scss","webpack:///src/app/components/planet-interaction/pi-structures/pi-structures.component.ts","webpack:///src/app/components/planet-interaction/pi-terrain/pi-terrain.component.scss","webpack:///src/app/components/planet-interaction/pi-terrain/pi-terrain.component.ts","webpack:///src/app/components/planet-interaction/planet-interaction.component.scss","webpack:///src/app/components/planet-interaction/planet-interaction.component.ts","webpack:///src/app/components/resource-overview/resource-overview.component.scss","webpack:///src/app/components/resource-overview/resource-overview.component.ts","webpack:///src/app/components/ship-interaction/ship-interaction.component.scss","webpack:///src/app/components/ship-interaction/ship-interaction.component.ts","webpack:///src/app/components/ship-interaction/si-research/si-research.component.scss","webpack:///src/app/components/ship-interaction/si-research/si-research.component.ts","webpack:///src/app/components/ship-interaction/si-systems/si-systems.component.scss","webpack:///src/app/components/ship-interaction/si-systems/si-systems.component.ts","webpack:///src/app/components/ship-interaction/si-upgrades/si-upgrades.component.scss","webpack:///src/app/components/ship-interaction/si-upgrades/si-upgrades.component.ts","webpack:///src/app/components/ship-overview/ship-overview.component.scss","webpack:///src/app/components/ship-overview/ship-overview.component.ts","webpack:///src/app/components/system-overview/system-overview.component.scss","webpack:///src/app/components/system-overview/system-overview.component.ts","webpack:///src/app/directives/game-tooltip.directive.ts","webpack:///src/app/models/planet.ts","webpack:///src/app/models/planetInteractionModel.ts","webpack:///src/app/models/research.ts","webpack:///src/app/models/resource.ts","webpack:///src/app/models/task.ts","webpack:///src/app/models/tooltipViewModel.ts","webpack:///src/app/pipes/display-number.pipe.ts","webpack:///src/app/services/action.service.ts","webpack:///src/app/services/flags.service.ts","webpack:///src/app/services/planet.service.ts","webpack:///src/app/services/research.service.ts","webpack:///src/app/services/resource.service.ts","webpack:///src/app/services/simulation.service.ts","webpack:///src/app/services/task.service.ts","webpack:///src/app/services/time.service.ts","webpack:///src/app/shared/material.module.ts","webpack:///src/app/staticData/abilityDefinitions.ts","webpack:///src/app/staticData/actionDefinitions.ts","webpack:///src/app/staticData/effectDefinitions.ts","webpack:///src/app/staticData/exploitDefinitions.ts","webpack:///src/app/staticData/featureDefinitions.ts","webpack:///src/app/staticData/outpostDefinitions.ts","webpack:///src/app/staticData/regionDefinitions.ts","webpack:///src/app/staticData/researchDefinitions.ts","webpack:///src/app/staticData/structureDefinitions.ts","webpack:///src/app/staticData/taskDefinitions.ts","webpack:///src/app/staticData/upgradeDefinitions.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","__exportStar","m","exports","__values","o","__read","ar","error","__spread","concat","__spreadArrays","il","k","a","j","jl","__await","__asyncGenerator","asyncIterator","q","resume","settle","fulfill","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","__esModule","__importDefault","__classPrivateFieldGet","receiver","privateMap","has","get","__classPrivateFieldSet","set","webpackEmptyAsyncContext","req","Error","code","keys","module","id","AppComponent","planetService","timeService","simulationService","flagsService","resourceService","taskService","currentTime","showShipPanel","title","startGame","init","initializeSystem","tick","subscribe","x","reset","selector","template","add","AppModule","declarations","imports","providers","bootstrap","entryComponents","ActionsComponent","actionService","researchService","getCurrentTask","abilities","filter","isAbilityVisible","ability","check","hiddenFlag","visibleNeededResearchName","getProgress","knowledgeLevel","visibleNeededResearchLevel","visibleFlags","some","upgrades","getAvailableUpgrades","map","getUpgradeDefinition","upg","tooltip","name","description","costs","cost","canAfford","canAffordUpgrade","buyUpgrade","actions","forEach","act","doAction","AbilityButtonComponent","_actionService","_researchService","_resourceService","_timeService","cooldown","update","initTooltip","updateCosts","dT","tickCooldown","updateRequirementTip","clear","addCollection","scalar","costScalesWithTheory","theoryLevel","costScalesWithResource","applyMultiplier","costMultiplier","upgradeRequired","canAffordDroneCost","amount","upgradeNeeded","isUpgradeCompleted","canDo","spend","doFeatureAction","feature","GameButtonComponent","disabled","running","small","click","smoothCooldown","event","stopPropagation","emit","_cooldown","val","ProgressBarComponent","max","Math","min","ResourceBarComponent","resource","TaskButtonComponent","_taskService","task","taskDef","startCost","isRunning","beginFeatureTask","GameTooltipComponent","tooltipModel","PiCommandComponent","droneTasks","shipParts","initShip","ShipPart","onFlagsUpdated","getSelectedPlanet","getSelectedPlanetInteractionModel","part","droneCost","outpostUpgradeCosts","showOutpostPanel","built","every","showLaunchBtn","shipLaunched","DroneTaskItem","assigned","visible","PiStructuresComponent","showBuildList","outpostBuildItem","BuildingListItem","buildingList","selectedPlanetChanged","updateBuildingList","building","results","sortCategory","newBuildingList","interactionModel","dirtyList","structures","element","structureDef","find","areUpgradesCompleted","prereqs","listItem","getNextStructureCost","canActivate","canActivateStructure","builtNumber","activeNumber","active","updateTooltip","production","getProductionRates","consumption","getConsumptionRates","showActivateControls","hasConsumption","buttonName","buildItemName","buildStructure","instanceId","setStructureActiveAmount","structure","getStructureDefinition","PiTerrainComponent","flagService","regionList","updateRegionList","regionChanged","onResearchUpdated","regionId","getSurveyProgress","getSurveyProgressNeeded","taskItem","def","repeatable","instance","progress","needed","region","surveyLevel","upgradeRequiredForSurvey","isSurveyRunning","canAffordSurvey","useSurveyTask","beginSurvey","surveyRegion","drones","getPlanetInteractionModel","regions","getTotalAssignedDrones","getRegionDefinition","surveyUpgradeNeeded","buildDroneHub","droneHubCost","dronesAssigned","droneSlots","assignDrone","featureInstance","unassignDrone","getIdleDrones","regionInteractions","regionModel","isRegionVisible","regionInteraction","getRegion","createRegionListItem","item","RegionListItem","outpostLevel","surveyProgress","assignedDrones","canGather","getDroneHubCost","hintLevel","hiddenFeatures","features","hiddenBehindSurvey","featureInteraction","getFeature","createFeatureListItem","regionItem","featureDef","getFeatureDefinition","FeatureListItem","surveyNeeded","hintActive","visibleUpgrade","AbilityItem","index","populateFeatureTasks","planetId","featureId","featureItem","tasks","tDef","definition","TaskItem","RegionDetailsViewModel","currentProduction","PlanetInteractionComponent","showStructures","showResearch","updateTabVisibility","getMax","interaction","droneCount","localResources","getConsumption","getProduction","ResourceOverviewComponent","resourceList","rateSource","globalResources","localInteractionModel","resources","ResourceListItem","productionRate","consumptionRate","isDiscovered","rate","getNetProductionRate","localResource","maxAmount","ShipInteractionComponent","SiResearchComponent","researchList","updateResearchList","beginResearch","getDisciplines","discipline","revealAtStart","hasProgress","knowledgeTooltip","theoryTooltip","nextAdvanceLevel","getNextLevelWithAdvancement","theoryDesc","research","knowledgeNeeded","theoryNeeded","ResearchListItem","SiSystemsComponent","SiUpgradesComponent","upgradesAvailable","upgradesComplete","updateUpgradeList","getCompletedUpgrades","upgradeDef","researched","UpgradeListItem","ShipOverviewComponent","researchButtonClicked","SystemOverviewComponent","planets","shipSelected","updateSelectedPlanet","getSystem","selectedPlanet","selectPlanet","ship","getCurrentSystem","GameTooltipDirective","overlayPositionBuilder","elementRef","overlay","positionStrategy","flexibleConnectedTo","withPositions","originX","originY","overlayX","overlayY","currentTooltip","hide","overlayRef","updatePositionStrategy","tooltipPortal","tooltipRef","attach","model","detach","Planet","Region","hiddenBehindRegion","level","infrastructureLevel","Feature","splice","oldFeatureId","newFeatureName","MOCK_SYSTEM","temperature","atmosphere","addFeature","hideBehindSurvey","PlanetInteractionModel","RegionInteractionCollection","Structure","FeatureInteraction","RegionInteraction","nextSurveyLevelCost","nextOutpostLevelCost","exploited","featureInstanceId","findIndex","regionInstanceId","removeFeature","reduce","ResearchProgress","knowledgeProgress","theoryProgress","Resource","ResourceCollection","resourceItem","other","couldAfford","removeResult","remove","multiplier","includeEnergy","newCollection","Task","SurveyTask","ResearchTask","FeatureTask","TooltipViewModel","DisplayNumberPipe","args","prefix","suffix","abs","getSuffixedValue","decimalPlaces","floor","log10","toFixed","ActionService","_flagService","_planetService","planetInstanceId","flag","addTheory","addMax","addEnergyRate","gatherFeature","replaceFeature","providedIn","FlagsService","flags","Set","PlanetService","onFeatureSurveyed","onOutpostUpgraded","_currentSystem","_currentSystemInteractionModels","_selectedPlanet","_selectedPlanetInteractionModel","canBuild","updateInteractionModel","getPlanet","exploitName","planetType","otherRegionSurvey","getSurveyLevel","structureName","pow","multipliedCost","baseBuildCost","withMultiplier","reduction","newConsumption","netProduction","getNetProduction","getAmount","regionDef","surveyProgressNeeded","surveyResearch","surveyCostMultiplier","surveyBaseCost","planet","planetInteraction","regionSurvey","featureDefinition","gatherRates","droneHubCostMultiplier","droneHubBaseCost","costReduction","getRegionAssignedDrones","getRegionDroneSlots","getFeatureAssignedDrones","getFeatureDroneSlots","ResearchService","researchProgress","unlockedUpgrades","completedUpgrades","getDiscipline","upgradeUnlocks","flagUnlocks","disciplineName","baseCost","baseKnowledgeCost","baseCostMultiplier","costExponent","knowledgeExpCost","compoundingCostMultiplier","baseTheoryCost","upgrade","completed","disc","currLevel","nextLv","lv","upgradeCost","spentResourcesSuccessfully","unlockIndex","ResourceService","discoveredResources","energyRate","dt","includes","removeCollection","currentMax","setMax","SimulationService","resetRates","system","updatePlanet","updateEnergy","updateLocalPlanetProductionRates","addNetLocalProductionRatesToGlobalProductionRates","runPlanetProduction","updateFeatureProductionRate","updateStructureProductionRate","updateStructureConsumptionRate","droneRate","researchMultiplier","hasGather","addProductionRate","effects","addConsumptionRate","resourceGen","currentActive","finalActive","amountPerActive","consumeRate","prodRate","stock","deficit","deficitBldgs","ceil","isPower","TaskService","_currentTask","taskName","taskInstance","beginTask","surveyTask","researchTask","tickSurveyTask","tickResearchTask","featureTask","tickFeatureTask","theoryBonus","addKnowledge","baseResearchPerSec","baseRate","completeFeatureTask","resultsOnComplete","action","clearTask","tickRate","TimeService","_timerSubscription","unsubscribe","MaterialModule","AbilityDefinition","researchNeeded","researchLevelNeeded","addAction","FeatureAbilityDefinition","droneHubLevelNeeded","ShipAbilityDefinition","SHIP_ABILITY_LIBRARY","addCost","addCooldown","grantsResource","scalesWithResourceCount","addVisibleFlag","setsFlag","setHiddenFlag","setVisibleNeededResearch","Action","AddResourceAction","addResource","AddMaxResourceAction","addMaxResource","AddEnergyRateAction","AddTheoryAction","FlagAction","setFlag","FeatureAction","GatherFeatureAction","targetFeature","TransformFeatureAction","RemoveFeatureAction","Effect","canStack","isGlobal","BaseProductionEffect","BaseConsumptionEffect","ExploitDefinition","bonusEffect","EXPLOIT_LIBRARY","addProduction","FeatureDefinition","gatherAbility","powerEffect","slots","costResource","costAmount","abilityName","setVisibleUpgrade","setUpgradeNeeded","triggerAbilityName","flagName","FEATURE_LIBRARY","addAbility","addTransformAction","addMaxResourceAction","addFlagAction","addPower","addAbilityCost","addResourceAction","addResearchAction","addRemoveFeatureAction","abilityNeedsUpgrade","addTask","addTaskResearchResult","addTaskRemoveResult","addGather","abilityVisibleUpgrade","setDroneSlots","OutpostDefinition","levels","OutpostLevelDefinition","levelDef","getLevel","capacity","droneCapacity","OUTPOST_LIBRARY","addLevel","setDroneCapacity","InfrastructureDefinition","tech","RegionDefinition","infrastructure","REGION_LIBRARY","setDescription","setSurveyBaseCost","setSurveyCostMultiplier","addDroneHubCost","setSurveyUpgradeNeeded","setDroneHubCostMultiplier","ResearchDiscipline","theoryCostMultiplier","Map","sqrt","RESEARCH_LIBRARY","setDesc","setTheoryDesc","setRevealAtStart","addUpgrade","StructureDefinition","effect","STRUCTURE_LIBRARY","addPrereq","addConsumption","TaskDefinition","costPerSecond","resultsPerTick","UpgradeDefinition","friendlyName","UPGRADE_LIBRARY","environment","bootstrapModule","err","console","log"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;AAcA;;;AAEA,QAAIA,cAAa,GAAG,uBAASC,CAAT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","file":"main-es5.js","sourcesContent":["export default \"<div fxLayout=\\\"column\\\" class=\\\"layout-container\\\">\\n  <div fxFlex=\\\"4\\\" class=\\\"layout-top\\\">\\n    Space Idle 0.2 --- Work in progress --- SAVING IS NOT YET IMPLEMENTED!\\n  </div>\\n  <div fxFlex=\\\"96\\\" fxLayout=\\\"row\\\" class=\\\"layout-center\\\">\\n    <div fxFlex=\\\"15\\\" fxLayout=\\\"column\\\" class=\\\"layout-column-left\\\">\\n      <div fxFlex=\\\"60\\\" class=\\\"layout-column-left-top\\\">\\n        <app-resource-overview></app-resource-overview>\\n      </div>\\n      <div fxFlex=\\\"40\\\" class=\\\"layout-column-left-bottom\\\">\\n        <app-actions></app-actions>\\n      </div>\\n    </div>\\n    <div fxFlex=\\\"85\\\" fxLayout=\\\"column\\\" class=\\\"layout-column-center\\\">\\n        <app-planet-interaction fxFlex=\\\"100\\\" [hidden]=\\\"showShipPanel\\\"></app-planet-interaction>\\n        <app-ship-interaction fxFlex=\\\"100\\\" [hidden]=\\\"!showShipPanel\\\"></app-ship-interaction>\\n    </div>\\n    <!-- <div fxFlex=\\\"10\\\" fxLayout=\\\"column\\\" class=\\\"layout-column-right\\\">\\n        <app-system-overview fxFlex=\\\"100\\\" (shipSelected)=\\\"onShipSelected($event)\\\"></app-system-overview>\\n        <app-ship-overview fxFlex=\\\"40\\\" (researchButtonClicked)=\\\"onResearchButtonClicked()\\\"></app-ship-overview>\\n    </div> -->\\n  </div>\\n</div>\\n\\n<!--\\n<div>{{currentTime}}</div>\\n<button mat-button (click)=\\\"onResetButtonClicked()\\\">Reset</button>\\n-->\\n\"","export default \"<div class=\\\"spaceidle-section\\\" fxLayout=\\\"column\\\">\\n  <div class=\\\"current-task\\\" *ngIf=\\\"getCurrentTask() != null\\\">\\n    <div class=\\\"current-task-name\\\">{{ getCurrentTask().name }}</div>\\n    <app-progress-bar\\n      [value]=\\\"getCurrentTask().progress\\\"\\n      [max]=\\\"getCurrentTask().needed\\\"\\n    ></app-progress-bar>\\n  </div>\\n  <app-resource-bar\\n    [resource]=\\\"resourceService.globalResources.get('energy')\\\"\\n  ></app-resource-bar>\\n  <div class=\\\"list-panel\\\" fxFlex=\\\"grow\\\">\\n    <div *ngIf=\\\"showWin()\\\">\\n      Congratulations, you have completed the space idle prototype!\\n    </div>\\n    <div class=\\\"action-list\\\" *ngFor=\\\"let ability of getAbilities()\\\">\\n      <ability-button [ability]=\\\"ability\\\"></ability-button>\\n    </div>\\n    <div class=\\\"upgrade-list\\\" *ngFor=\\\"let upgrade of getUpgrades()\\\">\\n      <game-button\\n        [name]=\\\"upgrade.name\\\"\\n        [appGameTooltip]=\\\"getUpgradeTooltip(upgrade)\\\"\\n        [disabled]=\\\"!canAffordUpgrade(upgrade)\\\"\\n        (click)=\\\"onClickUpgrade(upgrade)\\\"\\n      ></game-button>\\n    </div>\\n  </div>\\n</div>\\n\"","export default \"<game-button [appGameTooltip]=\\\"tooltip\\\"\\n             [name]=\\\"ability.name\\\"\\n             [disabled]=\\\"!canDo()\\\"\\n             [cooldown]=\\\"getCooldownPercent()\\\"\\n             (click)=\\\"onClick()\\\"></game-button>\\n\"","export default \"<div class=\\\"game-btn\\\" [ngClass]=\\\"{ 'disabled': disabled || cooldown > 0, 'small': small }\\\"\\n      (click)=\\\"onClick($event)\\\">\\n  <div class=\\\"cooldown\\\" [ngStyle]=\\\"{'width': cooldown + '%', 'transition': smoothCooldown ? '' : 'none'}\\\"></div>\\n  <div class=\\\"running\\\" *ngIf=\\\"running\\\"><div class=\\\"running-top\\\"></div><div class=\\\"running-bottom\\\"></div></div>\\n  <span class=\\\"text\\\" [ngClass]=\\\"{ 'text-small': small }\\\">{{name}}</span>\\n</div>\\n\"","export default \"<div class=\\\"bar-text\\\">{{value | displayNumber}} / {{max | displayNumber}}</div>\\n<div class=\\\"bar-outer\\\">\\n  <div class=\\\"bar-inner\\\" [style.width]=\\\"getWidth() + '%'\\\">\\n  </div>\\n</div>\\n\"","export default \"<app-progress-bar [value]=\\\"resource.amount\\\" [max]=\\\"resource.max\\\"></app-progress-bar>\\n\"","export default \"<game-button [appGameTooltip]=\\\"getTooltip()\\\"\\n            [name]=\\\"taskDef.name\\\"\\n            [disabled]=\\\"\\\"\\n            [running]=\\\"isRunning()\\\"\\n            (click)=\\\"onClick()\\\"></game-button>\\n\"","export default \"<div class=\\\"container\\\">\\n  <div class=\\\"header-section\\\">\\n    <div class=\\\"name\\\">{{tooltipModel.name}}</div>\\n    <div class=\\\"description\\\">{{tooltipModel.desc}}</div>\\n  </div>\\n  <div class=\\\"cost-section\\\" *ngIf=\\\"tooltipModel.costs != null\\\">\\n    <div class=\\\"cost\\\" *ngFor=\\\"let costItem of tooltipModel.costs.resources\\\">\\n      <span class=\\\"resource-name\\\">{{costItem.resource}}</span>\\n      <span class=\\\"resource-amount\\\">{{costItem.amount | displayNumber}}</span>\\n    </div>\\n  </div>\\n  <div class=\\\"consumption-section\\\" *ngIf=\\\"tooltipModel.consumption != null\\\">\\n    Consumes\\n    <div class=\\\"consumption\\\" *ngFor=\\\"let costItem of tooltipModel.consumption.resources\\\">\\n      <span class=\\\"resource-name\\\">{{costItem.resource}}</span>\\n      <span class=\\\"resource-amount\\\">{{costItem.amount | displayNumber}}</span>\\n    </div>\\n  </div>\\n  <div class=\\\"production-section\\\" *ngIf=\\\"tooltipModel.production != null\\\">\\n    Produces\\n    <div class=\\\"production\\\" *ngFor=\\\"let costItem of tooltipModel.production.resources\\\">\\n      <span class=\\\"resource-name\\\">{{costItem.resource}}</span>\\n      <span class=\\\"resource-amount\\\">{{costItem.amount | displayNumber}}</span>\\n    </div>\\n  </div>\\n</div>\\n\"","export default \"<div fxLayout=\\\"row\\\">\\n  <div fxLayout=\\\"column\\\" fxFlex=\\\"50\\\" class=\\\"command-column-left\\\">\\n    <br />\\n    <div fxFlex=\\\"50\\\" *ngIf=\\\"showOutpostPanel\\\" class=\\\"outpost-panel\\\">\\n      <div>{{outpostName}}</div>\\n      <button mat-button *ngIf=\\\"outpostUpgradeVisible\\\" [disabled]=\\\"!canAffordOutpostUpgrade()\\\" (click)=\\\"onUpgradeOutpost()\\\">{{outpostUpgradeText}}</button>\\n      <div *ngFor=\\\"let cost of outpostUpgradeCosts.resources\\\">{{cost.resource}}: {{cost.amount}}</div>\\n    </div>\\n    <div fxLayout=\\\"column\\\" fxFlex=\\\"50\\\" class=\\\"starship-panel\\\" *ngIf=\\\"outpostLevel === 3\\\">\\n      <div *ngFor=\\\"let part of shipParts\\\">\\n          <button mat-button\\n            *ngIf=\\\"!part.built\\\"\\n            (click)=\\\"onBuildShipComponent(part)\\\"\\n            [disabled]=\\\"!canAffordShipPart(part)\\\">{{part.name}}: {{part.cost.resources[0].amount}} {{part.cost.resources[0].resource}}</button>\\n      </div>\\n      <button mat-button *ngIf=\\\"showLaunchBtn\\\" (click)=\\\"onLaunchShip()\\\">Launch Starship</button>\\n      <div *ngIf=\\\"shipLaunched\\\">Congratulations, you have reached the end of the Space Idle prototype!</div>\\n    </div>\\n  </div>\\n  <div fxLayout=\\\"column\\\" fxFlex=\\\"50\\\" class=\\\"command-column-right\\\">\\n    <div fxFlex=\\\"100\\\" class=\\\"drone-panel\\\">\\n      <div>Drones: {{currentDrones}}/{{maxDrones}} (Idle: {{idleDrones}})</div>\\n      <button mat-button *ngIf=\\\"showBuildDrone\\\" [disabled]=\\\"!canAffordDrone()\\\" (click)=\\\"onBuildDrone()\\\">Build Drone</button>\\n      <div *ngIf=\\\"showBuildDrone\\\">\\n        <div *ngFor=\\\"let resource of droneCost.resources\\\">\\n          {{resource.resource}}: {{resource.amount}}\\n        </div>\\n      </div>\\n      <br />\\n      <div class=\\\"drone-assignment\\\">\\n        <div fxLayout=\\\"row\\\" *ngFor=\\\"let task of droneTasks\\\">\\n          <ng-container *ngIf=\\\"task.visible\\\">\\n            <div fxFlex=\\\"50\\\">{{task.name}}</div>\\n            <div fxFlex=\\\"50\\\">\\n              <button (click)=\\\"onUnassignDrone(task.name)\\\">-</button>\\n              {{task.assigned}}\\n              <button (click)=\\\"onAssignDrone(task.name)\\\">+</button>\\n            </div>\\n          </ng-container>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","export default \"<div *ngIf=\\\"showBuildList\\\">\\n    <mat-button-toggle-group #group=\\\"matButtonToggleGroup\\\" value=\\\"all\\\">\\n      <mat-button-toggle value=\\\"all\\\">All</mat-button-toggle>\\n      <mat-button-toggle value=\\\"gather\\\">Gather</mat-button-toggle>\\n      <mat-button-toggle value=\\\"refine\\\">Refine</mat-button-toggle>\\n      <mat-button-toggle value=\\\"power\\\">Power</mat-button-toggle>\\n      <mat-button-toggle value=\\\"misc\\\">Misc</mat-button-toggle>\\n    </mat-button-toggle-group>\\n    <div class=\\\"structure-list\\\">\\n      <div class=\\\"structure-item\\\" *ngFor=\\\"let buildItem of getFilteredBuildingList(group.value)\\\">\\n        <game-button class=\\\"item-build-btn\\\" [appGameTooltip]=\\\"buildItem.tooltip\\\"\\n                      [name]=\\\"getButtonName(buildItem)\\\"\\n                      [disabled]=\\\"!canBuild(buildItem)\\\"\\n                      (click)=\\\"onBuildItemClicked(buildItem.name)\\\"></game-button>\\n        <game-button class=\\\"item-deactivate-btn\\\" [name]=\\\"'-'\\\"\\n                    *ngIf=\\\"buildItem.showActivateControls\\\"\\n                    (click)=\\\"onDeactivateItemClicked(buildItem.name)\\\"\\n                    [disabled]=\\\"buildItem.activeNumber <= 0\\\"></game-button>\\n        <game-button class=\\\"item-activate-btn\\\" [name]=\\\"'+'\\\"\\n                      *ngIf=\\\"buildItem.showActivateControls\\\"\\n                      (click)=\\\"onActivateItemClicked(buildItem.name)\\\"\\n                      [disabled]=\\\"!buildItem.canActivate\\\"></game-button>\\n      </div>\\n    </div>\\n  </div>\\n\"","export default \"<div fxLayout=\\\"row\\\" class=\\\"layout-container\\\">\\n  <div fxFlex=\\\"100\\\" class=\\\"layout-column-left\\\">\\n    <div class=\\\"region-list\\\">\\n      <div class=\\\"region\\\" *ngFor=\\\"let region of regionList\\\">\\n        <div fxLayout=\\\"row\\\" class=\\\"region-header\\\">\\n          <div class=\\\"region-left-col\\\" fxFlex=\\\"nogrow\\\">\\n            <div class=\\\"region-title\\\" [appGameTooltip]=\\\"region.tooltip\\\">{{region.name}}</div>\\n            <div class=\\\"region-drone-count\\\" *ngIf=\\\"showDroneCounts(region)\\\">Drones: {{region.dronesAssigned}}/{{region.droneSlots}}</div>\\n            <div [ngStyle]=\\\"{'width': '80%'}\\\">\\n              <game-button [appGameTooltip]=\\\"droneHubTooltip(region)\\\"\\n              *ngIf=\\\"showDroneHubButton(region)\\\"\\n              [disabled]=\\\"!canAffordDroneHub(region)\\\"\\n              name=\\\"Drone Hub\\\" small=\\\"true\\\" (click)=\\\"buyDroneHub(region)\\\"></game-button>\\n            </div>\\n          </div>\\n          <div class=\\\"region-survey-progress\\\" fxFlex=\\\"40\\\">\\n            <div fxLayout=\\\"column\\\">\\n              <div fxLayout=\\\"row\\\">\\n                <span fxFlex=\\\"40\\\">{{getSurveyLevelText(region)}}</span>\\n                <span fxFlex=\\\"40\\\" class=\\\"region-survey-btn\\\">\\n                  <game-button small=\\\"true\\\" [appGameTooltip]=\\\"surveyTooltip(region)\\\"\\n                  [disabled]=\\\"!canAffordSurvey(region) || upgradeRequiredForSurvey(region)\\\"\\n                  [name]=\\\"getSurveyButtonName(region)\\\"\\n                  [running]=\\\"isSurveyRunning(region)\\\"\\n                  (click)=\\\"survey(region)\\\"></game-button>\\n                </span>\\n              </div>\\n              <app-progress-bar fxFlex=\\\"50\\\" [value]=\\\"getSurveyProgress(region.id)\\\" [max]=\\\"getSurveyProgressNeeded(region.id)\\\"></app-progress-bar>\\n            </div>\\n          </div>\\n        </div>\\n        <div class=\\\"region-content\\\" *ngIf=\\\"region.surveyLevel > 0\\\" fxLayout=\\\"row\\\">\\n          <div class=\\\"feature-list\\\">\\n            <div class=\\\"feature\\\" fxLayout=\\\"row\\\" *ngFor=\\\"let feature of region.features\\\">\\n              <div class=\\\"feature-active\\\" fxLayout=\\\"row\\\" *ngIf=\\\"feature.active\\\">\\n                <div class=\\\"feature-left-col\\\" fxFlex=\\\"nogrow\\\">\\n                  <div class=\\\"feature-name\\\" [appGameTooltip]=\\\"feature.tooltip\\\">{{feature.name}}</div>\\n                  <div class=\\\"feature-drone-control\\\" *ngIf=\\\"showDroneControl(feature)\\\">\\n                    <span class=\\\"feature-drone-decrement\\\"\\n                          [ngClass]=\\\"{'hidden' : !canUnassignDrone(region, feature)}\\\"\\n                          (click)=\\\"unassignDrone(feature)\\\">&lt;</span>\\n                    <span class=\\\"feature-drone-count\\\">Drones: {{feature.dronesAssigned}}/{{feature.droneSlots}}</span>\\n                    <span class=\\\"feature-drone-increment\\\"\\n                          [ngClass]=\\\"{'hidden' : !canAssignDrone(region, feature)}\\\"\\n                          (click)=\\\"assignDrone(feature)\\\">&gt;</span>\\n                  </div>\\n                </div>\\n                <div class=\\\"feature-buttons\\\" fxLayout=\\\"row\\\" fxFlex=\\\"70\\\">\\n                  <div *ngFor=\\\"let ability of feature.abilities\\\">\\n                    <ability-button class=\\\"ability\\\" [ability]=\\\"ability.def\\\" [feature]=\\\"feature.featureInstance\\\"></ability-button>\\n                  </div>\\n                  <div *ngFor=\\\"let task of feature.tasks\\\">\\n                    <task-button class=\\\"task\\\" [task]=\\\"task.instance\\\" [taskDef]=\\\"task.def\\\" [feature]=\\\"feature.featureInstance\\\"></task-button>\\n                  </div>\\n                </div>\\n              </div>\\n              <div class=\\\"feature-hidden\\\" *ngIf=\\\"feature.hintActive\\\" [appGameTooltip]=\\\"feature.tooltip\\\">\\n                ---{{feature.surveyNeeded}}---\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n</div>\\n\"","export default \"<div fxLayout=\\\"column\\\" class=\\\"spaceidle-section\\\">\\n  <div fxFlex=\\\"5\\\" class=\\\"planet-header\\\" fxLayout=\\\"row\\\">\\n    <div class=\\\"planet-name\\\" fxFlex=\\\"20\\\">\\n      Forest Planet\\n    </div>\\n    <div class=\\\"planet-drones\\\" fxFlex=\\\"20\\\">\\n      Drones: {{droneCount()}}/{{droneCap()}}\\n      <span *ngIf=\\\"dronesIdle() > 0\\\">({{dronesIdle()}} idle)</span>\\n    </div>\\n    <div class=\\\"planet-power\\\" fxFlex=\\\"20\\\">\\n      Power: {{powerUsed()}}/{{powerAvailable()}}\\n    </div>\\n  </div>\\n  <mat-tab-group fxFlex=\\\"95\\\">\\n    <mat-tab label=\\\"Explore\\\">\\n      <app-pi-terrain></app-pi-terrain>\\n    </mat-tab>\\n    <mat-tab label=\\\"Structures\\\" *ngIf=\\\"showStructures\\\">\\n      <app-pi-structures></app-pi-structures>\\n    </mat-tab>\\n    <mat-tab label=\\\"Research\\\" *ngIf=\\\"showResearch\\\">\\n      <app-si-research></app-si-research>\\n    </mat-tab>\\n  </mat-tab-group>\\n</div>\\n\"","export default \"<div class=\\\"spaceidle-section\\\">\\n  <mat-button-toggle-group\\n    #localRateToggleGroup=\\\"matButtonToggleGroup\\\"\\n    value=\\\"localRates\\\"\\n    style=\\\"display: none\\\"\\n  >\\n    <mat-button-toggle value=\\\"localRates\\\">Local Rates</mat-button-toggle>\\n    <mat-button-toggle value=\\\"globalRates\\\">Global Rates</mat-button-toggle>\\n  </mat-button-toggle-group>\\n  <ul>\\n    <li *ngFor=\\\"let resource of getResourceList(localRateToggleGroup.value)\\\">\\n      {{ resource.name }} {{ resource.amount | displayNumber }}\\n      <span *ngIf=\\\"resource.maxAmount > 0\\\">/{{ resource.maxAmount | displayNumber }}</span> ({{\\n        resource.rate | displayNumber\\n      }}/sec)\\n    </li>\\n  </ul>\\n</div>\\n\"","export default \"<div fxLayout=\\\"column\\\" class=\\\"spaceidle-section\\\">\\n  <div fxFlex=\\\"5\\\" class=\\\"ship-header\\\">\\n    Information about the ship goes here!\\n  </div>\\n  <mat-tab-group fxFlex=\\\"95\\\">\\n    <mat-tab label=\\\"Research\\\">\\n      <app-si-research></app-si-research>\\n    </mat-tab>\\n    <mat-tab label=\\\"Upgrades\\\">\\n      <app-si-upgrades></app-si-upgrades>\\n    </mat-tab>\\n  </mat-tab-group>\\n</div>\\n\"","export default \"<div>\\n  <div class=\\\"research-item\\\" *ngFor=\\\"let item of researchList\\\">\\n    <div class=\\\"research-item-top\\\">\\n      <span [appGameTooltip]=\\\"item.knowledgeTooltip\\\" class=\\\"title\\\">{{item.name}} {{item.progress.knowledgeLevel}}</span>\\n      <game-button small=\\\"true\\\" name=\\\"Research\\\" class=\\\"research-btn\\\" (click)=\\\"research(item)\\\"></game-button>\\n    </div>\\n    <div class=\\\"research-item-middle\\\">\\n      <app-progress-bar [value]=\\\"item.progress.knowledgeProgress\\\" [max]=\\\"getKnowledgeNeeded(item)\\\"></app-progress-bar>\\n    </div>\\n    <div class=\\\"research-item-bottom\\\">\\n      <span [appGameTooltip]=\\\"item.theoryTooltip\\\">Theory Lv {{item.progress.theoryLevel}}</span>\\n      <app-progress-bar [value]=\\\"item.progress.theoryProgress\\\" [max]=\\\"getTheoryNeeded(item)\\\"></app-progress-bar>\\n    </div>\\n    <div class=\\\"research-item-footer\\\">\\n      <span *ngIf=\\\"item.nextAdvanceLevel > 0\\\">Next advance at Level {{item.nextAdvanceLevel}}</span>\\n      <span *ngIf=\\\"item.nextAdvanceLevel <= 0\\\">No more advances</span>\\n    </div>\\n  </div>\\n</div>\\n\"","export default \"<p>\\n  si-systems works!\\n</p>\\n\"","export default \"<div fxLayout=\\\"row\\\">\\n  <div fxFlex=\\\"50\\\" class=\\\"upgrades-available\\\">\\n    <h2>Available</h2>\\n    <div class=\\\"upgrade-list-item\\\" *ngFor=\\\"let item of upgradesAvailable\\\">\\n      <div fxFlex=\\\"50\\\">\\n        <button mat-raised-button [disabled]=\\\"!canAffordUpgrade(item)\\\" (click)=\\\"onClickUpgradeItem(item)\\\">\\n          {{ item.name }}\\n        </button>\\n        <div>{{ item.description }}</div>\\n      </div>\\n      <div fxFlex=\\\"50\\\">\\n        <div class=\\\"upgrade-cost\\\" *ngFor=\\\"let resource of item.cost.resources\\\">\\n          {{ resource.resource }}: {{ resource.amount }}\\n        </div>\\n      </div>\\n      <br />\\n    </div>\\n  </div>\\n  <div fxFlex=\\\"50\\\" class=\\\"upgrades-complete\\\">\\n    <h2>Complete</h2>\\n    <div\\n      class=\\\"upgrade-complete-list-item\\\"\\n      *ngFor=\\\"let item of upgradesComplete\\\"\\n    >\\n      {{ item.name }}\\n    </div>\\n  </div>\\n</div>\\n\"","export default \"<div class=\\\"spaceidle-section\\\">\\n  <h1>Ship Overview</h1>\\n  <div>Location: Orbiting Ice Planet</div>\\n  <div>Activity: Scanning</div>\\n  <div>Science: 130 (0.03/sec)</div>\\n  <ul>\\n    <li>Biology 1 (530/1.6k)</li>\\n    <li>Physics 3 (530/1.6k)</li>\\n    <li>Engineering 2 (530/1.6k)</li>\\n  </ul>\\n  <button mat-raised-button (click)=\\\"onResearchButtonClicked()\\\">\\n    Research and Upgrades\\n  </button>\\n</div>\\n\"","export default \"<div class=\\\"spaceidle-section\\\">\\n  <mat-radio-group\\n    class=\\\"planet-list\\\"\\n    [(ngModel)]=\\\"selectedPlanet\\\"\\n    (ngModelChange)=\\\"onSelectionChange($event)\\\"\\n  >\\n    <mat-radio-button\\n      class=\\\"planet-list-item\\\"\\n      *ngFor=\\\"let planet of planets\\\"\\n      [value]=\\\"planet\\\"\\n    >\\n      {{ planet.name }}\\n    </mat-radio-button>\\n  </mat-radio-group>\\n</div>\\n\"","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","export default \".layout-container {\\n  height: 100%;\\n}\\n\\n.layout-top {\\n  background-color: white;\\n  color: darkgray;\\n  font-style: italic;\\n  border-bottom: 1px solid darkgray;\\n  padding: 2px;\\n}\\n\\n.layout-column-left-top {\\n  border-bottom: 1px solid darkgray;\\n}\\n\\n.layout-column-center {\\n  border-left: 1px solid darkgray;\\n  border-right: 1px solid darkgray;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9vcHQvbGFtcHAvaHRkb2NzL2ltZy9zcGFjZS1pZGxlL3NyYy9hcHAvYXBwLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9hcHAuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxZQUFBO0FDQ0o7O0FERUE7RUFDRSx1QkFBQTtFQUNBLGVBQUE7RUFDQSxrQkFBQTtFQUNBLGlDQUFBO0VBQ0EsWUFBQTtBQ0NGOztBRE1BO0VBRUUsaUNBQUE7QUNKRjs7QURXQTtFQUNJLCtCQUFBO0VBQ0EsZ0NBQUE7QUNSSiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5sYXlvdXQtY29udGFpbmVye1xuICAgIGhlaWdodDogMTAwJTtcbn1cblxuLmxheW91dC10b3B7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICBjb2xvcjogZGFya2dyYXk7XG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIGRhcmtncmF5O1xuICBwYWRkaW5nOiAycHg7XG59XG5cbi5sYXlvdXQtY29sdW1uLWxlZnR7XG5cbn1cblxuLmxheW91dC1jb2x1bW4tbGVmdC10b3B7XG4gIC8vYmFja2dyb3VuZC1jb2xvcjogIzU1RkY1NTtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIGRhcmtncmF5O1xufVxuXG4ubGF5b3V0LWNvbHVtbi1sZWZ0LWJvdHRvbXtcbiAgLy9iYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjU1LCAxMTksIDg1KTtcbn1cblxuLmxheW91dC1jb2x1bW4tY2VudGVye1xuICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgZGFya2dyYXk7XG4gICAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgZGFya2dyYXk7XG4gICAgLy9iYWNrZ3JvdW5kLWNvbG9yOiAjNTVDQzU1O1xufVxuXG4ubGF5b3V0LWNvbHVtbi1yaWdodHtcbiAgICAvL2JhY2tncm91bmQtY29sb3I6ICM1NTU1NTU7XG59XG4iLCIubGF5b3V0LWNvbnRhaW5lciB7XG4gIGhlaWdodDogMTAwJTtcbn1cblxuLmxheW91dC10b3Age1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgY29sb3I6IGRhcmtncmF5O1xuICBmb250LXN0eWxlOiBpdGFsaWM7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBkYXJrZ3JheTtcbiAgcGFkZGluZzogMnB4O1xufVxuXG4ubGF5b3V0LWNvbHVtbi1sZWZ0LXRvcCB7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBkYXJrZ3JheTtcbn1cblxuLmxheW91dC1jb2x1bW4tY2VudGVyIHtcbiAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCBkYXJrZ3JheTtcbiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgZGFya2dyYXk7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { PlanetService } from './services/planet.service';\nimport { TimeService } from './services/time.service';\nimport { SimulationService } from './services/simulation.service';\nimport { FlagsService } from './services/flags.service';\nimport { ResourceService } from './services/resource.service';\nimport { TaskService } from './services/task.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit {\n\n  currentTime:number = 0;\n  showShipPanel:boolean = false;\n  title = 'space-idle';\n\n\n  constructor(private planetService:PlanetService,\n              private timeService:TimeService,\n              private simulationService:SimulationService,\n              private flagsService:FlagsService,\n              private resourceService:ResourceService,\n              private taskService:TaskService){}\n\n  ngOnInit(): void {\n    this.timeService.startGame();\n    this.flagsService.init();\n    this.planetService.initializeSystem();\n    this.timeService.tick.subscribe(x => this.currentTime = x);\n    this.resourceService.init();\n    this.simulationService.init();\n    this.simulationService.reset();\n    this.taskService.init();\n  }\n\n  onShipSelected(value: boolean){\n    this.showShipPanel = value;\n  }\n\n  onResetButtonClicked(){\n    this.timeService.startGame();\n  }\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { NgModule } from '@angular/core';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { FormsModule } from '@angular/forms';\nimport { OverlayModule } from '@angular/cdk/overlay';\n\nimport { AppComponent } from './app.component';\nimport { MaterialModule } from './shared/material.module';\nimport { SystemOverviewComponent } from './components/system-overview/system-overview.component';\nimport { PlanetInteractionComponent } from './components/planet-interaction/planet-interaction.component';\nimport { ResourceOverviewComponent } from './components/resource-overview/resource-overview.component';\nimport { ShipOverviewComponent } from './components/ship-overview/ship-overview.component';\nimport { ShipInteractionComponent } from './components/ship-interaction/ship-interaction.component';\nimport { PiStructuresComponent } from './components/planet-interaction/pi-structures/pi-structures.component';\nimport { PiTerrainComponent } from './components/planet-interaction/pi-terrain/pi-terrain.component';\nimport { SiResearchComponent } from './components/ship-interaction/si-research/si-research.component';\nimport { SiUpgradesComponent } from './components/ship-interaction/si-upgrades/si-upgrades.component';\nimport { SiSystemsComponent } from './components/ship-interaction/si-systems/si-systems.component';\nimport { PiCommandComponent } from './components/planet-interaction/pi-command/pi-command.component';\n\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { faCog, faCompass, faCheck } from '@fortawesome/free-solid-svg-icons';\nimport { DisplayNumberPipe } from './pipes/display-number.pipe';\nimport { ActionsComponent } from './components/actions/actions.component';\nimport { GameTooltipDirective } from './directives/game-tooltip.directive';\nimport { GameTooltipComponent } from './components/game-tooltip/game-tooltip.component';\nimport { ProgressBarComponent } from './components/common/progress-bar/progress-bar.component';\nimport { ResourceBarComponent } from './components/common/resource-bar/resource-bar.component';\nimport { GameButtonComponent } from './components/common/game-button/game-button.component';\nimport { AbilityButtonComponent } from './components/common/ability-button/ability-button.component';\nimport { TaskButtonComponent } from './components/common/task-button/task-button.component';\n\nlibrary.add(faCog);\nlibrary.add(faCompass);\nlibrary.add(faCheck);\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    SystemOverviewComponent,\n    PlanetInteractionComponent,\n    ResourceOverviewComponent,\n    ShipOverviewComponent,\n    ShipInteractionComponent,\n    PiStructuresComponent,\n    PiTerrainComponent,\n    SiResearchComponent,\n    SiUpgradesComponent,\n    SiSystemsComponent,\n    PiCommandComponent,\n    DisplayNumberPipe,\n    ActionsComponent,\n    GameTooltipDirective,\n    GameTooltipComponent,\n    ProgressBarComponent,\n    ResourceBarComponent,\n    GameButtonComponent,\n    AbilityButtonComponent,\n    TaskButtonComponent\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    MaterialModule,\n    FlexLayoutModule,\n    FormsModule,\n    FontAwesomeModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent],\n  entryComponents: [GameTooltipComponent]\n})\nexport class AppModule { }\n","export default \".list-panel {\\n  display: block;\\n  overflow-y: auto;\\n  padding: 2px;\\n}\\n\\n.current-task {\\n  padding: 5px 2px 5px 2px;\\n  border-bottom: 1px solid black;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9vcHQvbGFtcHAvaHRkb2NzL2ltZy9zcGFjZS1pZGxlL3NyYy9hcHAvY29tcG9uZW50cy9hY3Rpb25zL2FjdGlvbnMuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL2NvbXBvbmVudHMvYWN0aW9ucy9hY3Rpb25zLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsY0FBQTtFQUNBLGdCQUFBO0VBQ0EsWUFBQTtBQ0NGOztBREVBO0VBQ0Usd0JBQUE7RUFDQSw4QkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9hY3Rpb25zL2FjdGlvbnMuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubGlzdC1wYW5lbCB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBvdmVyZmxvdy15OiBhdXRvO1xuICBwYWRkaW5nOiAycHg7XG59XG5cbi5jdXJyZW50LXRhc2sge1xuICBwYWRkaW5nOiA1cHggMnB4IDVweCAycHg7XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBibGFjaztcbn1cbiIsIi5saXN0LXBhbmVsIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIG92ZXJmbG93LXk6IGF1dG87XG4gIHBhZGRpbmc6IDJweDtcbn1cblxuLmN1cnJlbnQtdGFzayB7XG4gIHBhZGRpbmc6IDVweCAycHggNXB4IDJweDtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIGJsYWNrO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { Resource } from 'src/app/models/resource';\nimport { ResourceService } from 'src/app/services/resource.service';\nimport { Action } from 'src/app/staticData/actionDefinitions';\nimport { SHIP_ABILITY_LIBRARY, ShipAbilityDefinition, AbilityDefinition } from 'src/app/staticData/abilityDefinitions';\nimport { FlagsService } from 'src/app/services/flags.service';\nimport { TooltipViewModel } from 'src/app/models/tooltipViewModel';\nimport { ActionService } from 'src/app/services/action.service';\nimport { TaskService } from 'src/app/services/task.service';\nimport { ResearchService } from 'src/app/services/research.service';\nimport { UpgradeDefinition, UPGRADE_LIBRARY } from 'src/app/staticData/upgradeDefinitions';\n\n@Component({\n  selector: 'app-actions',\n  templateUrl: './actions.component.html',\n  styleUrls: ['./actions.component.scss']\n})\nexport class ActionsComponent implements OnInit {\n\n  constructor(public actionService: ActionService, public resourceService: ResourceService,\n              public flagsService: FlagsService, public taskService: TaskService,\n              public researchService: ResearchService) { }\n\n  ngOnInit() {\n\n  }\n\n  getCurrentTask() {\n    return this.taskService.getCurrentTask();\n  }\n\n  getAbilities(): ShipAbilityDefinition[] {\n    const abilities = SHIP_ABILITY_LIBRARY.filter(x => {\n      return this.isAbilityVisible(x);\n    });\n\n    return abilities;\n  }\n\n\n  isAbilityVisible(ability: AbilityDefinition) {\n    if (this.flagsService.check(ability.hiddenFlag)) {return false;}\n    if (ability.visibleNeededResearchName != '') {\n      if (this.researchService.getProgress(ability.visibleNeededResearchName).knowledgeLevel < ability.visibleNeededResearchLevel) {\n        return false;\n      }\n    }\n    return !ability.visibleFlags.some(x => {\n      return !this.flagsService.check(x);\n    })\n  }\n\n  getUpgrades(): UpgradeDefinition[] {\n    const upgrades = this.researchService.getAvailableUpgrades().map(x => {\n      return this.researchService.getUpgradeDefinition(x);\n    });\n\n    return upgrades;\n  }\n\n  getUpgradeTooltip(upg: UpgradeDefinition): TooltipViewModel {\n    const tooltip = new TooltipViewModel();\n    tooltip.name = upg.name;\n    tooltip.desc = upg.description;\n    tooltip.costs = upg.cost;\n    return tooltip;\n  }\n\n  canAffordUpgrade(upg: UpgradeDefinition): boolean {\n    return this.resourceService.canAfford(upg.cost);\n  }\n\n  onClickUpgrade(upg: UpgradeDefinition): boolean {\n    if (!this.canAffordUpgrade(upg)) {return;}\n    const result = this.researchService.buyUpgrade(upg.name);\n    if (result) {\n      upg.actions.forEach(act => {\n        act.doAction(this.actionService);\n      });\n    }\n  }\n\n  showWin() {\n    return this.flagsService.check('shuttleLaunched');\n  }\n\n}\n","export default \":host {\\n  display: block;\\n  margin: 0.3em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9vcHQvbGFtcHAvaHRkb2NzL2ltZy9zcGFjZS1pZGxlL3NyYy9hcHAvY29tcG9uZW50cy9jb21tb24vYWJpbGl0eS1idXR0b24vYWJpbGl0eS1idXR0b24uY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL2NvbXBvbmVudHMvY29tbW9uL2FiaWxpdHktYnV0dG9uL2FiaWxpdHktYnV0dG9uLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsY0FBQTtFQUNBLGFBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvY29tbW9uL2FiaWxpdHktYnV0dG9uL2FiaWxpdHktYnV0dG9uLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3R7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW46IDAuM2VtO1xufVxuIiwiOmhvc3Qge1xuICBkaXNwbGF5OiBibG9jaztcbiAgbWFyZ2luOiAwLjNlbTtcbn0iXX0= */\"","import { Component, OnInit, Input } from '@angular/core';\nimport { AbilityDefinition, FeatureAbilityDefinition } from 'src/app/staticData/abilityDefinitions';\nimport { Feature } from 'src/app/models/planet';\nimport { FeatureAction } from 'src/app/staticData/actionDefinitions';\nimport { ActionService } from 'src/app/services/action.service';\nimport { TooltipViewModel } from 'src/app/models/tooltipViewModel';\nimport { ResourceService } from 'src/app/services/resource.service';\nimport { TimeService } from 'src/app/services/time.service';\nimport { ResourceCollection } from 'src/app/models/resource';\nimport { ResearchService } from 'src/app/services/research.service';\n\n@Component({\n  selector: 'ability-button',\n  templateUrl: './ability-button.component.html',\n  styleUrls: ['./ability-button.component.scss']\n})\nexport class AbilityButtonComponent implements OnInit {\n\n  @Input() ability: AbilityDefinition;\n  @Input() feature: Feature;\n\n  cooldown: number = 0;\n  costs: ResourceCollection = new ResourceCollection();\n  tooltip: TooltipViewModel = new TooltipViewModel();\n\n  constructor(private _actionService: ActionService,\n    private _researchService: ResearchService,\n    private _resourceService: ResourceService,\n    private _timeService: TimeService) { }\n\n  ngOnInit(): void {\n    this._timeService.tick.subscribe(x => this.update(x));\n    this.initTooltip();\n    this.updateCosts();\n  }\n\n  initTooltip() {\n    this.tooltip.name = this.ability.name;\n    this.tooltip.desc = this.ability.desc;\n    this.tooltip.costs = this.costs;\n  }\n\n  update(dT: number) {\n    this.tickCooldown(dT);\n    this.updateCosts();\n    this.updateRequirementTip();\n  }\n\n  tickCooldown(dT: number) {\n    if (this.cooldown > 0) {\n      this.cooldown -= dT / 1000;\n      if (this.cooldown < 0) {this.cooldown = 0;}\n    }\n  }\n\n  updateCosts() {\n    this.costs.clear();\n    this.costs.addCollection(this.ability.costs);\n    let scalar = 0;\n    if (this.ability.costScalesWithTheory != '') {\n      scalar = this._researchService.getProgress(this.ability.costScalesWithTheory).theoryLevel;\n    }\n    else if (this.ability.costScalesWithResource != '') {\n      scalar = this._resourceService.get(this.ability.costScalesWithResource);\n    }\n    for (let i = 0; i < scalar; i++) {\n      this.costs.applyMultiplier(this.ability.costMultiplier);\n    }\n  }\n\n  updateRequirementTip() {\n    if (this.upgradeRequired()) {\n      this.tooltip.desc = 'You do not have the technology to do this yet.';\n    }\n    else {\n      this.tooltip.desc = this.ability.desc;\n    }\n  }\n\n  getCooldownPercent() {\n    if (this.ability.cooldown == 0) {return 0;}\n    return this.cooldown * 100 / this.ability.cooldown;\n  }\n\n  canDo(): boolean {\n    if (!this.canAfford()) {return false;}\n    if (this.upgradeRequired()) {return false;}\n    return true;\n  }\n\n  canAfford(): boolean {\n    if (!this._resourceService.canAfford(this.costs)) {return false;}\n    if (this.costs.has('drones')) {\n      return (this._actionService.canAffordDroneCost(this.costs.get('drones').amount));\n    }\n    return true;\n  }\n\n  upgradeRequired(): boolean {\n    if (this.ability.upgradeNeeded == '') {return false;}\n    if (this._researchService.isUpgradeCompleted(this.ability.upgradeNeeded)) {return false;}\n    return true;\n  }\n\n  onClick() {\n    if (this.ability == null) {return;}\n    if (!this.canDo()) {return;}\n    this._resourceService.spend(this.costs);\n    this.cooldown = this.ability.cooldown;\n    this.ability.actions.forEach(a => {\n      if (a instanceof FeatureAction) {\n        (a as FeatureAction).doFeatureAction(this._actionService, this.feature);\n      }\n      else {\n        a.doAction(this._actionService);\n      }\n    });\n  }\n\n}\n","export default \":host {\\n  display: block;\\n}\\n\\n.game-btn {\\n  display: flex;\\n  position: relative;\\n  flex: 1;\\n  min-height: 2em;\\n  background-color: white;\\n  border: 2px solid darkslategray;\\n  border-radius: 6px;\\n  font-family: \\\"PT Sans\\\", sans-serif;\\n  font-size: 16px;\\n  text-decoration: none;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  cursor: pointer;\\n}\\n\\n.game-btn:hover {\\n  background-color: lightgray;\\n}\\n\\n.game-btn:active {\\n  background-color: darkgray;\\n}\\n\\n.small {\\n  min-height: 1.2em;\\n  font-size: 9pt;\\n}\\n\\n.disabled, .disabled:hover, .disabled:active {\\n  background-color: lightgray;\\n  border: 2px solid darkslategray;\\n  color: #686868;\\n  cursor: default;\\n}\\n\\n.cooldown {\\n  display: flex;\\n  align-self: stretch;\\n  overflow: hidden;\\n  background-color: #a0fcff;\\n  border-radius: 4px 0px 0px 4px;\\n  width: 0%;\\n  pointer-events: none;\\n  transition: width 0.1s;\\n}\\n\\n.running {\\n  display: block;\\n  align-self: stretch;\\n  overflow: hidden;\\n  background: #ffffbe;\\n  border-radius: 4px;\\n  width: 100%;\\n  pointer-events: none;\\n  transition: width 0.1s;\\n}\\n\\n.running-top {\\n  display: block;\\n  background: repeating-linear-gradient(60deg, #fff175, #fff175 40px, transparent 40px, transparent 60px);\\n  background-size: 693px 1em;\\n  height: 50%;\\n  width: 100%;\\n  -webkit-animation: Run 3s linear infinite;\\n          animation: Run 3s linear infinite;\\n}\\n\\n.running-bottom {\\n  display: block;\\n  background: repeating-linear-gradient(120deg, #fff175, #fff175 40px, transparent 40px, transparent 60px);\\n  background-size: 693px 1em;\\n  height: 50%;\\n  width: 100%;\\n  -webkit-animation: Run 3s linear infinite;\\n          animation: Run 3s linear infinite;\\n}\\n\\n.text {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  margin-top: 0.5em;\\n  line-height: 100%;\\n  text-align: center;\\n  overflow: hidden;\\n  pointer-events: none;\\n}\\n\\n.text-small {\\n  margin-top: 0.1em;\\n}\\n\\n@-webkit-keyframes Run {\\n  from {\\n    background-position-x: -60px;\\n  }\\n  to {\\n    background-position-x: 80px;\\n  }\\n}\\n\\n@keyframes Run {\\n  from {\\n    background-position-x: -60px;\\n  }\\n  to {\\n    background-position-x: 80px;\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9vcHQvbGFtcHAvaHRkb2NzL2ltZy9zcGFjZS1pZGxlL3NyYy9hcHAvY29tcG9uZW50cy9jb21tb24vZ2FtZS1idXR0b24vZ2FtZS1idXR0b24uY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL2NvbXBvbmVudHMvY29tbW9uL2dhbWUtYnV0dG9uL2dhbWUtYnV0dG9uLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsY0FBQTtBQ0NGOztBREVBO0VBQ0UsYUFBQTtFQUNBLGtCQUFBO0VBQ0EsT0FBQTtFQUNBLGVBQUE7RUFDQSx1QkFBQTtFQUNBLCtCQUFBO0VBQ0Esa0JBQUE7RUFDQSxrQ0FBQTtFQUNBLGVBQUE7RUFDQSxxQkFBQTtFQUNBLHlCQUFBO0tBQUEsc0JBQUE7TUFBQSxxQkFBQTtVQUFBLGlCQUFBO0VBQ0EsZUFBQTtBQ0NGOztBREVBO0VBQ0UsMkJBQUE7QUNDRjs7QURFQTtFQUNFLDBCQUFBO0FDQ0Y7O0FERUE7RUFDRSxpQkFBQTtFQUNBLGNBQUE7QUNDRjs7QURFQTtFQUNFLDJCQUFBO0VBQ0EsK0JBQUE7RUFDQSxjQUFBO0VBQ0EsZUFBQTtBQ0NGOztBRENBO0VBQ0UsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsZ0JBQUE7RUFDQSx5QkFBQTtFQUNBLDhCQUFBO0VBQ0EsU0FBQTtFQUNBLG9CQUFBO0VBQ0Esc0JBQUE7QUNFRjs7QURDQTtFQUNFLGNBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0VBQ0EsbUJBQUE7RUFDQSxrQkFBQTtFQUNBLFdBQUE7RUFDQSxvQkFBQTtFQUNBLHNCQUFBO0FDRUY7O0FEQ0E7RUFDRSxjQUFBO0VBQ0EsdUdBQUE7RUFPQSwwQkFBQTtFQUNBLFdBQUE7RUFDQSxXQUFBO0VBQ0EseUNBQUE7VUFBQSxpQ0FBQTtBQ0pGOztBRE9BO0VBQ0UsY0FBQTtFQUNBLHdHQUFBO0VBT0EsMEJBQUE7RUFDQSxXQUFBO0VBQ0EsV0FBQTtFQUNBLHlDQUFBO1VBQUEsaUNBQUE7QUNWRjs7QURhQTtFQUNFLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxpQkFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtFQUNBLG9CQUFBO0FDVkY7O0FEYUE7RUFDRSxpQkFBQTtBQ1ZGOztBRGFBO0VBQ0U7SUFBTSw0QkFBQTtFQ1ROO0VEVUE7SUFBSSwyQkFBQTtFQ1BKO0FBQ0Y7O0FESUE7RUFDRTtJQUFNLDRCQUFBO0VDVE47RURVQTtJQUFJLDJCQUFBO0VDUEo7QUFDRiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvY29tbW9uL2dhbWUtYnV0dG9uL2dhbWUtYnV0dG9uLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xuICBkaXNwbGF5OiBibG9jaztcbn1cblxuLmdhbWUtYnRuIHtcbiAgZGlzcGxheTogZmxleDtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBmbGV4OiAxO1xuICBtaW4taGVpZ2h0OiAyZW07XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICBib3JkZXI6IDJweCBzb2xpZCBkYXJrc2xhdGVncmF5O1xuICBib3JkZXItcmFkaXVzOiA2cHg7XG4gIGZvbnQtZmFtaWx5OiAnUFQgU2FucycsIHNhbnMtc2VyaWY7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4uZ2FtZS1idG46aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGdyYXk7XG59XG5cbi5nYW1lLWJ0bjphY3RpdmUge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBkYXJrZ3JheTtcbn1cblxuLnNtYWxsIHtcbiAgbWluLWhlaWdodDogMS4yZW07XG4gIGZvbnQtc2l6ZTogOXB0O1xufVxuXG4uZGlzYWJsZWQsIC5kaXNhYmxlZDpob3ZlciwgLmRpc2FibGVkOmFjdGl2ZSB7XG4gIGJhY2tncm91bmQtY29sb3I6IGxpZ2h0Z3JheTtcbiAgYm9yZGVyOiAycHggc29saWQgZGFya3NsYXRlZ3JheTtcbiAgY29sb3I6IHJnYigxMDQsIDEwNCwgMTA0KTtcbiAgY3Vyc29yOiBkZWZhdWx0O1xufVxuLmNvb2xkb3duIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24tc2VsZjogc3RyZXRjaDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDE2MCwgMjUyLCAyNTUpO1xuICBib3JkZXItcmFkaXVzOiA0cHggMHB4IDBweCA0cHg7XG4gIHdpZHRoOiAwJTtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIHRyYW5zaXRpb246IHdpZHRoIDAuMXM7XG59XG5cbi5ydW5uaW5nIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIGFsaWduLXNlbGY6IHN0cmV0Y2g7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIGJhY2tncm91bmQ6IHJnYigyNTUsIDI1NSwgMTkwKTtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICB3aWR0aDogMTAwJTtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gIHRyYW5zaXRpb246IHdpZHRoIDAuMXM7XG59XG5cbi5ydW5uaW5nLXRvcCB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBiYWNrZ3JvdW5kOiByZXBlYXRpbmctbGluZWFyLWdyYWRpZW50KFxuICAgIDYwZGVnLFxuICAgIHJnYigyNTUsIDI0MSwgMTE3KSxcbiAgICByZ2IoMjU1LCAyNDEsIDExNykgNDBweCxcbiAgICB0cmFuc3BhcmVudCA0MHB4LFxuICAgIHRyYW5zcGFyZW50IDYwcHhcbiAgKTtcbiAgYmFja2dyb3VuZC1zaXplOiA2OTNweCAxZW07XG4gIGhlaWdodDogNTAlO1xuICB3aWR0aDogMTAwJTtcbiAgYW5pbWF0aW9uOiBSdW4gM3MgbGluZWFyIGluZmluaXRlO1xufVxuXG4ucnVubmluZy1ib3R0b20ge1xuICBkaXNwbGF5OiBibG9jaztcbiAgYmFja2dyb3VuZDogcmVwZWF0aW5nLWxpbmVhci1ncmFkaWVudChcbiAgICAxMjBkZWcsXG4gICAgcmdiKDI1NSwgMjQxLCAxMTcpLFxuICAgIHJnYigyNTUsIDI0MSwgMTE3KSA0MHB4LFxuICAgIHRyYW5zcGFyZW50IDQwcHgsXG4gICAgdHJhbnNwYXJlbnQgNjBweFxuICApO1xuICBiYWNrZ3JvdW5kLXNpemU6IDY5M3B4IDFlbTtcbiAgaGVpZ2h0OiA1MCU7XG4gIHdpZHRoOiAxMDAlO1xuICBhbmltYXRpb246IFJ1biAzcyBsaW5lYXIgaW5maW5pdGU7XG59XG5cbi50ZXh0IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBtYXJnaW4tdG9wOiAwLjVlbTtcbiAgbGluZS1oZWlnaHQ6IDEwMCU7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi50ZXh0LXNtYWxsIHtcbiAgbWFyZ2luLXRvcDogMC4xZW07XG59XG5cbkBrZXlmcmFtZXMgUnVuIHtcbiAgZnJvbSB7YmFja2dyb3VuZC1wb3NpdGlvbi14Oi02MHB4O31cbiAgdG8ge2JhY2tncm91bmQtcG9zaXRpb24teDo4MHB4O31cbn1cbiIsIjpob3N0IHtcbiAgZGlzcGxheTogYmxvY2s7XG59XG5cbi5nYW1lLWJ0biB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgZmxleDogMTtcbiAgbWluLWhlaWdodDogMmVtO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgYm9yZGVyOiAycHggc29saWQgZGFya3NsYXRlZ3JheTtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBmb250LWZhbWlseTogXCJQVCBTYW5zXCIsIHNhbnMtc2VyaWY7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4uZ2FtZS1idG46aG92ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGdyYXk7XG59XG5cbi5nYW1lLWJ0bjphY3RpdmUge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiBkYXJrZ3JheTtcbn1cblxuLnNtYWxsIHtcbiAgbWluLWhlaWdodDogMS4yZW07XG4gIGZvbnQtc2l6ZTogOXB0O1xufVxuXG4uZGlzYWJsZWQsIC5kaXNhYmxlZDpob3ZlciwgLmRpc2FibGVkOmFjdGl2ZSB7XG4gIGJhY2tncm91bmQtY29sb3I6IGxpZ2h0Z3JheTtcbiAgYm9yZGVyOiAycHggc29saWQgZGFya3NsYXRlZ3JheTtcbiAgY29sb3I6ICM2ODY4Njg7XG4gIGN1cnNvcjogZGVmYXVsdDtcbn1cblxuLmNvb2xkb3duIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24tc2VsZjogc3RyZXRjaDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2EwZmNmZjtcbiAgYm9yZGVyLXJhZGl1czogNHB4IDBweCAwcHggNHB4O1xuICB3aWR0aDogMCU7XG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICB0cmFuc2l0aW9uOiB3aWR0aCAwLjFzO1xufVxuXG4ucnVubmluZyB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBhbGlnbi1zZWxmOiBzdHJldGNoO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBiYWNrZ3JvdW5kOiAjZmZmZmJlO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIHdpZHRoOiAxMDAlO1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgdHJhbnNpdGlvbjogd2lkdGggMC4xcztcbn1cblxuLnJ1bm5pbmctdG9wIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIGJhY2tncm91bmQ6IHJlcGVhdGluZy1saW5lYXItZ3JhZGllbnQoNjBkZWcsICNmZmYxNzUsICNmZmYxNzUgNDBweCwgdHJhbnNwYXJlbnQgNDBweCwgdHJhbnNwYXJlbnQgNjBweCk7XG4gIGJhY2tncm91bmQtc2l6ZTogNjkzcHggMWVtO1xuICBoZWlnaHQ6IDUwJTtcbiAgd2lkdGg6IDEwMCU7XG4gIGFuaW1hdGlvbjogUnVuIDNzIGxpbmVhciBpbmZpbml0ZTtcbn1cblxuLnJ1bm5pbmctYm90dG9tIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIGJhY2tncm91bmQ6IHJlcGVhdGluZy1saW5lYXItZ3JhZGllbnQoMTIwZGVnLCAjZmZmMTc1LCAjZmZmMTc1IDQwcHgsIHRyYW5zcGFyZW50IDQwcHgsIHRyYW5zcGFyZW50IDYwcHgpO1xuICBiYWNrZ3JvdW5kLXNpemU6IDY5M3B4IDFlbTtcbiAgaGVpZ2h0OiA1MCU7XG4gIHdpZHRoOiAxMDAlO1xuICBhbmltYXRpb246IFJ1biAzcyBsaW5lYXIgaW5maW5pdGU7XG59XG5cbi50ZXh0IHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBtYXJnaW4tdG9wOiAwLjVlbTtcbiAgbGluZS1oZWlnaHQ6IDEwMCU7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG59XG5cbi50ZXh0LXNtYWxsIHtcbiAgbWFyZ2luLXRvcDogMC4xZW07XG59XG5cbkBrZXlmcmFtZXMgUnVuIHtcbiAgZnJvbSB7XG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbi14OiAtNjBweDtcbiAgfVxuICB0byB7XG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbi14OiA4MHB4O1xuICB9XG59Il19 */\"","import { Component, OnInit, Input, Output, EventEmitter, HostBinding } from '@angular/core';\nimport { CanDisable } from '@angular/material/core';\n\n@Component({\n  selector: 'game-button',\n  templateUrl: './game-button.component.html',\n  styleUrls: ['./game-button.component.scss']\n})\nexport class GameButtonComponent implements OnInit, CanDisable {\n\n  @Input() name: string;\n  @Input() disabled: boolean = false;\n  @Input() running: boolean = false;\n  @Input() small: boolean = false;\n  @Output() click = new EventEmitter<void>();\n\n  smoothCooldown: boolean = false;\n  private _cooldown: number;\n  get cooldown() {return this._cooldown;}\n  @Input()\n  set cooldown(val: number) {\n    if (val > this._cooldown || val == 0) {\n      this.smoothCooldown = false;\n    }\n    else {\n      this.smoothCooldown = true;\n    }\n    this._cooldown = val;\n  }\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n  onClick(event: MouseEvent) {\n    event.stopPropagation();\n    if (this.disabled) {return false;}\n    if (this.cooldown > 0) {return false;}\n    this.click.emit();\n  }\n\n}\n","export default \".bar-outer {\\n  background-color: #c9d7eb;\\n  border-radius: 3px;\\n  padding: 0px;\\n}\\n\\n.bar-inner {\\n  background-color: blue;\\n  height: 0.3em;\\n  border-radius: 3px;\\n}\\n\\n.bar-text {\\n  margin: 0px 0px 2px 10px;\\n  border-radius: 2px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9vcHQvbGFtcHAvaHRkb2NzL2ltZy9zcGFjZS1pZGxlL3NyYy9hcHAvY29tcG9uZW50cy9jb21tb24vcHJvZ3Jlc3MtYmFyL3Byb2dyZXNzLWJhci5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvY29tcG9uZW50cy9jb21tb24vcHJvZ3Jlc3MtYmFyL3Byb2dyZXNzLWJhci5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0FDQ0Y7O0FERUE7RUFDRSxzQkFBQTtFQUNBLGFBQUE7RUFDQSxrQkFBQTtBQ0NGOztBREVBO0VBQ0Usd0JBQUE7RUFDQSxrQkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9jb21tb24vcHJvZ3Jlc3MtYmFyL3Byb2dyZXNzLWJhci5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5iYXItb3V0ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjAxLCAyMTUsIDIzNSk7XG4gIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgcGFkZGluZzogMHB4O1xufVxuXG4uYmFyLWlubmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogYmx1ZTtcbiAgaGVpZ2h0OiAwLjNlbTtcbiAgYm9yZGVyLXJhZGl1czogM3B4O1xufVxuXG4uYmFyLXRleHQge1xuICBtYXJnaW46IDBweCAwcHggMnB4IDEwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDJweDtcbn1cbiIsIi5iYXItb3V0ZXIge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjYzlkN2ViO1xuICBib3JkZXItcmFkaXVzOiAzcHg7XG4gIHBhZGRpbmc6IDBweDtcbn1cblxuLmJhci1pbm5lciB7XG4gIGJhY2tncm91bmQtY29sb3I6IGJsdWU7XG4gIGhlaWdodDogMC4zZW07XG4gIGJvcmRlci1yYWRpdXM6IDNweDtcbn1cblxuLmJhci10ZXh0IHtcbiAgbWFyZ2luOiAwcHggMHB4IDJweCAxMHB4O1xuICBib3JkZXItcmFkaXVzOiAycHg7XG59Il19 */\"","import { Component, OnInit, Input, ContentChild } from '@angular/core';\n\n@Component({\n  selector: 'app-progress-bar',\n  templateUrl: './progress-bar.component.html',\n  styleUrls: ['./progress-bar.component.scss']\n})\nexport class ProgressBarComponent implements OnInit {\n\n  @Input() value: number = 15;\n  @Input() max: number = 100;\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  getWidth(): number {\n    let result = this.value / this.max;\n    result = result * 100;\n    result = Math.min(result, 100);\n    result = Math.max(0, result);\n    return result;\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvY29tbW9uL3Jlc291cmNlLWJhci9yZXNvdXJjZS1iYXIuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit, Input } from '@angular/core';\nimport { Resource } from 'src/app/models/resource';\n\n@Component({\n  selector: 'app-resource-bar',\n  templateUrl: './resource-bar.component.html',\n  styleUrls: ['./resource-bar.component.scss']\n})\nexport class ResourceBarComponent implements OnInit {\n\n  @Input() resource: Resource = new Resource('test', 5, 100);\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","export default \":host {\\n  margin: 0.3em;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9vcHQvbGFtcHAvaHRkb2NzL2ltZy9zcGFjZS1pZGxlL3NyYy9hcHAvY29tcG9uZW50cy9jb21tb24vdGFzay1idXR0b24vdGFzay1idXR0b24uY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL2NvbXBvbmVudHMvY29tbW9uL3Rhc2stYnV0dG9uL3Rhc2stYnV0dG9uLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9jb21tb24vdGFzay1idXR0b24vdGFzay1idXR0b24uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG4gIG1hcmdpbjogMC4zZW07XG59XG4iLCI6aG9zdCB7XG4gIG1hcmdpbjogMC4zZW07XG59Il19 */\"","import { Component, OnInit, Input } from '@angular/core';\nimport { Task } from 'src/app/models/task';\nimport { TaskDefinition } from 'src/app/staticData/taskDefinitions';\nimport { TaskService } from 'src/app/services/task.service';\nimport { TooltipViewModel } from 'src/app/models/tooltipViewModel';\nimport { ResourceService } from 'src/app/services/resource.service';\nimport { Feature } from 'src/app/models/planet';\n\n@Component({\n  selector: 'task-button',\n  templateUrl: './task-button.component.html',\n  styleUrls: ['./task-button.component.scss']\n})\nexport class TaskButtonComponent implements OnInit {\n\n  @Input() task: Task;\n  @Input() taskDef: TaskDefinition;\n  @Input() feature: Feature;\n\n  constructor(private _resourceService: ResourceService, private _taskService: TaskService) { }\n\n  ngOnInit(): void {\n  }\n\n  isRunning(): boolean {\n    return this.task != null && this._taskService.getCurrentTask() === this.task;\n  }\n\n  getTooltip(): TooltipViewModel {\n    const tooltip = new TooltipViewModel();\n    tooltip.name = this.taskDef.name;\n    tooltip.desc = this.taskDef.desc;\n    tooltip.costs = this.taskDef.startCost;\n    return tooltip;\n  }\n\n  canAfford() {\n    return this._resourceService.canAfford(this.taskDef.startCost);\n  }\n\n  onClick() {\n    if (this.taskDef == null) {return;}\n    if (!this.canAfford()) {return;}\n    if (this.isRunning()) {return;}\n    this._resourceService.spend(this.taskDef.startCost);\n    if (this.feature != null) {\n      this._taskService.beginFeatureTask(this.feature, this.taskDef.name);\n    };\n  }\n\n}\n","export default \".container {\\n  padding: 5px;\\n  background: white;\\n  border: 1px solid black;\\n  margin: 0px;\\n  width: 150px;\\n}\\n\\n.name {\\n  font-weight: bold;\\n}\\n\\n.description {\\n  margin-top: 5px;\\n  margin-bottom: 5px;\\n  font-size: 8pt;\\n  font-style: italic;\\n}\\n\\n.cost-section, .consumption-section, .production-section {\\n  border-top: 1px solid black;\\n  padding-top: 5px;\\n}\\n\\n.cost, .consumption, .production {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9vcHQvbGFtcHAvaHRkb2NzL2ltZy9zcGFjZS1pZGxlL3NyYy9hcHAvY29tcG9uZW50cy9nYW1lLXRvb2x0aXAvZ2FtZS10b29sdGlwLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9jb21wb25lbnRzL2dhbWUtdG9vbHRpcC9nYW1lLXRvb2x0aXAuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFBO0VBQ0EsaUJBQUE7RUFDQSx1QkFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0FDQ0Y7O0FERUE7RUFDRSxpQkFBQTtBQ0NGOztBREVBO0VBQ0UsZUFBQTtFQUNBLGtCQUFBO0VBQ0EsY0FBQTtFQUNBLGtCQUFBO0FDQ0Y7O0FERUE7RUFDRSwyQkFBQTtFQUNBLGdCQUFBO0FDQ0Y7O0FERUE7RUFDRSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSw4QkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9nYW1lLXRvb2x0aXAvZ2FtZS10b29sdGlwLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRhaW5lciB7XG4gIHBhZGRpbmc6IDVweDtcbiAgYmFja2dyb3VuZDogd2hpdGU7XG4gIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICBtYXJnaW46IDBweDtcbiAgd2lkdGg6IDE1MHB4O1xufVxuXG4ubmFtZSB7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuXG4uZGVzY3JpcHRpb24ge1xuICBtYXJnaW4tdG9wOiA1cHg7XG4gIG1hcmdpbi1ib3R0b206IDVweDtcbiAgZm9udC1zaXplOiA4cHQ7XG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcbn1cblxuLmNvc3Qtc2VjdGlvbiwgLmNvbnN1bXB0aW9uLXNlY3Rpb24sIC5wcm9kdWN0aW9uLXNlY3Rpb24ge1xuICBib3JkZXItdG9wOiAxcHggc29saWQgYmxhY2s7XG4gIHBhZGRpbmctdG9wOiA1cHg7XG59XG5cbi5jb3N0LCAuY29uc3VtcHRpb24sIC5wcm9kdWN0aW9uIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xufVxuXG4iLCIuY29udGFpbmVyIHtcbiAgcGFkZGluZzogNXB4O1xuICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gIG1hcmdpbjogMHB4O1xuICB3aWR0aDogMTUwcHg7XG59XG5cbi5uYW1lIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5kZXNjcmlwdGlvbiB7XG4gIG1hcmdpbi10b3A6IDVweDtcbiAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICBmb250LXNpemU6IDhwdDtcbiAgZm9udC1zdHlsZTogaXRhbGljO1xufVxuXG4uY29zdC1zZWN0aW9uLCAuY29uc3VtcHRpb24tc2VjdGlvbiwgLnByb2R1Y3Rpb24tc2VjdGlvbiB7XG4gIGJvcmRlci10b3A6IDFweCBzb2xpZCBibGFjaztcbiAgcGFkZGluZy10b3A6IDVweDtcbn1cblxuLmNvc3QsIC5jb25zdW1wdGlvbiwgLnByb2R1Y3Rpb24ge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG59Il19 */\"","import { Component, OnInit, Input } from '@angular/core';\nimport { TooltipViewModel } from 'src/app/models/tooltipViewModel';\nimport { ResourceCollection } from 'src/app/models/resource';\n\n@Component({\n  selector: 'app-game-tooltip',\n  templateUrl: './game-tooltip.component.html',\n  styleUrls: ['./game-tooltip.component.scss']\n})\nexport class GameTooltipComponent {\n\n  @Input() tooltipModel: TooltipViewModel;\n\n  constructor() {\n    this.tooltipModel = new TooltipViewModel();\n    this.tooltipModel.name = 'Default Name';\n    this.tooltipModel.desc = 'Lorem ipsum dolor sit amet.  Lorem ipsum dolor sit amet.';\n    this.tooltipModel.costs = new ResourceCollection();\n    this.tooltipModel.costs.add('metal', 21);\n    this.tooltipModel.costs.add('silicates', 52);\n  }\n\n}\n","export default \":host {\\n  display: block;\\n  flex-grow: 5;\\n  padding: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9vcHQvbGFtcHAvaHRkb2NzL2ltZy9zcGFjZS1pZGxlL3NyYy9hcHAvY29tcG9uZW50cy9wbGFuZXQtaW50ZXJhY3Rpb24vcGktY29tbWFuZC9waS1jb21tYW5kLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9jb21wb25lbnRzL3BsYW5ldC1pbnRlcmFjdGlvbi9waS1jb21tYW5kL3BpLWNvbW1hbmQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxjQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvcGxhbmV0LWludGVyYWN0aW9uL3BpLWNvbW1hbmQvcGktY29tbWFuZC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIGZsZXgtZ3JvdzogNTtcbiAgcGFkZGluZzogMjBweDtcbn1cbiIsIjpob3N0IHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIGZsZXgtZ3JvdzogNTtcbiAgcGFkZGluZzogMjBweDtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { PlanetService } from 'src/app/services/planet.service';\nimport { Planet } from 'src/app/models/planet';\nimport { PlanetInteractionModel } from 'src/app/models/planetInteractionModel';\nimport { FlagsService } from 'src/app/services/flags.service';\nimport { isNullOrUndefined } from 'util';\nimport { Resource, ResourceCollection } from 'src/app/models/resource';\nimport { ResourceService } from 'src/app/services/resource.service';\n\n@Component({\n  selector: 'app-pi-command',\n  templateUrl: './pi-command.component.html',\n  styleUrls: ['./pi-command.component.scss']\n})\nexport class PiCommandComponent implements OnInit {\n\n  currentDrones: number;\n  maxDrones: number;\n  idleDrones: number;\n  droneTasks: DroneTaskItem[] = [];\n  droneCost: ResourceCollection;\n\n  showBuildDrone: boolean;\n  showOutpostPanel: boolean;\n\n  outpostLevel: number;\n  outpostName: string;\n  outpostUpgradeVisible: boolean;\n  outpostUpgradeEnabled: boolean;\n  outpostUpgradeText: string;\n  outpostUpgradeCosts: ResourceCollection;\n\n  shipParts: ShipPart[] = [];\n  showLaunchBtn: boolean;\n  shipLaunched: boolean;\n\n  constructor(private planetService: PlanetService, private resourceService: ResourceService, private flagsService: FlagsService) {\n\n\n    this.initShip();\n  }\n\n  initShip() {\n    this.shipParts.push(new ShipPart('Superstructure', 'silksteel', 75));\n    this.shipParts.push(new ShipPart('Stardrive Module', 'hyperlattice', 50));\n    this.shipParts.push(new ShipPart('Navigation Computer', 'cogitex', 50));\n    this.shipParts.push(new ShipPart('Gravity Plating', 'gravalloy', 50));\n  }\n\n  ngOnInit() {\n    this.flagsService.onFlagsUpdated.subscribe(() => this.onFlagsUpdated());\n  }\n\n  getSelectedPlanet(): Planet {\n    return this.planetService.getSelectedPlanet();\n  }\n\n  getSelectedPlanetInteractionModel(): PlanetInteractionModel {\n    return this.planetService.getSelectedPlanetInteractionModel();\n  }\n\n  canAffordShipPart(part: ShipPart): boolean {\n    return this.resourceService.canAfford(part.cost);\n  }\n\n  canAffordDrone(): boolean {\n    return this.resourceService.canAfford(this.droneCost);\n  }\n\n  canAffordOutpostUpgrade(): boolean {\n    return this.resourceService.canAfford(this.outpostUpgradeCosts);\n  }\n\n\n  onFlagsUpdated(): void {\n    if (this.flagsService.showOutpostPanel) {this.showOutpostPanel = true; }\n  }\n\n  onBuildShipComponent(part: ShipPart): void {\n    part.built = this.resourceService.spend(part.cost);\n    if (this.shipParts.every(x => x.built)) {\n      this.showLaunchBtn = true;\n    }\n  }\n\n  onLaunchShip(): void {\n    this.shipLaunched = true;\n    this.showLaunchBtn = false;\n  }\n\n}\n\nclass DroneTaskItem {\n  constructor(public name: string) {\n    this.assigned = 0;\n    this.visible = false;\n  }\n  public assigned: number;\n  public visible: boolean;\n}\n\nclass ShipPart {\n  constructor(public name: string, resource: string, amount: number) {\n    this.cost = new ResourceCollection();\n    this.cost.add(resource, amount);\n    this.built = false;\n  }\n  public cost: ResourceCollection;\n  public built: boolean;\n}\n","export default \".structure-list {\\n  display: flex;\\n  flex-wrap: wrap;\\n}\\n\\n.structure-item {\\n  display: flex;\\n  min-width: 275px;\\n  flex-wrap: nowrap;\\n  margin: 0.3em;\\n}\\n\\n.item-build-btn {\\n  display: inline-block;\\n  width: 80%;\\n  line-height: 30px;\\n}\\n\\n.item-deactivate-btn, .item-activate-btn {\\n  display: inline-block;\\n  min-width: 40px;\\n  width: 5%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9vcHQvbGFtcHAvaHRkb2NzL2ltZy9zcGFjZS1pZGxlL3NyYy9hcHAvY29tcG9uZW50cy9wbGFuZXQtaW50ZXJhY3Rpb24vcGktc3RydWN0dXJlcy9waS1zdHJ1Y3R1cmVzLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9jb21wb25lbnRzL3BsYW5ldC1pbnRlcmFjdGlvbi9waS1zdHJ1Y3R1cmVzL3BpLXN0cnVjdHVyZXMuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFDRSxhQUFBO0VBQ0EsZUFBQTtBQ0FGOztBREdBO0VBQ0UsYUFBQTtFQUNBLGdCQUFBO0VBQ0EsaUJBQUE7RUFDQSxhQUFBO0FDQUY7O0FER0E7RUFDRSxxQkFBQTtFQUNBLFVBQUE7RUFDQSxpQkFBQTtBQ0FGOztBREdBO0VBQ0UscUJBQUE7RUFDQSxlQUFBO0VBQ0EsU0FBQTtBQ0FGIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9wbGFuZXQtaW50ZXJhY3Rpb24vcGktc3RydWN0dXJlcy9waS1zdHJ1Y3R1cmVzLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXG4uc3RydWN0dXJlLWxpc3R7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtd3JhcDogd3JhcDtcbn1cblxuLnN0cnVjdHVyZS1pdGVte1xuICBkaXNwbGF5OiBmbGV4O1xuICBtaW4td2lkdGg6IDI3NXB4O1xuICBmbGV4LXdyYXA6IG5vd3JhcDtcbiAgbWFyZ2luOiAwLjNlbTtcbn1cblxuLml0ZW0tYnVpbGQtYnRue1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHdpZHRoOiA4MCU7XG4gIGxpbmUtaGVpZ2h0OiAzMHB4O1xufVxuXG4uaXRlbS1kZWFjdGl2YXRlLWJ0biwgLml0ZW0tYWN0aXZhdGUtYnRuIHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBtaW4td2lkdGg6IDQwcHg7XG4gIHdpZHRoOiA1JTtcbn1cblxuXG4iLCIuc3RydWN0dXJlLWxpc3Qge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LXdyYXA6IHdyYXA7XG59XG5cbi5zdHJ1Y3R1cmUtaXRlbSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIG1pbi13aWR0aDogMjc1cHg7XG4gIGZsZXgtd3JhcDogbm93cmFwO1xuICBtYXJnaW46IDAuM2VtO1xufVxuXG4uaXRlbS1idWlsZC1idG4ge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHdpZHRoOiA4MCU7XG4gIGxpbmUtaGVpZ2h0OiAzMHB4O1xufVxuXG4uaXRlbS1kZWFjdGl2YXRlLWJ0biwgLml0ZW0tYWN0aXZhdGUtYnRuIHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBtaW4td2lkdGg6IDQwcHg7XG4gIHdpZHRoOiA1JTtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { PlanetService } from '../../../services/planet.service';\nimport { Planet } from '../../../models/planet';\nimport { PlanetInteractionModel } from '../../../models/planetInteractionModel';\nimport { STRUCTURE_LIBRARY } from '../../../staticData/structureDefinitions';\nimport { isNullOrUndefined } from 'util';\nimport { Resource, ResourceCollection } from '../../../models/resource';\nimport { ResearchService } from 'src/app/services/research.service';\nimport { ResourceService } from 'src/app/services/resource.service';\nimport { TooltipViewModel } from 'src/app/models/tooltipViewModel';\n\n@Component({\n  selector: 'app-pi-structures',\n  templateUrl: './pi-structures.component.html',\n  styleUrls: ['./pi-structures.component.scss']\n})\nexport class PiStructuresComponent implements OnInit {\n\n  showBuildList = true;\n  outpostBuildItem: BuildingListItem = new BuildingListItem();\n  buildingList: BuildingListItem[] = [];\n\n  constructor(private planetService: PlanetService, private researchService: ResearchService, private resourceService: ResourceService) {\n    this.planetService.selectedPlanetChanged.subscribe(x => this.updateBuildingList());\n  }\n\n  ngOnInit() {\n    this.updateBuildingList();\n  }\n\n  canBuild(building: BuildingListItem): boolean {\n    return this.resourceService.canAfford(building.costs);\n  }\n\n  getSelectedPlanet(): Planet {\n    return this.planetService.getSelectedPlanet();\n  }\n\n  getSelectedPlanetInteractionModel(): PlanetInteractionModel {\n    return this.planetService.getSelectedPlanetInteractionModel();\n  }\n\n  getFilteredBuildingList(filter: string): BuildingListItem[] {\n    this.updateBuildingList();\n    const results = this.buildingList.filter(value => filter === 'all' || value.sortCategory === filter);\n    return results;\n  }\n\n  updateBuildingList(): void {\n    const newBuildingList: BuildingListItem[] = [];\n    const interactionModel = this.getSelectedPlanetInteractionModel();\n    if (interactionModel == null) {\n      this.buildingList = newBuildingList;\n      return;\n    }\n\n    let dirtyList = false;\n    interactionModel.structures.forEach(element => {\n      const structureDef = STRUCTURE_LIBRARY.find(x => x.name === element.name);\n      const visible = this.researchService.areUpgradesCompleted(structureDef.prereqs);\n      let listItem = this.buildingList.find(x => x.name === element.name);\n      const cost = this.planetService.getNextStructureCost(element.name);\n      const canActivate = this.planetService.canActivateStructure(element.name);\n\n      if (!isNullOrUndefined(listItem)) {\n        listItem.canActivate = canActivate;\n        listItem.builtNumber = element.amount;\n        listItem.activeNumber = element.active;\n        listItem.visible = visible;\n        listItem.costs = cost;\n        this.updateTooltip(listItem);\n      } else if (visible) {\n        dirtyList = true;\n      }\n      if (true) {\n        listItem = {\n          name: element.name,\n          sortCategory: structureDef.sortCategory,\n          costs: cost,\n          production: structureDef.getProductionRates(),\n          consumption: structureDef.getConsumptionRates(),\n          builtNumber: element.amount,\n          activeNumber: element.active,\n          showActivateControls: structureDef.hasConsumption(),\n          canActivate: canActivate,\n          visible: visible,\n          tooltip: null\n        };\n        this.updateTooltip(listItem);\n        if (listItem.visible) {\n          newBuildingList.push(listItem);\n        }\n      }\n    });\n\n    if (dirtyList) {\n      this.buildingList = newBuildingList;\n    }\n\n  }\n\n  getButtonName(building: BuildingListItem): string {\n    let buttonName = building.name;\n    if (building.activeNumber > 0) {\n      buttonName = building.name + ' (' + building.activeNumber + ')';\n    }\n    if (building.builtNumber > building.activeNumber) {\n      buttonName = building.name + ' (' + building.activeNumber + '/' + building.builtNumber + ')';\n    }\n    return buttonName;\n  }\n\n  updateTooltip(building: BuildingListItem) {\n    if (building.tooltip == null) {building.tooltip = new TooltipViewModel();}\n    building.tooltip.name = building.name;\n    building.tooltip.desc = '';\n    building.tooltip.costs = building.costs;\n    building.tooltip.consumption = building.consumption;\n    building.tooltip.production = building.production;\n  }\n\n  onBuildItemClicked(buildItemName: string) {\n    this.planetService.buildStructure(this.planetService.getSelectedPlanet().instanceId, buildItemName);\n    this.updateBuildingList();\n  }\n\n  onActivateItemClicked(buildItemName: string) {\n    const building = this.buildingList.find(x => x.name === buildItemName);\n    this.planetService.setStructureActiveAmount(\n      this.planetService.getSelectedPlanet().instanceId, buildItemName, building.activeNumber + 1);\n    this.updateBuildingList();\n  }\n\n  onDeactivateItemClicked(buildItemName: string) {\n    const building = this.buildingList.find(x => x.name === buildItemName);\n    this.planetService.setStructureActiveAmount(\n      this.planetService.getSelectedPlanet().instanceId, buildItemName, building.activeNumber - 1);\n    this.updateBuildingList();\n  }\n\n  private hasOutpost(interactionModel: PlanetInteractionModel): boolean {\n    // TODO: Could this work just by seeing if any structures are present?\n    return interactionModel.structures.some(structure =>\n      structure.amount > 0 &&\n      this.planetService.getStructureDefinition(structure.name).sortCategory === 'outpost'\n    );\n  }\n\n}\n\nclass BuildingListItem {\n  public name: string;\n  public sortCategory: string;\n  public costs: ResourceCollection;\n  public production: ResourceCollection;\n  public consumption: ResourceCollection;\n  public builtNumber: number;\n  public activeNumber: number;\n  public showActivateControls: boolean;\n  public canActivate: boolean;\n  public visible: boolean;\n  public tooltip: TooltipViewModel;\n}\n","export default \".region {\\n  margin-top: 12px;\\n  margin-bottom: 1.5em;\\n}\\n\\n.region-left-col {\\n  padding-left: 5px;\\n  padding-bottom: 5px;\\n  min-width: 100px;\\n}\\n\\n.region-title {\\n  width: 140px;\\n  font-weight: bold;\\n}\\n\\n.region-drone-count {\\n  font-size: 14px;\\n  margin: 2pt;\\n}\\n\\n.region-survey-btn {\\n  min-width: 100px;\\n  margin-top: 0.5em;\\n}\\n\\n.region-survey-progress {\\n  margin-top: 0.2em;\\n  margin-left: 0.5em;\\n}\\n\\n.feature-list {\\n  flex: 1;\\n  margin-left: 1.5em;\\n}\\n\\n.feature-active {\\n  flex: 1;\\n}\\n\\n.feature-left-col {\\n  padding-left: 5px;\\n}\\n\\n.feature-name {\\n  width: 125px;\\n  padding-top: 0.8em;\\n  font-weight: bold;\\n}\\n\\n.feature-drone-count {\\n  font-size: 14px;\\n  margin: 2pt;\\n}\\n\\n.feature-drone-decrement, .feature-drone-increment {\\n  font-weight: bold;\\n  font-size: 16pt;\\n  text-decoration: underline;\\n  line-height: 0.8em;\\n  cursor: pointer;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n}\\n\\n.feature-buttons {\\n  width: 100%;\\n}\\n\\n.ability {\\n  display: inline-block;\\n  width: 175px;\\n}\\n\\n.task {\\n  display: inline-block;\\n  width: 175px;\\n}\\n\\n.hidden {\\n  visibility: hidden;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9vcHQvbGFtcHAvaHRkb2NzL2ltZy9zcGFjZS1pZGxlL3NyYy9hcHAvY29tcG9uZW50cy9wbGFuZXQtaW50ZXJhY3Rpb24vcGktdGVycmFpbi9waS10ZXJyYWluLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9jb21wb25lbnRzL3BsYW5ldC1pbnRlcmFjdGlvbi9waS10ZXJyYWluL3BpLXRlcnJhaW4uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxnQkFBQTtFQUNBLG9CQUFBO0FDQ0Y7O0FERUE7RUFDRSxpQkFBQTtFQUNBLG1CQUFBO0VBQ0EsZ0JBQUE7QUNDRjs7QURFQTtFQUNFLFlBQUE7RUFDQSxpQkFBQTtBQ0NGOztBREVBO0VBQ0UsZUFBQTtFQUNBLFdBQUE7QUNDRjs7QURFQTtFQUNFLGdCQUFBO0VBQ0EsaUJBQUE7QUNDRjs7QURFQTtFQUNFLGlCQUFBO0VBQ0Esa0JBQUE7QUNDRjs7QURFQTtFQUNFLE9BQUE7RUFDQSxrQkFBQTtBQ0NGOztBREVBO0VBQ0UsT0FBQTtBQ0NGOztBREVBO0VBQ0UsaUJBQUE7QUNDRjs7QURFQTtFQUNFLFlBQUE7RUFDQSxrQkFBQTtFQUNBLGlCQUFBO0FDQ0Y7O0FERUE7RUFDRSxlQUFBO0VBQ0EsV0FBQTtBQ0NGOztBREVBO0VBQ0UsaUJBQUE7RUFDQSxlQUFBO0VBQ0EsMEJBQUE7RUFDQSxrQkFBQTtFQUNBLGVBQUE7RUFDQSx5QkFBQTtLQUFBLHNCQUFBO01BQUEscUJBQUE7VUFBQSxpQkFBQTtBQ0NGOztBREVBO0VBQ0UsV0FBQTtBQ0NGOztBREVBO0VBQ0UscUJBQUE7RUFDQSxZQUFBO0FDQ0Y7O0FERUE7RUFDRSxxQkFBQTtFQUNBLFlBQUE7QUNDRjs7QURFQTtFQUNFLGtCQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnRzL3BsYW5ldC1pbnRlcmFjdGlvbi9waS10ZXJyYWluL3BpLXRlcnJhaW4uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIucmVnaW9ue1xuICBtYXJnaW4tdG9wOiAxMnB4O1xuICBtYXJnaW4tYm90dG9tOiAxLjVlbTtcbn1cblxuLnJlZ2lvbi1sZWZ0LWNvbCB7XG4gIHBhZGRpbmctbGVmdDogNXB4O1xuICBwYWRkaW5nLWJvdHRvbTogNXB4O1xuICBtaW4td2lkdGg6IDEwMHB4O1xufVxuXG4ucmVnaW9uLXRpdGxlIHtcbiAgd2lkdGg6IDE0MHB4O1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuLnJlZ2lvbi1kcm9uZS1jb3VudCB7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgbWFyZ2luOiAycHQ7XG59XG5cbi5yZWdpb24tc3VydmV5LWJ0biB7XG4gIG1pbi13aWR0aDogMTAwcHg7XG4gIG1hcmdpbi10b3A6IDAuNWVtO1xufVxuXG4ucmVnaW9uLXN1cnZleS1wcm9ncmVzcyB7XG4gIG1hcmdpbi10b3A6IDAuMmVtO1xuICBtYXJnaW4tbGVmdDogMC41ZW07XG59XG5cbi5mZWF0dXJlLWxpc3R7XG4gIGZsZXg6IDE7XG4gIG1hcmdpbi1sZWZ0OiAxLjVlbTtcbn1cblxuLmZlYXR1cmUtYWN0aXZlIHtcbiAgZmxleDogMTtcbn1cblxuLmZlYXR1cmUtbGVmdC1jb2wge1xuICBwYWRkaW5nLWxlZnQ6IDVweDtcbn1cblxuLmZlYXR1cmUtbmFtZSB7XG4gIHdpZHRoOiAxMjVweDtcbiAgcGFkZGluZy10b3A6IDAuOGVtO1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuLmZlYXR1cmUtZHJvbmUtY291bnQge1xuICBmb250LXNpemU6IDE0cHg7XG4gIG1hcmdpbjogMnB0O1xufVxuXG4uZmVhdHVyZS1kcm9uZS1kZWNyZW1lbnQsIC5mZWF0dXJlLWRyb25lLWluY3JlbWVudCB7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBmb250LXNpemU6IDE2cHQ7XG4gIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xuICBsaW5lLWhlaWdodDogMC44ZW07XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG59XG5cbi5mZWF0dXJlLWJ1dHRvbnMge1xuICB3aWR0aDogMTAwJTtcbn1cblxuLmFiaWxpdHkge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHdpZHRoOiAxNzVweDtcbn1cblxuLnRhc2sge1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHdpZHRoOiAxNzVweDtcbn1cblxuLmhpZGRlbiB7XG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcbn1cbiIsIi5yZWdpb24ge1xuICBtYXJnaW4tdG9wOiAxMnB4O1xuICBtYXJnaW4tYm90dG9tOiAxLjVlbTtcbn1cblxuLnJlZ2lvbi1sZWZ0LWNvbCB7XG4gIHBhZGRpbmctbGVmdDogNXB4O1xuICBwYWRkaW5nLWJvdHRvbTogNXB4O1xuICBtaW4td2lkdGg6IDEwMHB4O1xufVxuXG4ucmVnaW9uLXRpdGxlIHtcbiAgd2lkdGg6IDE0MHB4O1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuLnJlZ2lvbi1kcm9uZS1jb3VudCB7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgbWFyZ2luOiAycHQ7XG59XG5cbi5yZWdpb24tc3VydmV5LWJ0biB7XG4gIG1pbi13aWR0aDogMTAwcHg7XG4gIG1hcmdpbi10b3A6IDAuNWVtO1xufVxuXG4ucmVnaW9uLXN1cnZleS1wcm9ncmVzcyB7XG4gIG1hcmdpbi10b3A6IDAuMmVtO1xuICBtYXJnaW4tbGVmdDogMC41ZW07XG59XG5cbi5mZWF0dXJlLWxpc3Qge1xuICBmbGV4OiAxO1xuICBtYXJnaW4tbGVmdDogMS41ZW07XG59XG5cbi5mZWF0dXJlLWFjdGl2ZSB7XG4gIGZsZXg6IDE7XG59XG5cbi5mZWF0dXJlLWxlZnQtY29sIHtcbiAgcGFkZGluZy1sZWZ0OiA1cHg7XG59XG5cbi5mZWF0dXJlLW5hbWUge1xuICB3aWR0aDogMTI1cHg7XG4gIHBhZGRpbmctdG9wOiAwLjhlbTtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5mZWF0dXJlLWRyb25lLWNvdW50IHtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBtYXJnaW46IDJwdDtcbn1cblxuLmZlYXR1cmUtZHJvbmUtZGVjcmVtZW50LCAuZmVhdHVyZS1kcm9uZS1pbmNyZW1lbnQge1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgZm9udC1zaXplOiAxNnB0O1xuICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgbGluZS1oZWlnaHQ6IDAuOGVtO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHVzZXItc2VsZWN0OiBub25lO1xufVxuXG4uZmVhdHVyZS1idXR0b25zIHtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5hYmlsaXR5IHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICB3aWR0aDogMTc1cHg7XG59XG5cbi50YXNrIHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICB3aWR0aDogMTc1cHg7XG59XG5cbi5oaWRkZW4ge1xuICB2aXNpYmlsaXR5OiBoaWRkZW47XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { PlanetService } from '../../../services/planet.service';\nimport { Planet, Region, Feature } from '../../../models/planet';\nimport { Resource, ResourceCollection } from '../../../models/resource';\nimport { ResearchService } from 'src/app/services/research.service';\nimport { ResourceService } from 'src/app/services/resource.service';\nimport { RegionInteraction, FeatureInteraction } from 'src/app/models/planetInteractionModel';\nimport { FeatureAction } from 'src/app/staticData/actionDefinitions';\nimport { ActionService } from 'src/app/services/action.service';\nimport { FlagsService } from 'src/app/services/flags.service';\nimport { TaskService } from 'src/app/services/task.service';\nimport { TaskDefinition } from 'src/app/staticData/taskDefinitions';\nimport { FeatureTask } from 'src/app/models/task';\nimport { AbilityDefinition } from 'src/app/staticData/abilityDefinitions';\nimport { TooltipViewModel } from 'src/app/models/tooltipViewModel';\n\n@Component({\n  selector: 'app-pi-terrain',\n  templateUrl: './pi-terrain.component.html',\n  styleUrls: ['./pi-terrain.component.scss']\n})\nexport class PiTerrainComponent implements OnInit {\n\n  constructor(private actionService: ActionService, private planetService: PlanetService,\n              private researchService: ResearchService, private resourceService: ResourceService,\n              private flagService: FlagsService, private taskService: TaskService) {\n    this.planetService.selectedPlanetChanged.subscribe(x => this.updateRegionList());\n    this.planetService.regionChanged.subscribe(x => this.updateRegionList());\n    this.researchService.onResearchUpdated.subscribe(x => this.updateRegionList());\n  }\n\n  public regionList: RegionListItem[] = [];\n\n  ngOnInit() {\n    this.updateRegionList();\n  }\n\n  getSelectedPlanet(): Planet {\n    return this.planetService.getSelectedPlanet();\n  }\n\n  getSurveyProgress(regionId: number): number {\n    return this.planetService.getSurveyProgress(regionId);\n  }\n\n  getSurveyProgressNeeded(regionId: number): number {\n    return this.planetService.getSurveyProgressNeeded(regionId);\n  }\n\n  taskIsVisible(taskItem: TaskItem): boolean {\n    if (!taskItem.def.repeatable && taskItem.instance != null && taskItem.instance.progress >= taskItem.instance.needed) {return false;}\n    return true;\n  }\n\n  getSurveyLevelText(region: RegionListItem): string {\n    if (region.surveyLevel > 0) {return 'Survey Lv ' + region.surveyLevel};\n    if (this.upgradeRequiredForSurvey(region)) {return 'Upgrade Required';}\n    return 'Unsurveyed';\n  }\n\n  getSurveyButtonName(region: RegionListItem): string {\n    if (!this.flagService.check('surveyRepaired')) {return 'Drone Survey';}\n    if (this.isSurveyRunning(region)) {return 'Surveying';}\n    return 'Survey Scan';\n  }\n\n  survey(region: RegionListItem) {\n    if (this.isSurveyRunning(region)) {return;}\n    if (!this.canAffordSurvey(region)) {return;}\n    const useSurveyTask = this.flagService.check('surveyRepaired');\n    if (useSurveyTask) {\n      this.taskService.beginSurvey(this.getSelectedPlanet().instanceId, region.id);\n    }\n    else {\n      this.resourceService.spend(new Resource('drones', 1));\n      this.planetService.surveyRegion(10, region.id);\n    }\n\n    this.updateRegionList();\n  }\n\n  isSurveyRunning(region: RegionListItem): boolean {\n    return this.taskService.isSurveyRunning(this.getSelectedPlanet().instanceId, region.id);\n  }\n\n  canAffordSurvey(region: RegionListItem): boolean {\n    if (this.flagService.check('surveyRepaired')) {return true;}\n    const drones = this.resourceService.get('drones');\n    const assigned = this.planetService.getPlanetInteractionModel().regions.getTotalAssignedDrones();\n    return assigned < drones;\n  }\n\n  upgradeRequiredForSurvey(region: RegionListItem): boolean {\n    const def = this.planetService.getRegionDefinition(region.name);\n    if (def.surveyUpgradeNeeded === '') {return false;}\n    if (this.researchService.isUpgradeCompleted(def.surveyUpgradeNeeded)) {return false;}\n    return true;\n  }\n\n  surveyTooltip(region: RegionListItem): TooltipViewModel {\n    const tooltip = new TooltipViewModel();\n    if (!this.flagService.check('surveyRepaired'))\n    {\n      tooltip.name = \"Drone Survey\";\n      tooltip.desc = \"Send a drone to survey the region. The drone will not survive.\";\n      tooltip.costs = new ResourceCollection();\n      tooltip.costs.add('drones', 1);\n    }\n    else\n    {\n      tooltip.name = \"Survey Scan\";\n    }\n    return tooltip;\n  }\n\n  buyDroneHub(region: RegionListItem) {\n    this.planetService.buildDroneHub(region.id);\n    this.updateRegionList();\n  }\n\n  canAffordDroneHub(region: RegionListItem): boolean {\n    return this.resourceService.canAfford(region.droneHubCost); // TODO\n  }\n\n  droneHubTooltip(region: RegionListItem): TooltipViewModel {\n    const tooltip = new TooltipViewModel();\n    tooltip.name = \"Drone Hub\";\n    //tooltip.desc = upg.description;\n    tooltip.costs = region.droneHubCost;\n    return tooltip;\n  }\n\n  showDroneHubButton(region: RegionListItem): boolean {\n    if (region.surveyLevel <= 0) {return false;}\n    return this.flagService.check('droneRelayRepaired');\n  }\n\n  showDroneCounts(region: RegionListItem): boolean {\n    if (region.dronesAssigned > 0) {return true;}\n    if (region.droneSlots > 1) {return true;}\n    return false;\n  }\n\n  showDroneControl(feature: FeatureListItem): boolean {\n    return feature.region.droneSlots > 0 && feature.droneSlots > 0;\n  }\n\n  assignDrone(feature: FeatureListItem) {\n    this.planetService.assignDrone(feature.featureInstance);\n  }\n\n  unassignDrone(feature: FeatureListItem) {\n    this.planetService.unassignDrone(feature.featureInstance);\n  }\n\n  canAssignDrone(region: RegionListItem, feature: FeatureListItem) {\n    return feature.dronesAssigned < feature.droneSlots &&\n    region.dronesAssigned < region.droneSlots &&\n    this.planetService.getIdleDrones() > 0;\n  }\n\n  canUnassignDrone(region: RegionListItem, feature: FeatureListItem) {\n    return feature.dronesAssigned > 0;\n  }\n\n  updateRegionList() {\n    this.regionList = [];\n    const regions = this.getSelectedPlanet().regions;\n    const regionInteractions = this.planetService.getPlanetInteractionModel().regions;\n    regions.forEach(regionModel => {\n      if (this.planetService.isRegionVisible(regionModel.instanceId)) {\n        const regionInteraction = regionInteractions.getRegion(regionModel.instanceId);\n        this.regionList.push(this.createRegionListItem(regionModel, regionInteraction));\n      }\n    });\n  }\n\n  private createRegionListItem(region: Region, regionInteraction: RegionInteraction): RegionListItem {\n    const def = this.planetService.getRegionDefinition(region.name);\n    const item = new RegionListItem();\n    item.name = region.name;\n    item.id = region.instanceId;\n    item.outpostLevel = regionInteraction.outpostLevel;\n    item.surveyLevel = regionInteraction.surveyLevel;\n    item.surveyProgress = regionInteraction.surveyProgress;\n    item.droneSlots = regionInteraction.droneSlots;\n    item.dronesAssigned = regionInteraction.assignedDrones;\n    item.canGather = item.outpostLevel > 0;\n    item.droneHubCost = this.planetService.getDroneHubCost(region.instanceId);\n    item.tooltip = new TooltipViewModel();\n    item.tooltip.name = region.name;\n    item.tooltip.desc = def.description;\n\n    // Get all hidden features, and find the lowest survey required one,\n    // So we know which level to cut off hints at\n    let hintLevel = 0;\n    const hiddenFeatures = region.features.filter(x => x.hiddenBehindSurvey > item.surveyLevel);\n    if (hiddenFeatures.length > 0) {\n      hintLevel = Math.min(...hiddenFeatures.map(x => x.hiddenBehindSurvey));\n    }\n\n    region.features.forEach(f => {\n      const featureInteraction = regionInteraction.getFeature(f.instanceId);\n      item.features.push(this.createFeatureListItem(item, f, featureInteraction, item.outpostLevel, item.surveyLevel, hintLevel));\n    });\n    return item;\n  }\n\n  private createFeatureListItem(regionItem: RegionListItem, feature: Feature, featureInteraction: FeatureInteraction, outpostLevel: number, surveyLevel: number, hintLevel: number): FeatureListItem {\n    const featureDef = this.planetService.getFeatureDefinition(feature.name);\n    const item = new FeatureListItem();\n    item.region = regionItem;\n    item.featureInstance = feature;\n    item.name = feature.name;\n    item.id = feature.instanceId;\n    item.surveyNeeded = feature.hiddenBehindSurvey;\n    item.canGather = outpostLevel === 0;\n    item.active = item.surveyNeeded <= surveyLevel;\n    item.droneSlots = featureDef.droneSlots;\n    item.dronesAssigned = featureInteraction.assignedDrones;\n    item.hintActive = item.surveyNeeded > surveyLevel && item.surveyNeeded <= hintLevel;\n    item.tooltip = new TooltipViewModel();\n    if (item.active) {\n      item.tooltip.name = item.name;\n      item.tooltip.desc = featureDef.description;\n    }\n    else {\n      item.tooltip.desc = 'Survey the region to discover this feature.';\n    }\n    featureDef.abilities.forEach((a, i) => {\n      if (a.visibleUpgrade != '' && !this.researchService.isUpgradeCompleted(a.visibleUpgrade)) {return;}\n      const ability = new AbilityItem();\n      ability.def = a;\n      ability.name = a.name;\n      ability.index = i;\n      ability.canActivate = true;\n      item.abilities.push(ability);\n    });\n    this.populateFeatureTasks(regionItem.id, item);\n\n    return item;\n  }\n\n  private updateFeatureListItem(planetId: number, regionId: number, featureId: number) {\n    if (planetId != this.getSelectedPlanet().instanceId) {return;}\n    const regionItem = this.regionList.find(x => x.id === regionId);\n    if (regionItem == null) {return;}\n    const featureItem = regionItem.features.find(x => x.id === featureId);\n    if (featureItem == null) {\n      return; //TODO: Create feature list item\n    }\n    this.populateFeatureTasks(regionId, featureItem);\n  }\n\n  private populateFeatureTasks(regionId: number, featureItem: FeatureListItem) {\n    featureItem.tasks = [];\n    const featureDef = this.planetService.getFeatureDefinition(featureItem.name);\n    const featureInstance = this.planetService.getFeature(regionId, featureItem.id);\n    const featureInteraction = this.planetService.getPlanetInteractionModel()\n                                .regions.getFeature(regionId, featureItem.id);\n    featureDef.tasks.forEach(tDef => {\n      const instance = featureInteraction.tasks.find(x => x.definition === tDef);\n      if (instance != null && instance.progress >= instance.needed && !tDef.repeatable) {return;}\n      const taskItem = new TaskItem();\n      taskItem.regionId = regionId;\n      taskItem.featureId = featureItem.id;\n      taskItem.def = tDef;\n      taskItem.instance = instance;\n      taskItem.index = featureItem.tasks.length;\n      featureItem.tasks.push(taskItem);\n    });\n  }\n}\n\nexport class RegionListItem {\n  public name: string;\n  public id: number;\n  public outpostLevel: number;\n  public surveyLevel: number;\n  public surveyProgress: number;\n  public dronesAssigned: number;\n  public droneSlots: number;\n  public droneHubCost: ResourceCollection;\n  public features: FeatureListItem[] = [];\n  public canGather = false;\n  public tooltip: TooltipViewModel;\n}\n\nexport class FeatureListItem {\n  public region: RegionListItem;\n  public featureInstance: Feature;\n  public name: string;\n  public id: number;\n  public surveyNeeded: number;\n  public active: boolean;\n  public hintActive: boolean;\n  public dronesAssigned: number;\n  public droneSlots: number;\n  public canGather: boolean;\n  public abilities: AbilityItem[] = [];\n  public tasks: TaskItem[] = [];\n  public tooltip: TooltipViewModel;\n}\n\nexport class AbilityItem {\n  public def: AbilityDefinition;\n  public name: string;\n  public index: number;\n  public canActivate: boolean;\n}\n\nexport class TaskItem {\n  public regionId: number;\n  public featureId: number;\n  public def: TaskDefinition;\n  public instance: FeatureTask;\n  public index: number;\n\n  public progress(): number {\n    if (this.instance != null) {return this.instance.progress;}\n    return 0;\n  }\n}\n\nexport class RegionDetailsViewModel {\n  public name = '';\n  public description = '';\n  public currentProduction: ResourceCollection = new ResourceCollection();\n}\n","export default \".planet-header {\\n  padding-top: 0.5em;\\n  padding-left: 1em;\\n  min-height: 2em;\\n  border-bottom: 1px solid gray;\\n  font-weight: bold;\\n}\\n\\n.mat-tab-body-wrapper {\\n  flex-grow: 1;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9vcHQvbGFtcHAvaHRkb2NzL2ltZy9zcGFjZS1pZGxlL3NyYy9hcHAvY29tcG9uZW50cy9wbGFuZXQtaW50ZXJhY3Rpb24vcGxhbmV0LWludGVyYWN0aW9uLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9jb21wb25lbnRzL3BsYW5ldC1pbnRlcmFjdGlvbi9wbGFuZXQtaW50ZXJhY3Rpb24uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQkFBQTtFQUNBLGlCQUFBO0VBQ0EsZUFBQTtFQUNBLDZCQUFBO0VBQ0EsaUJBQUE7QUNDRjs7QURFQTtFQUNFLFlBQUE7QUNDRiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvcGxhbmV0LWludGVyYWN0aW9uL3BsYW5ldC1pbnRlcmFjdGlvbi5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5wbGFuZXQtaGVhZGVye1xuICBwYWRkaW5nLXRvcDogMC41ZW07XG4gIHBhZGRpbmctbGVmdDogMWVtO1xuICBtaW4taGVpZ2h0OiAyZW07XG4gIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBncmF5O1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuLm1hdC10YWItYm9keS13cmFwcGVye1xuICBmbGV4LWdyb3c6IDE7XG59XG4iLCIucGxhbmV0LWhlYWRlciB7XG4gIHBhZGRpbmctdG9wOiAwLjVlbTtcbiAgcGFkZGluZy1sZWZ0OiAxZW07XG4gIG1pbi1oZWlnaHQ6IDJlbTtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIGdyYXk7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuXG4ubWF0LXRhYi1ib2R5LXdyYXBwZXIge1xuICBmbGV4LWdyb3c6IDE7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { FlagsService } from '../../services/flags.service';\nimport { ResourceService } from 'src/app/services/resource.service';\nimport { PlanetService } from 'src/app/services/planet.service';\n\n@Component({\n  selector: 'app-planet-interaction',\n  templateUrl: './planet-interaction.component.html',\n  styleUrls: ['./planet-interaction.component.scss']\n})\nexport class PlanetInteractionComponent implements OnInit {\n\n  public showStructures = false;\n  public showResearch = false;\n\n  constructor(private planetService: PlanetService, private resourceService: ResourceService, private flagsService: FlagsService) { }\n\n  ngOnInit() {\n    this.flagsService.onFlagsUpdated.subscribe(() => this.updateTabVisibility());\n    this.updateTabVisibility();\n  }\n\n  updateTabVisibility() {\n    this.showStructures = this.flagsService.check('showStructureTab');\n    this.showResearch = this.flagsService.check('showResearchTab');\n  }\n\n  droneCount(): number {\n    return this.resourceService.get('drones');\n  }\n\n  droneCap(): number {\n    return this.resourceService.getMax('drones');\n  }\n\n  dronesIdle(): number {\n    const interaction = this.planetService.getPlanetInteractionModel();\n    return this.droneCount() - interaction.regions.getTotalAssignedDrones();\n  }\n\n  powerUsed(): number {\n    const interaction = this.planetService.getPlanetInteractionModel();\n    return interaction.localResources.getConsumption('power');\n  }\n\n  powerAvailable(): number {\n    const interaction = this.planetService.getPlanetInteractionModel();\n    return interaction.localResources.getProduction('power');\n  }\n}\n","export default \"ul {\\n  margin: 0px;\\n  padding: 0px;\\n  list-style-type: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9vcHQvbGFtcHAvaHRkb2NzL2ltZy9zcGFjZS1pZGxlL3NyYy9hcHAvY29tcG9uZW50cy9yZXNvdXJjZS1vdmVydmlldy9yZXNvdXJjZS1vdmVydmlldy5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvY29tcG9uZW50cy9yZXNvdXJjZS1vdmVydmlldy9yZXNvdXJjZS1vdmVydmlldy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0EscUJBQUE7QUNIRiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvcmVzb3VyY2Utb3ZlcnZpZXcvcmVzb3VyY2Utb3ZlcnZpZXcuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdHtcblxufVxuXG51bCB7XG4gIG1hcmdpbjogMHB4O1xuICBwYWRkaW5nOiAwcHg7XG4gIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTtcbn1cbiIsInVsIHtcbiAgbWFyZ2luOiAwcHg7XG4gIHBhZGRpbmc6IDBweDtcbiAgbGlzdC1zdHlsZS10eXBlOiBub25lO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { ResourceService } from '../../services/resource.service';\nimport { PlanetService } from '../../services/planet.service';\nimport { isNullOrUndefined } from 'util';\n\n@Component({\n  selector: 'app-resource-overview',\n  templateUrl: './resource-overview.component.html',\n  styleUrls: ['./resource-overview.component.scss']\n})\nexport class ResourceOverviewComponent implements OnInit {\n\n  resourceList: ResourceListItem[] = [];\n\n  constructor(private resourceService: ResourceService, private planetService: PlanetService) { }\n\n  ngOnInit() {\n  }\n\n  getPower(rateSource: string = 'localRates'): ResourceListItem {\n    const globalResources = this.resourceService.globalResources;\n    let localResources = null;\n    const localInteractionModel = this.planetService.getSelectedPlanetInteractionModel();\n    if (!isNullOrUndefined(localInteractionModel)) {localResources = localInteractionModel.localResources; }\n    let resource = globalResources.resources.find(x => x.resource === 'power');\n    if (rateSource === 'localRates' && !isNullOrUndefined(localResources)) {\n      resource = localResources.resources.find(x => x.resource === 'power');\n    }\n    const item = new ResourceListItem();\n    if (!isNullOrUndefined(resource)) {\n      item.production = resource.productionRate;\n      item.consumption = resource.consumptionRate;\n    }\n    return item;\n  }\n\n  getResourceList(rateSource: string): ResourceListItem[] {\n    const globalResources = this.resourceService.globalResources;\n    let localResources = null;\n    const localInteractionModel = this.planetService.getSelectedPlanetInteractionModel();\n    if (!isNullOrUndefined(localInteractionModel)) {localResources = localInteractionModel.localResources; }\n\n    globalResources.resources.forEach(element => {\n      if (element.resource === 'power') {return;}\n      if (element.resource === 'drones') {return;}\n      if (element.resource === 'energy') {return;}\n      if (!this.resourceService.isDiscovered(element.resource)) {return; }\n      let rate: number = element.getNetProductionRate();\n      if (rateSource === 'localRates' && !isNullOrUndefined(localResources)) {\n        rate = 0;\n        const localResource = localResources.resources.find(x => x.resource === element.resource);\n        if (!isNullOrUndefined(localResource)) {rate = localResource.getNetProductionRate(); }\n      }\n      let item: ResourceListItem = this.resourceList.find(x => x.name === element.resource);\n      if (isNullOrUndefined(item)) {\n        item = new ResourceListItem();\n        this.resourceList.push(item);\n      }\n      item.name = element.resource;\n      item.amount = element.amount;\n      item.maxAmount = element.max;\n      item.rate = rate;\n    });\n\n    return this.resourceList;\n  }\n\n}\n\nexport class ResourceListItem {\n  public name: string;\n  public amount: number;\n  public maxAmount: number;\n  public rate: number;\n  public production: number;\n  public consumption: number;\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvc2hpcC1pbnRlcmFjdGlvbi9zaGlwLWludGVyYWN0aW9uLmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { Resource } from '../../models/resource';\nimport { ResearchService } from '../../services/research.service';\n\n@Component({\n  selector: 'app-ship-interaction',\n  templateUrl: './ship-interaction.component.html',\n  styleUrls: ['./ship-interaction.component.scss']\n})\nexport class ShipInteractionComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {  }\n}\n","export default \".research-item {\\n  display: inline-block;\\n  width: 15em;\\n  margin: 10px;\\n  padding: 5px;\\n  border: 2px solid black;\\n}\\n\\n.research-btn {\\n  width: 75px;\\n}\\n\\n.research-item-top {\\n  display: flex;\\n  justify-content: space-between;\\n}\\n\\n.research-item-middle {\\n  padding: 3px;\\n}\\n\\n.research-item-bottom {\\n  padding: 3px;\\n}\\n\\n.research-item-footer {\\n  padding: 3px;\\n  font-style: italic;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9vcHQvbGFtcHAvaHRkb2NzL2ltZy9zcGFjZS1pZGxlL3NyYy9hcHAvY29tcG9uZW50cy9zaGlwLWludGVyYWN0aW9uL3NpLXJlc2VhcmNoL3NpLXJlc2VhcmNoLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9jb21wb25lbnRzL3NoaXAtaW50ZXJhY3Rpb24vc2ktcmVzZWFyY2gvc2ktcmVzZWFyY2guY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxxQkFBQTtFQUNBLFdBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtFQUNBLHVCQUFBO0FDQ0Y7O0FERUE7RUFDRSxXQUFBO0FDQ0Y7O0FERUE7RUFDRSxhQUFBO0VBQ0EsOEJBQUE7QUNDRjs7QURFQTtFQUNFLFlBQUE7QUNDRjs7QURFQTtFQUNFLFlBQUE7QUNDRjs7QURFQTtFQUNFLFlBQUE7RUFDQSxrQkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9zaGlwLWludGVyYWN0aW9uL3NpLXJlc2VhcmNoL3NpLXJlc2VhcmNoLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnJlc2VhcmNoLWl0ZW17XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgd2lkdGg6IDE1ZW07XG4gIG1hcmdpbjogMTBweDtcbiAgcGFkZGluZzogNXB4O1xuICBib3JkZXI6IDJweCBzb2xpZCBibGFjaztcbn1cblxuLnJlc2VhcmNoLWJ0bntcbiAgd2lkdGg6IDc1cHg7XG59XG5cbi5yZXNlYXJjaC1pdGVtLXRvcHtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xufVxuXG4ucmVzZWFyY2gtaXRlbS1taWRkbGV7XG4gIHBhZGRpbmc6IDNweDtcbn1cblxuLnJlc2VhcmNoLWl0ZW0tYm90dG9te1xuICBwYWRkaW5nOiAzcHg7XG59XG5cbi5yZXNlYXJjaC1pdGVtLWZvb3RlcntcbiAgcGFkZGluZzogM3B4O1xuICBmb250LXN0eWxlOiBpdGFsaWM7XG59XG4iLCIucmVzZWFyY2gtaXRlbSB7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgd2lkdGg6IDE1ZW07XG4gIG1hcmdpbjogMTBweDtcbiAgcGFkZGluZzogNXB4O1xuICBib3JkZXI6IDJweCBzb2xpZCBibGFjaztcbn1cblxuLnJlc2VhcmNoLWJ0biB7XG4gIHdpZHRoOiA3NXB4O1xufVxuXG4ucmVzZWFyY2gtaXRlbS10b3Age1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG59XG5cbi5yZXNlYXJjaC1pdGVtLW1pZGRsZSB7XG4gIHBhZGRpbmc6IDNweDtcbn1cblxuLnJlc2VhcmNoLWl0ZW0tYm90dG9tIHtcbiAgcGFkZGluZzogM3B4O1xufVxuXG4ucmVzZWFyY2gtaXRlbS1mb290ZXIge1xuICBwYWRkaW5nOiAzcHg7XG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { ResearchService } from '../../../services/research.service';\nimport { ResearchProgress } from 'src/app/models/research';\nimport { TaskService } from 'src/app/services/task.service';\nimport { TooltipViewModel } from 'src/app/models/tooltipViewModel';\n\n@Component({\n  selector: 'app-si-research',\n  templateUrl: './si-research.component.html',\n  styleUrls: ['./si-research.component.scss']\n})\nexport class SiResearchComponent implements OnInit {\n\n  researchList: ResearchListItem[] = [];\n\n  constructor(private _researchService: ResearchService, private _taskService: TaskService) { }\n\n  ngOnInit() {\n    this._researchService.onResearchUpdated.subscribe(() => {this.updateResearchList();});\n    this.updateResearchList();\n  }\n\n  research(item: ResearchListItem) {\n    this._taskService.beginResearch(item.name);\n  }\n\n  updateResearchList() {\n    while (this.researchList.length > 0) { this.researchList.pop(); }\n\n    this._researchService.getDisciplines().forEach(discipline => {\n      if (!discipline.revealAtStart && !this._researchService.hasProgress(discipline.name)) {return;}\n      const progress = this._researchService.getProgress(discipline.name);\n      if (!discipline.revealAtStart && progress.theoryLevel < 1) {return;}\n      const item: ResearchListItem = {\n        name: discipline.name,\n        knowledgeTooltip: new TooltipViewModel(),\n        theoryTooltip: new TooltipViewModel(),\n        progress: progress,\n        nextAdvanceLevel: this._researchService.getNextLevelWithAdvancement(discipline.name)\n      };\n      item.knowledgeTooltip.desc = discipline.desc;\n      item.theoryTooltip.desc = 'Theory improves your research speed.  ' + discipline.theoryDesc;\n      this.researchList.push(item);\n    });\n  }\n\n  getKnowledgeNeeded(research: ResearchListItem): number {\n    return this._researchService.knowledgeNeeded(research.name);\n  }\n\n  getTheoryNeeded(research: ResearchListItem): number {\n    return this._researchService.theoryNeeded(research.name);\n  }\n}\n\nexport class ResearchListItem {\n  public name: string;\n  public knowledgeTooltip: TooltipViewModel;\n  public theoryTooltip: TooltipViewModel;\n  public progress: ResearchProgress;\n  public nextAdvanceLevel: number;\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvc2hpcC1pbnRlcmFjdGlvbi9zaS1zeXN0ZW1zL3NpLXN5c3RlbXMuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-si-systems',\n  templateUrl: './si-systems.component.html',\n  styleUrls: ['./si-systems.component.scss']\n})\nexport class SiSystemsComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","export default \".upgrade-list-item {\\n  border-bottom: 1px solid lightgray;\\n  padding-bottom: 15px;\\n}\\n\\n.upgrade-complete-list-item {\\n  padding-bottom: 15px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9vcHQvbGFtcHAvaHRkb2NzL2ltZy9zcGFjZS1pZGxlL3NyYy9hcHAvY29tcG9uZW50cy9zaGlwLWludGVyYWN0aW9uL3NpLXVwZ3JhZGVzL3NpLXVwZ3JhZGVzLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9jb21wb25lbnRzL3NoaXAtaW50ZXJhY3Rpb24vc2ktdXBncmFkZXMvc2ktdXBncmFkZXMuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxrQ0FBQTtFQUNBLG9CQUFBO0FDQ0Y7O0FEQ0E7RUFDRSxvQkFBQTtBQ0VGIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9zaGlwLWludGVyYWN0aW9uL3NpLXVwZ3JhZGVzL3NpLXVwZ3JhZGVzLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnVwZ3JhZGUtbGlzdC1pdGVtIHtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIGxpZ2h0Z3JheTtcbiAgcGFkZGluZy1ib3R0b206IDE1cHg7XG59XG4udXBncmFkZS1jb21wbGV0ZS1saXN0LWl0ZW0ge1xuICBwYWRkaW5nLWJvdHRvbTogMTVweDtcbn1cbi51cGdyYWRlLWNvc3Qge1xuXG59XG4iLCIudXBncmFkZS1saXN0LWl0ZW0ge1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgbGlnaHRncmF5O1xuICBwYWRkaW5nLWJvdHRvbTogMTVweDtcbn1cblxuLnVwZ3JhZGUtY29tcGxldGUtbGlzdC1pdGVtIHtcbiAgcGFkZGluZy1ib3R0b206IDE1cHg7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { ResearchService } from '../../../services/research.service';\nimport { ResourceCollection } from 'src/app/models/resource';\nimport { ResourceService } from 'src/app/services/resource.service';\n\n@Component({\n  selector: 'app-si-upgrades',\n  templateUrl: './si-upgrades.component.html',\n  styleUrls: ['./si-upgrades.component.scss']\n})\nexport class SiUpgradesComponent implements OnInit {\n\n  upgradesAvailable: UpgradeListItem[] = [];\n  upgradesComplete: UpgradeListItem[] = [];\n\n  constructor(private _researchService: ResearchService, private _resourceService: ResourceService) { }\n\n  ngOnInit() {\n    this.updateUpgradeList();\n  }\n\n  updateUpgradeList() {\n    while (this.upgradesAvailable.length > 0) { this.upgradesAvailable.pop(); }\n    while (this.upgradesComplete.length > 0) { this.upgradesComplete.pop(); }\n\n    this._researchService.getCompletedUpgrades().forEach(x => {\n      const upgradeDef = this._researchService.getUpgradeDefinition(x);\n      const item: UpgradeListItem = {\n        name: x,\n        description: upgradeDef.description,\n        researched: true,\n        cost: upgradeDef.cost\n      };\n      this.upgradesComplete.push(item);\n    });\n\n    this._researchService.getAvailableUpgrades().forEach(x => {\n      const upgradeDef = this._researchService.getUpgradeDefinition(x);\n      const item: UpgradeListItem = {\n        name: x,\n        description: upgradeDef.description,\n        researched: false,\n        cost: upgradeDef.cost\n      };\n      this.upgradesAvailable.push(item);\n    });\n  }\n\n  canAffordUpgrade(item: UpgradeListItem): boolean {\n    const canAfford = this._resourceService.canAfford(item.cost);\n    return canAfford;\n  }\n\n  onClickUpgradeItem(item: UpgradeListItem) {\n    if (item.researched) { return; }\n    this._researchService.buyUpgrade(item.name);\n    this.updateUpgradeList();\n  }\n}\n\nclass UpgradeListItem {\n  public name: string;\n  public description: string;\n  public researched: boolean;\n  public cost: ResourceCollection;\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvc2hpcC1vdmVydmlldy9zaGlwLW92ZXJ2aWV3LmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, EventEmitter, OnInit, Output } from '@angular/core';\n\n@Component({\n  selector: 'app-ship-overview',\n  templateUrl: './ship-overview.component.html',\n  styleUrls: ['./ship-overview.component.scss']\n})\nexport class ShipOverviewComponent implements OnInit {\n\n  @Output() researchButtonClicked = new EventEmitter();\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  onResearchButtonClicked() {\n    this.researchButtonClicked.emit();\n  }\n\n}\n","export default \".selected {\\n  color: red;\\n}\\n\\n.planet-list {\\n  display: inline-flex;\\n  flex-direction: column;\\n  padding: 5px;\\n  padding-top: 10px;\\n}\\n\\n.planet-list-item {\\n  padding-bottom: 8px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9vcHQvbGFtcHAvaHRkb2NzL2ltZy9zcGFjZS1pZGxlL3NyYy9hcHAvY29tcG9uZW50cy9zeXN0ZW0tb3ZlcnZpZXcvc3lzdGVtLW92ZXJ2aWV3LmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9jb21wb25lbnRzL3N5c3RlbS1vdmVydmlldy9zeXN0ZW0tb3ZlcnZpZXcuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxVQUFBO0FDQ0o7O0FERUE7RUFDRSxvQkFBQTtFQUNBLHNCQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0FDQ0Y7O0FERUE7RUFDRSxtQkFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvY29tcG9uZW50cy9zeXN0ZW0tb3ZlcnZpZXcvc3lzdGVtLW92ZXJ2aWV3LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnNlbGVjdGVke1xuICAgIGNvbG9yOiByZWQ7XG59XG5cbi5wbGFuZXQtbGlzdHtcbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBhZGRpbmc6IDVweDtcbiAgcGFkZGluZy10b3A6IDEwcHg7XG59XG5cbi5wbGFuZXQtbGlzdC1pdGVte1xuICBwYWRkaW5nLWJvdHRvbTogOHB4O1xufVxuIiwiLnNlbGVjdGVkIHtcbiAgY29sb3I6IHJlZDtcbn1cblxuLnBsYW5ldC1saXN0IHtcbiAgZGlzcGxheTogaW5saW5lLWZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIHBhZGRpbmc6IDVweDtcbiAgcGFkZGluZy10b3A6IDEwcHg7XG59XG5cbi5wbGFuZXQtbGlzdC1pdGVtIHtcbiAgcGFkZGluZy1ib3R0b206IDhweDtcbn0iXX0= */\"","import { Component, OnInit, ViewChild, EventEmitter, Output } from '@angular/core';\nimport {Planet} from '../../models/planet';\nimport {PlanetService} from '../../services/planet.service';\n\n@Component({\n  selector: 'app-system-overview',\n  templateUrl: './system-overview.component.html',\n  styleUrls: ['./system-overview.component.scss']\n})\nexport class SystemOverviewComponent implements OnInit {\n\n  planets: Planet[] = [];\n\n  selectedPlanet: Planet;\n\n  @Output() shipSelected = new EventEmitter<boolean>();\n\n  constructor(private planetService: PlanetService) {\n    this.planetService.selectedPlanetChanged.subscribe(x => this.updateSelectedPlanet());\n  }\n\n  ngOnInit() {\n    this.getSystem();\n    this.selectedPlanet = this.getSelectedPlanet();\n  }\n\n  updateSelectedPlanet() {\n    this.selectedPlanet = this.getSelectedPlanet();\n  }\n\n  onSelectionChange(event: Planet) {\n    if (event.name === \"Ship\") {\n      this.shipSelected.next(true);\n    }\n    else {\n      this.planetService.selectPlanet(this.selectedPlanet.instanceId);\n      this.shipSelected.next(false);\n    }\n  }\n\n  getSystem(): void {\n    this.planets = [];\n    const ship = new Planet();\n    ship.name = \"Ship\";\n    this.planets.push(ship);\n    this.planets = this.planets.concat(this.planetService.getCurrentSystem());\n  }\n\n  getSelectedPlanet(): Planet {\n    return this.planetService.getSelectedPlanet();\n  }\n\n}\n","import { Directive, Input, HostListener, OnInit, ElementRef } from '@angular/core';\nimport { OverlayRef, Overlay, OverlayPositionBuilder } from '@angular/cdk/overlay';\nimport { ComponentPortal, DomPortalHost } from '@angular/cdk/portal';\nimport { GameTooltipComponent } from '../components/game-tooltip/game-tooltip.component';\nimport { TooltipViewModel } from '../models/tooltipViewModel';\n\n@Directive({\n  selector: '[appGameTooltip]'\n})\nexport class GameTooltipDirective implements OnInit {\n\n  @Input('appGameTooltip') model: TooltipViewModel;\n\n  private static currentTooltip: GameTooltipDirective = null;\n\n  private static overlayRef: OverlayRef = null;\n\n  constructor(private overlayPositionBuilder: OverlayPositionBuilder,\n              private elementRef: ElementRef,\n              private overlay: Overlay) {}\n\n  ngOnInit() {\n\n  }\n\n  @HostListener('mouseenter')\n  show() {\n\n    const positionStrategy = this.overlayPositionBuilder\n      .flexibleConnectedTo(this.elementRef)\n      .withPositions([{\n        originX: 'end',\n        originY: 'center',\n        overlayX: 'start',\n        overlayY: 'center'\n      }]);\n\n    if (GameTooltipDirective.currentTooltip != null) {\n      GameTooltipDirective.currentTooltip.hide();\n    }\n    GameTooltipDirective.currentTooltip = this;\n    if (GameTooltipDirective.overlayRef == null) {\n      GameTooltipDirective.overlayRef = this.overlay.create();\n    }\n\n    GameTooltipDirective.overlayRef.updatePositionStrategy(positionStrategy);\n    const tooltipPortal = new ComponentPortal(GameTooltipComponent);\n    const tooltipRef = GameTooltipDirective.overlayRef.attach(tooltipPortal);\n    tooltipRef.instance.tooltipModel = this.model;\n\n\n  }\n\n  @HostListener('mouseleave')\n  hide() {\n    GameTooltipDirective.overlayRef.detach();\n    GameTooltipDirective.currentTooltip = null;\n  }\n\n\n}\n","import { ResourceCollection } from './resource';\n\nexport class Planet {\n    instanceId: number;\n    name: string;\n    temperature: string;\n    atmosphere: string;\n    regions: Region[];\n}\n\nexport class Region {\n  public hiddenBehindRegion = 0;\n  public hiddenBehindSurvey = 0;\n  public features: Feature[] = [];\n  constructor(\n    public planetId: number,\n    public instanceId: number,\n    public name: string\n  ) {}\n\n  public hideBehindSurvey(regionId: number, level: number): Region {\n    this.hiddenBehindRegion = regionId;\n    this.hiddenBehindSurvey = level;\n    return this;\n  }\n\n  public addFeature(name: string, infrastructureLevel: number = 1): Region {\n    const feature = new Feature(this.planetId, this.instanceId, this.features.length, name);\n    feature.hiddenBehindSurvey = infrastructureLevel;\n    this.features.push(feature);\n    return this;\n  }\n\n  public removeFeature(feature: Feature): Region {\n    this.features.splice(this.features.indexOf(feature), 1);\n    return this;\n  }\n\n  public replaceFeature(oldFeatureId: number, newFeatureName: string): Region {\n    this.features.find(x => x.instanceId === oldFeatureId).name = newFeatureName;\n    return this;\n  }\n}\n\nexport class Feature {\n\n    public hiddenBehindSurvey = 1;\n    constructor(\n      public planetId: number,\n      public regionId: number,\n      public instanceId: number,\n      public name: string\n      ) {}\n}\n\nexport const MOCK_SYSTEM: Planet[] = [\n    {instanceId: 1, name: 'forest planet', temperature: 'temperate', atmosphere: 'oxygen', regions: [\n        new Region(1, 1, 'Plains')\n          .addFeature('copper deposit', 1)\n          .addFeature('silver vein', 2)\n          .addFeature('wrecked hull plating', 2)\n          .addFeature('crater', 3)\n          .addFeature('copper deposit', 4)\n          .addFeature('wrecked hull plating', 4)\n          .addFeature('lignite deposit', 5)\n          .addFeature('resonance field', 5)\n          .addFeature('corrupted databank', 5)\n          .addFeature('energy cell', 6)\n          .addFeature('oil field', 6),\n        new Region(1, 2, 'Hills')\n          .hideBehindSurvey(1, 3)\n          .addFeature('corundum deposit', 1)\n          .addFeature('corrupted databank', 1)\n          .addFeature('copper deposit', 2)\n          .addFeature('hematite deposit', 2)\n          .addFeature('energy cell', 2)\n          .addFeature('lignite deposit', 3)\n          .addFeature('silver vein', 3)\n          .addFeature('corrupted databank', 3)\n          .addFeature('gold vein', 4)\n          .addFeature('copper deposit', 4)\n          .addFeature('tectonic activity', 4)\n          .addFeature('wrecked hull plating', 5)\n          .addFeature('copper deposit', 5)\n          .addFeature('bitumen deposit', 5),\n        new Region(1, 3, 'Forest')\n          .hideBehindSurvey(1, 4)\n          .addFeature('lignite deposit', 1)\n          .addFeature('corrupted databank', 2)\n          .addFeature('lignite deposit', 3)\n          .addFeature('resonance field', 3)\n          .addFeature('copper deposit', 3)\n          .addFeature('lignite deposit', 4)\n          .addFeature('electric storm', 4)\n          .addFeature('oil field', 5),\n        new Region(1, 4, 'Coast')\n          .hideBehindSurvey(2, 2)\n          .addFeature('waterlogged processing unit', 1)\n          .addFeature('corundum deposit', 1)\n          .addFeature('lignite deposit', 2)\n          .addFeature('methane vent', 3)\n          .addFeature('methane vent', 4)\n          .addFeature('oil field', 5),\n        new Region(1, 5, 'Ocean')\n          .hideBehindSurvey(4, 2)\n          .addFeature('methane vent', 2)\n          .addFeature('electric storm', 2)\n          .addFeature('waterlogged processing unit', 3)\n          .addFeature('undersea oil field', 4),\n        new Region(1, 6, 'Ocean Floor')\n          .hideBehindSurvey(5, 7)\n          .addFeature('magnetite deposit', 1)\n          .addFeature('tectonic activity', 1)\n          .addFeature('undersea oil field', 2)\n          .addFeature('spatial distortion', 2)\n          .addFeature('magnetite deposit', 3)\n          .addFeature('charybdin crystals', 4),\n        new Region(1, 7, 'Mountain')\n          .hideBehindSurvey(2, 3)\n          .addFeature('bitumen deposit', 1)\n          .addFeature('hematite deposit', 2)\n          .addFeature('bitumen deposit', 2)\n          .addFeature('magnetite deposit', 3)\n          .addFeature('magnetite deposit', 4)\n          .addFeature('porphyritic synaptite', 5),\n        new Region(1, 8, 'Desert')\n          .hideBehindSurvey(7, 5)\n          .addFeature('corundum deposit', 1)\n          .addFeature('energy signature', 1)\n          .addFeature('oil field', 2)\n          .addFeature('tectonic activity', 2)\n          .addFeature('magnetite deposit', 3)\n          .addFeature('oil field', 4)\n          .addFeature('glittersand spout', 5),\n        new Region(1, 9, 'Arctic')\n          .hideBehindSurvey(5, 5)\n          .addFeature('helium clathrates', 1)\n          .addFeature('electric storm', 1)\n          .addFeature('argon clathrates', 2)\n          .addFeature('graviton emissions', 2)\n          .addFeature('helium clathrates', 3)\n          .addFeature('oil field', 4)\n          .addFeature('dyene cluster', 5)\n    ]},\n    {instanceId: 2, name: 'ice planet', temperature: 'frozen', atmosphere: 'oxygen', regions: [\n      new Region(1, 1, 'Plains')\n        .addFeature('methane vent')\n        .addFeature('dyene cluster', 1)\n    ]}\n];\n","import { ResourceCollection } from './resource';\nimport { isNullOrUndefined } from 'util';\nimport { Task, FeatureTask } from './task';\n\nexport class PlanetInteractionModel {\n    planetInstanceId: number;\n    structures: Structure[];\n    regions: RegionInteractionCollection = new RegionInteractionCollection();\n    localResources: ResourceCollection;\n}\n\nexport class Structure {\n    name: string;\n    amount: number;\n    active: number;\n    canBuild: boolean;\n}\n\nexport class FeatureInteraction {\n  featureInstanceId: number;\n  exploited: boolean;\n  assignedDrones: number = 0;\n  tasks: FeatureTask[] = [];\n}\n\nexport class RegionInteraction {\n  regionInstanceId: number;\n  outpostLevel = 0;\n  surveyLevel = 0;\n  surveyProgress = 0;\n  assignedDrones = 0;\n  droneSlots = 1;\n  nextSurveyLevelCost: number = 0;\n  nextOutpostLevelCost: ResourceCollection = null;\n  features: FeatureInteraction[] = [];\n\n  isFeatureExploited(feature: number): boolean {\n    return this.getFeature(feature).exploited;\n  }\n\n  getFeature(featureId: number): FeatureInteraction {\n    let feature = this.features.find(x => x.featureInstanceId === featureId);\n    if (isNullOrUndefined(feature)) {\n      feature = new FeatureInteraction();\n      feature.featureInstanceId = featureId;\n      this.features.push(feature);\n    }\n    return feature;\n  }\n\n  removeFeature(featureId: number) {\n    this.features.splice(this.features.findIndex(x => x.featureInstanceId === featureId), 1);\n  }\n}\n\nexport class RegionInteractionCollection {\n  regions: RegionInteraction[] = [];\n\n  getOutpostLevel(regionId: number): number {\n    return this.getRegion(regionId).outpostLevel;\n  }\n\n  getSurveyLevel(regionId: number): number {\n    return this.getRegion(regionId).surveyLevel;\n  }\n\n  getRegion(regionId: number): RegionInteraction {\n    let region = this.regions.find(x => x.regionInstanceId === regionId);\n    if (isNullOrUndefined(region)) {\n      region = new RegionInteraction();\n      region.regionInstanceId = regionId;\n      this.regions.push(region);\n    }\n    return region;\n  }\n\n  getFeature(regionId: number, featureId: number): FeatureInteraction {\n    const region = this.getRegion(regionId);\n    return region.getFeature(featureId);\n  }\n\n  removeFeature(regionId: number, featureId: number) {\n    const region = this.getRegion(regionId);\n    return region.removeFeature(featureId);\n  }\n\n  getRegionDroneSlots(regionId: number): number {\n    return this.getRegion(regionId).droneSlots;\n  }\n\n  getRegionAssignedDrones(regionId: number): number {\n    return this.getRegion(regionId).assignedDrones;\n  }\n\n  getTotalAssignedDrones(): number {\n    return this.regions.map(x => x.assignedDrones).reduce((a, b) => {return a+b;});\n  }\n\n  getFeatureAssignedDrones(regionId: number, featureId: number): number {\n    return this.getFeature(regionId, featureId).assignedDrones;\n  }\n\n  assignDrone(regionId: number, featureId: number) {\n    this.getRegion(regionId).assignedDrones++;\n    this.getFeature(regionId, featureId).assignedDrones++;\n  }\n\n  unassignDrone(regionId: number, featureId: number) {\n    this.getRegion(regionId).assignedDrones--;\n    this.getFeature(regionId, featureId).assignedDrones--;\n  }\n}\n","export class ResearchProgress {\n  discipline: string;\n  knowledgeLevel: number = 0;\n  theoryLevel: number = 0;\n  knowledgeProgress: number = 0;\n  theoryProgress: number = 0;\n}\n","import { isNullOrUndefined } from 'util';\n\nexport class Resource {\n    constructor(public resource: string, public amount: number, public max: number= 0,\n                public productionRate: number= 0, public consumptionRate: number= 0) {}\n\n    getNetProductionRate() {\n        return this.productionRate - this.consumptionRate;\n    }\n\n    getEfficiency() {\n        if (this.productionRate === 0) {return 0; }\n        if (this.getNetProductionRate() >= 0) {return 1; }\n        return this.productionRate / this.consumptionRate;\n    }\n\n    isPower(): boolean {\n      return this.resource === 'power';\n    }\n}\n\nexport class ResourceCollection {\n\n    resources: Resource[] = [];\n\n    constructor() {}\n\n    get(resource: string): Resource {\n      return this.resources.find(x => x.resource === resource);\n    }\n\n    add(resource: string, amount: number) {\n        let resourceItem = this.resources.find(x => x.resource === resource);\n        if (isNullOrUndefined(resourceItem)) {\n            resourceItem = new Resource(resource, 0);\n            this.resources.push(resourceItem);\n        }\n        resourceItem.amount += amount;\n        if (resourceItem.amount > resourceItem.max && resourceItem.max !== 0) {\n            resourceItem.amount = resourceItem.max;\n        }\n    }\n\n    addCollection(other: ResourceCollection) {\n      other.resources.forEach(element => {\n        this.add(element.resource, element.amount);\n      }, this);\n    }\n\n    remove(resource: string, amount: number): boolean {\n        let couldAfford = true;\n        const resourceItem = this.resources.find(x => x.resource === resource);\n        if (isNullOrUndefined(resourceItem)) {return false; }\n        resourceItem.amount -= amount;\n        if (resourceItem.amount < 0) {\n            resourceItem.amount = 0;\n            couldAfford = false;\n        }\n        return couldAfford;\n    }\n\n    removeCollection(other: ResourceCollection): boolean {\n      let couldAfford = true;\n      other.resources.forEach(element => {\n        const removeResult = this.remove(element.resource, element.amount);\n        if (!removeResult) { couldAfford = false; }\n      });\n      return couldAfford;\n    }\n\n    setMax(resource: string, max: number) {\n        let resourceItem = this.resources.find(x => x.resource === resource);\n        if (isNullOrUndefined(resourceItem)) {\n            resourceItem = new Resource(resource, 0);\n            this.resources.push(resourceItem);\n        }\n        resourceItem.max = max;\n        if (resourceItem.amount > resourceItem.max) {\n            resourceItem.amount = resourceItem.max;\n        }\n    }\n\n    addProductionRate(resource: string, rate: number) {\n        let resourceItem = this.resources.find(x => x.resource === resource);\n        if (isNullOrUndefined(resourceItem)) {\n            resourceItem = new Resource(resource, 0);\n            this.resources.push(resourceItem);\n        }\n        resourceItem.productionRate += rate;\n    }\n\n    setProductionRate(resource: string, rate: number) {\n        let resourceItem = this.resources.find(x => x.resource === resource);\n        if (isNullOrUndefined(resourceItem)) {\n            resourceItem = new Resource(resource, 0);\n            this.resources.push(resourceItem);\n        }\n        resourceItem.productionRate = rate;\n    }\n\n    addConsumptionRate(resource: string, rate: number) {\n        let resourceItem = this.resources.find(x => x.resource === resource);\n        if (isNullOrUndefined(resourceItem)) {\n            resourceItem = new Resource(resource, 0);\n            this.resources.push(resourceItem);\n        }\n        resourceItem.consumptionRate += rate;\n    }\n\n    setConsumptionRate(resource: string, rate: number) {\n        let resourceItem = this.resources.find(x => x.resource === resource);\n        if (isNullOrUndefined(resourceItem)) {\n            resourceItem = new Resource(resource, 0);\n            this.resources.push(resourceItem);\n        }\n        resourceItem.consumptionRate = rate;\n    }\n\n    resetRates() {\n        this.resources.forEach(resource => {resource.productionRate = 0; resource.consumptionRate = 0; });\n    }\n\n    has(resource: string, amount?: number): boolean {\n        if (!amount) { amount = 0.01; }\n        const resourceItem = this.resources.find(x => x.resource === resource);\n        if (isNullOrUndefined(resourceItem)) {return false; }\n        return resourceItem.amount >= amount;\n    }\n\n    getAmount(resource: string): number {\n      const resourceItem = this.resources.find(x => x.resource === resource);\n        if (isNullOrUndefined(resourceItem)) {return 0; }\n        return resourceItem.amount;\n    }\n\n    getProduction(resource: string): number {\n      const resourceItem = this.resources.find(x => x.resource === resource);\n        if (isNullOrUndefined(resourceItem)) {return 0; }\n        return resourceItem.productionRate;\n    }\n\n    getConsumption(resource: string): number {\n      const resourceItem = this.resources.find(x => x.resource === resource);\n        if (isNullOrUndefined(resourceItem)) {return 0; }\n        return resourceItem.consumptionRate;\n    }\n\n    getNetProduction(resource: string): number {\n      const resourceItem = this.resources.find(x => x.resource === resource);\n        if (isNullOrUndefined(resourceItem)) {return 0; }\n        return resourceItem.productionRate - resourceItem.consumptionRate;\n    }\n\n    getMax(resource: string): number {\n      const resourceItem = this.resources.find(x => x.resource === resource);\n        if (isNullOrUndefined(resourceItem)) {return 0; }\n        return resourceItem.max;\n    }\n\n    applyMultiplier(multiplier: number, includeEnergy: boolean = false) {\n      this.resources.forEach(x => {\n        if (x.resource === 'energy' && !includeEnergy) {return;}\n        x.amount = x.amount * multiplier;\n      });\n    }\n\n    withMultiplier(multiplier: number, includeEnergy: boolean = false): ResourceCollection {\n      const newCollection = new ResourceCollection();\n      newCollection.addCollection(this);\n      newCollection.applyMultiplier(multiplier, includeEnergy);\n      return newCollection;\n    }\n\n    clear() {\n      while (this.resources.length > 0) {\n        this.resources.pop();\n      }\n    }\n\n}\n","import { TaskDefinition } from '../staticData/taskDefinitions';\n\nexport class Task {\n  public definition: TaskDefinition;\n  public name: string;\n  public progress: number;\n  public needed: number;\n}\n\nexport class SurveyTask extends Task {\n  public planetId: number;\n  public regionId: number;\n}\n\nexport class ResearchTask extends Task {\n  public discipline: string;\n}\n\nexport class FeatureTask extends Task {\n  public planetId: number;\n  public regionId: number;\n  public featureId: number;\n\n}\n","import { ResourceCollection } from './resource';\n\nexport class TooltipViewModel {\n  name: string;\n  desc: string;\n  costs: ResourceCollection;\n  consumption: ResourceCollection;\n  production: ResourceCollection;\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'displayNumber'\n})\nexport class DisplayNumberPipe implements PipeTransform {\n\n  transform(value: number, args?: any): string {\n\n    let prefix = '';\n    let suffix = '';\n    if (value < 0) {prefix = '-'; }\n    value = Math.abs(value);\n\n    if (value < 1000) {\n      return prefix + this.getSuffixedValue(value, suffix);\n    }\n\n    const decimalPlaces = Math.floor(Math.log10(value));\n    if (decimalPlaces < 6) {\n      value = (value / 1000);\n      suffix = 'K';\n    } else {\n      value = (value / 1000000);\n      suffix = 'M';\n    }\n\n    return prefix + this.getSuffixedValue(value, suffix);\n  }\n\n  getSuffixedValue(value: number, suffix: string): string {\n    if (value - Math.floor(value) > 0.01) {\n      return value.toFixed(2) + suffix;\n    }\n    return value.toFixed(0) + suffix;\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { FlagsService } from './flags.service';\nimport { PlanetService } from './planet.service';\nimport { ResourceService } from './resource.service';\nimport { Resource } from '../models/resource';\nimport { ResearchService } from './research.service';\nimport { Feature } from '../models/planet';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ActionService {\n\n  constructor(private _flagService: FlagsService, private _planetService: PlanetService,\n              private _resourceService: ResourceService, private _researchService: ResearchService) { }\n\n  canAffordDroneCost(drones: number, planetInstanceId?: number): boolean {\n    return this._planetService.canAffordDroneCost(drones, planetInstanceId);\n  }\n\n  setFlag(flag: string) {\n    this._flagService.set(flag);\n  }\n\n  addTheory(discipline: string, amount: number) {\n    this._researchService.addTheory(discipline, amount);\n  }\n\n  addResource(resource: Resource) {\n    this._resourceService.globalResources.add(resource.resource, resource.amount);\n  }\n\n  addMaxResource(resource: Resource) {\n    this._resourceService.addMax(resource.resource, resource.amount);\n  }\n\n  addEnergyRate(amount: number) {\n    this._resourceService.addEnergyRate(amount);\n  }\n\n  gatherFeature(feature: Feature) {\n    this._planetService.gatherFeature(feature.regionId, feature.instanceId);\n  }\n\n  replaceFeature(regionId: number, featureInstanceId: number, newFeatureName: string) {\n    this._planetService.replaceFeature(regionId, featureInstanceId, newFeatureName);\n  }\n\n  removeFeature(feature: Feature) {\n    this._planetService.removeFeature(feature);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FlagsService {\n  public showOutpostPanel = false;\n\n  public flags: Set<string> = new Set<string>();\n\n  public onFlagsUpdated: Subject<void> = new Subject();\n\n  constructor() {}\n\n  init(): void {\n    this.onFlagsUpdated.next();\n  }\n\n  check(flag: string): boolean {\n    if (flag === '') {return false;}\n    return this.flags.has(flag);\n  }\n\n  set(flag: string) {\n    if (flag === '') {return;}\n    this.flags.add(flag);\n    this.onFlagsUpdated.next();\n  }\n\n  clear(flag: string) {\n    this.flags.delete(flag);\n    this.onFlagsUpdated.next();\n  }\n}\n","import { Injectable, OnInit } from '@angular/core';\nimport {Planet, Feature, Region} from '../models/planet';\nimport {PlanetInteractionModel, Structure} from '../models/planetInteractionModel';\nimport {MOCK_SYSTEM} from '../models/planet';\nimport { STRUCTURE_LIBRARY, StructureDefinition } from '../staticData/structureDefinitions';\nimport { ResourceCollection, Resource } from '../models/resource';\nimport { Subject } from 'rxjs';\nimport { FeatureDefinition, FEATURE_LIBRARY } from '../staticData/featureDefinitions';\nimport { EXPLOIT_LIBRARY, ExploitDefinition } from '../staticData/exploitDefinitions';\nimport { REGION_LIBRARY, RegionDefinition } from '../staticData/regionDefinitions';\nimport { OutpostDefinition, OUTPOST_LIBRARY } from '../staticData/outpostDefinitions';\nimport { ResourceService } from './resource.service';\nimport { ResearchService } from './research.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PlanetService {\n\n  selectedPlanetChanged: Subject<number> = new Subject();\n  regionChanged: Subject<Region> = new Subject();\n  onFeatureSurveyed: Subject<Feature> = new Subject();\n  onOutpostUpgraded: Subject<PlanetInteractionModel> = new Subject();\n\n  private _currentSystem: Planet[] = null;\n  private _currentSystemInteractionModels: PlanetInteractionModel[] = null;\n  private _selectedPlanet: Planet = null;\n  private _selectedPlanetInteractionModel: PlanetInteractionModel = null;\n\n  constructor(private _resourceService: ResourceService, private _researchService: ResearchService) { }\n\n  initializeSystem(): void {\n    this._currentSystem = MOCK_SYSTEM;\n    this._currentSystemInteractionModels = [];\n\n    // Init interaction models in the system\n    this._currentSystem.forEach(element => {\n      const interactionModel = new PlanetInteractionModel();\n      interactionModel.planetInstanceId = element.instanceId;\n      interactionModel.structures = [];\n      interactionModel.localResources = new ResourceCollection();\n      STRUCTURE_LIBRARY.forEach(structureDef => {\n        const structure = {name: structureDef.name, amount: 0, active: 0, canBuild: false};\n        interactionModel.structures.push(structure);\n      });\n      this.updateInteractionModel(interactionModel);\n      this._currentSystemInteractionModels.push(interactionModel);\n    });\n\n    this.selectPlanet(1);\n  }\n\n  getCurrentSystem(): Planet[] {\n    return this._currentSystem;\n  }\n\n  getSelectedPlanet(): Planet {\n    return this._selectedPlanet;\n  }\n\n  getSelectedPlanetInteractionModel(): PlanetInteractionModel {\n    return this._selectedPlanetInteractionModel;\n  }\n\n  getPlanet(planetInstanceId: number): Planet {\n    return this._currentSystem.find(x => x.instanceId === planetInstanceId);\n  }\n\n  getPlanetInteractionModel(planetInstanceId?: number): PlanetInteractionModel {\n    if (!planetInstanceId) {\n      planetInstanceId = this.getSelectedPlanet().instanceId;\n    }\n    const model = this._currentSystemInteractionModels.find(x => x.planetInstanceId === planetInstanceId);\n    // this.updateInteractionModel(model);\n    return model;\n  }\n\n  getRegion(regionId: number, planetInstanceId?: number): Region {\n    if (!planetInstanceId) {\n      planetInstanceId = this.getSelectedPlanet().instanceId;\n    }\n    return this.getPlanet(planetInstanceId).regions.find(x => x.instanceId === regionId);\n  }\n\n  getFeature(regionId: number, featureId: number, planetInstanceId?: number): Feature {\n    if (!planetInstanceId) {\n      planetInstanceId = this.getSelectedPlanet().instanceId;\n    }\n    const region = this.getPlanet(planetInstanceId).regions.find(x => x.instanceId === regionId);\n    return region.features.find(x => x.instanceId === featureId);\n  }\n\n  getRegionDefinition(name: string): RegionDefinition {\n    return REGION_LIBRARY.find(def => def.name === name);\n  }\n\n  getFeatureDefinition(name: string): FeatureDefinition {\n    return FEATURE_LIBRARY.find(def => def.name === name);\n  }\n\n  getExploitDefinitionForFeature(feature: string): ExploitDefinition {\n    const featureDef = this.getFeatureDefinition(feature);\n    return EXPLOIT_LIBRARY.find(def => def.name === featureDef.exploitName);\n  }\n\n  getStructureDefinition(name: string): StructureDefinition {\n    return STRUCTURE_LIBRARY.find(def => def.name === name);\n  }\n\n  getOutpostTypeForPlanet(planetInstanceId?: number): OutpostDefinition {\n    return OUTPOST_LIBRARY.find(def => def.planetType === 'temperate');\n  }\n\n  isRegionVisible(regionId: number, planetInstanceId?: number): boolean {\n    if (!planetInstanceId) {\n      planetInstanceId = this.getSelectedPlanet().instanceId;\n    }\n    const region = this.getRegion(regionId, planetInstanceId);\n    if (region.hiddenBehindRegion != 0)\n    {\n      const otherRegionSurvey = this.getPlanetInteractionModel(planetInstanceId).regions.getSurveyLevel(region.hiddenBehindRegion);\n      return otherRegionSurvey >= region.hiddenBehindSurvey;\n    }\n    return true;\n  }\n\n  getNextStructureCost(structureName: string, planetInstanceId?: number): ResourceCollection {\n    if (!planetInstanceId) {\n      planetInstanceId = this.getSelectedPlanet().instanceId;\n    }\n    const interactionModel = this.getPlanetInteractionModel(planetInstanceId);\n    const structure = interactionModel.structures.find(x => x.name === structureName);\n    const def = this.getStructureDefinition(structureName);\n    const multiplier = Math.pow(def.costMultiplier, structure.amount);\n    const multipliedCost = def.baseBuildCost.withMultiplier(multiplier);\n    const reduction = Math.pow(0.95, this._researchService.getProgress('Material Science').knowledgeLevel);\n    multipliedCost.applyMultiplier(reduction);\n    return multipliedCost;\n  }\n\n  canBuildStructure(structureName: string, planetInstanceId?: number): boolean {\n    return this._resourceService.canAfford(this.getNextStructureCost(structureName, planetInstanceId));\n  }\n\n  canActivateStructure(structureName: string, planetInstanceId?: number): boolean {\n    if (!planetInstanceId) {\n      planetInstanceId = this.getSelectedPlanet().instanceId;\n    }\n    const interactionModel = this.getPlanetInteractionModel(planetInstanceId);\n    const structure = interactionModel.structures.find(x => x.name === structureName);\n    if (structure.active >= structure.amount) { return false; }\n    const def = this.getStructureDefinition(structureName);\n    return def.getConsumptionRates().resources.every(element => {\n      const newConsumption = element.amount;\n      let netProduction = interactionModel.localResources.getNetProduction(element.resource);\n      netProduction += this._resourceService.globalResources.getAmount(element.resource);\n      return newConsumption <= netProduction;\n    });\n  }\n\n  selectPlanet(instanceId: number): void {\n    this._selectedPlanet = this.getPlanet(instanceId);\n    this._selectedPlanetInteractionModel = this.getPlanetInteractionModel(instanceId);\n    this.selectedPlanetChanged.next(instanceId);\n  }\n\n  buildStructure(planetId: number, structureName: string): void {\n    const interactionModel = this.getPlanetInteractionModel(planetId);\n    const structure = interactionModel.structures.find(x => x.name === structureName);\n    const cost = this.getNextStructureCost(structureName, planetId);\n    if (!this._resourceService.spend(cost)) { return; }\n    structure.amount += 1;\n    if (this.canActivateStructure(structureName)) {\n      structure.active += 1;\n    }\n    this.updateInteractionModel(interactionModel);\n  }\n\n  setStructureActiveAmount(planetId: number, structureName: string, amount: number): void {\n    const interactionModel = this.getPlanetInteractionModel(planetId);\n    const structure = interactionModel.structures.find(x => x.name === structureName);\n    structure.active = Math.min(amount, structure.amount);\n    this.updateInteractionModel(interactionModel);\n  }\n\n  surveyRegion(amount: number, regionId: number, planetInstanceId?: number) {\n    if (!planetInstanceId) {\n      planetInstanceId = this.getSelectedPlanet().instanceId;\n    }\n    const region = this.getRegion(regionId, planetInstanceId);\n    const regionDef = this.getRegionDefinition(region.name);\n    const regionInteraction = this.getPlanetInteractionModel(planetInstanceId).regions.getRegion(regionId);\n    const surveyProgressNeeded = this.getSurveyProgressNeeded(regionId, planetInstanceId);\n    const surveyResearch = this._researchService.getProgress('Planetary Survey');\n    regionInteraction.surveyProgress += amount + (amount*surveyResearch.knowledgeLevel*0.2); //TODO: calc survey speed\n    if (regionInteraction.surveyProgress >= surveyProgressNeeded) {\n      regionInteraction.surveyProgress -= surveyProgressNeeded;\n      regionInteraction.surveyLevel++;\n      regionInteraction.nextSurveyLevelCost = regionInteraction.nextSurveyLevelCost * regionDef.surveyCostMultiplier;\n      this._researchService.addTheory('Planetary Survey', regionInteraction.surveyLevel * 2);\n      this.regionChanged.next(this.getRegion(regionId, planetInstanceId));\n    }\n  }\n\n  getSurveyProgress(regionId: number, planetInstanceId?: number) {\n    if (!planetInstanceId) {\n      planetInstanceId = this.getSelectedPlanet().instanceId;\n    }\n\n    return this.getPlanetInteractionModel(planetInstanceId).regions.getRegion(regionId).surveyProgress;\n  }\n\n  getSurveyProgressNeeded(regionId: number, planetInstanceId?: number) {\n    if (!planetInstanceId) {\n      planetInstanceId = this.getSelectedPlanet().instanceId;\n    }\n\n    const region = this.getRegion(regionId, planetInstanceId);\n    const regionInteraction = this.getPlanetInteractionModel(planetInstanceId).regions.getRegion(regionId);\n    const regionDef = this.getRegionDefinition(region.name);\n    if (regionInteraction.nextSurveyLevelCost == 0) {\n      regionInteraction.nextSurveyLevelCost = regionDef.surveyBaseCost;\n    }\n\n    return regionInteraction.nextSurveyLevelCost;\n  }\n\n  getIdleDrones(planetInstanceId?: number): number {\n    if (!planetInstanceId) {\n      planetInstanceId = this.getSelectedPlanet().instanceId;\n    }\n\n    const droneCount = this._resourceService.get('drones');\n    const assigned = this.getPlanetInteractionModel(planetInstanceId).regions.getTotalAssignedDrones();\n    return droneCount - assigned;\n  }\n\n  canAffordDroneCost(drones: number, planetInstanceId?: number): boolean {\n    if (!planetInstanceId) {\n      planetInstanceId = this.getSelectedPlanet().instanceId;\n    }\n\n    return this.getIdleDrones(planetInstanceId) >= drones;\n  }\n\n  replaceFeature(regionId: number, featureId: number, newFeatureName: string, planetInstanceId?: number): void {\n    if (!planetInstanceId) {\n      planetInstanceId = this.getSelectedPlanet().instanceId;\n    }\n    const planet = this.getPlanet(planetInstanceId);\n    const region = planet.regions.find(x => x.instanceId === regionId);\n    region.replaceFeature(featureId, newFeatureName);\n    this.regionChanged.next(region);\n  }\n\n  removeFeature(feature: Feature) {\n    const planet = this.getPlanet(feature.planetId);\n    const region = planet.regions.find(x => x.instanceId === feature.regionId);\n    const planetInteraction = this.getPlanetInteractionModel(feature.planetId);\n    region.removeFeature(feature);\n    planetInteraction.regions.removeFeature(region.instanceId, feature.instanceId);\n    this.regionChanged.next(region);\n  }\n\n  gatherRegion(regionId: number, planetInstanceId?: number) {\n    if (!planetInstanceId) {\n      planetInstanceId = this.getSelectedPlanet().instanceId;\n    }\n\n    const planet = this.getPlanet(planetInstanceId);\n    const region = planet.regions.find(x => x.instanceId === regionId);\n    const regionSurvey = this.getPlanetInteractionModel(planetInstanceId).regions.getSurveyLevel(regionId);\n    region.features.forEach(feature => {\n      const featureDefinition = this.getFeatureDefinition(feature.name);\n      if (feature.hiddenBehindSurvey <= regionSurvey) {\n        this._resourceService.globalResources.addCollection(featureDefinition.gatherRates);\n      }\n    });\n\n  }\n\n  gatherFeature(regionId: number, featureId: number, planetInstanceId?: number) {\n    if (!planetInstanceId) {\n      planetInstanceId = this.getSelectedPlanet().instanceId;\n    }\n\n    const planet = this.getPlanet(planetInstanceId);\n    const region = planet.regions.find(x => x.instanceId === regionId);\n    const feature = region.features.find(x => x.instanceId === featureId);\n    const featureDefinition = this.getFeatureDefinition(feature.name);\n\n    this._resourceService.globalResources.addCollection(featureDefinition.gatherRates);\n  }\n\n  buildDroneHub(regionId: number, planetInstanceId?: number) {\n    if (!planetInstanceId) {\n      planetInstanceId = this.getSelectedPlanet().instanceId;\n    }\n    const region = this.getRegion(regionId, planetInstanceId);\n    const regionDef = this.getRegionDefinition(region.name);\n    const regionInteraction = this.getPlanetInteractionModel(planetInstanceId).regions.getRegion(regionId);\n    const cost = this.getDroneHubCost(regionId, planetInstanceId);\n    if (!this._resourceService.canAfford(cost)) {return;}\n    if (!this._resourceService.spend(cost)) {return;}\n\n    regionInteraction.outpostLevel++;\n    regionInteraction.droneSlots++;\n    regionInteraction.nextOutpostLevelCost = regionInteraction.nextOutpostLevelCost.withMultiplier(regionDef.droneHubCostMultiplier);\n\n    this._researchService.addTheory('Drone Control', regionInteraction.outpostLevel * 2);\n  }\n\n  getDroneHubCost(regionId: number, planetInstanceId?: number): ResourceCollection {\n    if (!planetInstanceId) {\n      planetInstanceId = this.getSelectedPlanet().instanceId;\n    }\n\n    const region = this.getRegion(regionId, planetInstanceId);\n    const regionDef = this.getRegionDefinition(region.name);\n    const regionInteraction = this.getPlanetInteractionModel(planetInstanceId).regions.getRegion(regionId);\n    let cost = regionInteraction.nextOutpostLevelCost;\n    if (cost == null) {\n      cost = regionDef.droneHubBaseCost;\n      regionInteraction.nextOutpostLevelCost = cost;\n    }\n\n    const costReduction = Math.pow(0.95, this._researchService.getProgress('Drone Control').knowledgeLevel);\n    return regionInteraction.nextOutpostLevelCost.withMultiplier(costReduction);\n  }\n\n  getFeatureDroneSlots(feature: Feature) {\n    const featureDef = this.getFeatureDefinition(feature.name);\n    return featureDef.droneSlots;\n  }\n\n  assignDrone(feature: Feature) {\n    const regionId = feature.regionId;\n    const featureId = feature.instanceId;\n    const regions = this.getPlanetInteractionModel(feature.planetId).regions;\n    if (regions.getRegionAssignedDrones(regionId) >= regions.getRegionDroneSlots(regionId)) {return;}\n    if (regions.getFeatureAssignedDrones(regionId, featureId) >= this.getFeatureDroneSlots(feature)) {return;}\n    if (regions.getTotalAssignedDrones() >= this._resourceService.get('drones')) {return;}\n    regions.assignDrone(regionId, featureId);\n    this.regionChanged.next(this.getRegion(regionId));\n  }\n\n  unassignDrone(feature: Feature) {\n    const regionId = feature.regionId;\n    const featureId = feature.instanceId;\n    const regions = this.getPlanetInteractionModel(feature.planetId).regions;\n    if (regions.getRegionAssignedDrones(regionId) <= 0) {return;}\n    if (regions.getFeatureAssignedDrones(regionId, featureId) <= 0) {return;}\n    regions.unassignDrone(regionId, featureId);\n    this.regionChanged.next(this.getRegion(regionId));\n  }\n\n  updateInteractionModel(interactionModel: PlanetInteractionModel): void {\n    interactionModel.structures.forEach(element => {\n      element.canBuild = true;\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { RESEARCH_LIBRARY, ResearchDiscipline } from '../staticData/researchDefinitions';\nimport { UPGRADE_LIBRARY, UpgradeDefinition } from '../staticData/upgradeDefinitions';\nimport { Subject } from 'rxjs';\nimport { ResourceService } from './resource.service';\nimport { ResearchProgress } from '../models/research';\nimport { FlagsService } from './flags.service';\nimport { ActionService } from './action.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ResearchService {\n\n  researchProgress: ResearchProgress[] = [];\n  unlockedUpgrades: string[] = [];\n  completedUpgrades: string[] = [];\n\n  public onResearchUpdated: Subject<void> = new Subject();\n\n  constructor(private _flagService: FlagsService, private _resourceService: ResourceService) { }\n\n  getDiscipline(discipline: string): ResearchDiscipline {\n    return RESEARCH_LIBRARY.find(x => x.name === discipline);\n  }\n\n  getDisciplines(): ResearchDiscipline[] {\n    return RESEARCH_LIBRARY;\n  }\n\n  hasProgress(discipline: string): boolean {\n    return this.researchProgress.find(x => x.discipline === discipline) != null;\n  }\n\n  getProgress(discipline: string): ResearchProgress {\n    let progress = this.researchProgress.find(x => x.discipline === discipline);\n    if (progress != null) {return progress;}\n    progress = new ResearchProgress();\n    progress.discipline = discipline;\n    this.researchProgress.push(progress);\n    return progress;\n  }\n\n  addKnowledge(discipline: string, amount: number) {\n    const def = this.getDiscipline(discipline);\n    const progress = this.getProgress(discipline);\n    const needed = this.knowledgeNeeded(discipline);\n    progress.knowledgeProgress += amount;\n    while (progress.knowledgeProgress >= needed) {\n      progress.knowledgeProgress -= needed;\n      progress.knowledgeLevel++;\n      if (def.upgradeUnlocks.has(progress.knowledgeLevel)) {\n        this.unlockedUpgrades.push(def.upgradeUnlocks.get(progress.knowledgeLevel));\n      }\n      if (def.flagUnlocks.has(progress.knowledgeLevel)) {\n        this._flagService.set(def.upgradeUnlocks.get(progress.knowledgeLevel));\n      }\n\n      this.onResearchUpdated.next();\n    }\n\n  }\n\n  addTheory(discipline: string, amount: number) {\n    const progress = this.getProgress(discipline);\n    const needed = this.theoryNeeded(discipline);\n    progress.theoryProgress += amount;\n    while (progress.theoryProgress >= needed) {\n      progress.theoryProgress -= needed;\n      progress.theoryLevel++;\n      this.onResearchUpdated.next();\n    }\n  }\n\n  knowledgeNeeded(disciplineName: string): number {\n    const discipline = RESEARCH_LIBRARY.find(x => x.name === disciplineName);\n    if (discipline == null) {return 0;}\n    const progress = this.getProgress(disciplineName);\n    const baseCost = ResearchDiscipline.baseKnowledgeCost * discipline.baseCostMultiplier;\n    const costExponent = ResearchDiscipline.knowledgeExpCost * discipline.compoundingCostMultiplier;\n    return baseCost * Math.pow(costExponent, progress.knowledgeLevel);\n  }\n\n  theoryNeeded(disciplineName: string): number {\n    return ResearchDiscipline.baseTheoryCost;\n  }\n\n  theoryBonus(discipline: string): number {\n    const progress = this.getProgress(discipline);\n    return Math.pow(2, progress.theoryLevel);\n  }\n\n  isUpgradeCompleted(upgrade: string) {\n    return this.completedUpgrades.some(x => x === upgrade);\n  }\n\n  areUpgradesCompleted(upgrades: string[]) {\n    let completed = true;\n    upgrades.forEach(upgrade => {\n      completed = completed && this.isUpgradeCompleted(upgrade);\n    });\n    return completed;\n  }\n\n  getAvailableUpgrades(): string[] {\n    return this.unlockedUpgrades;\n  }\n\n  getCompletedUpgrades(): string[] {\n    return this.completedUpgrades;\n  }\n\n  getUpgradeDefinition(upgrade: string): UpgradeDefinition {\n    let def = UPGRADE_LIBRARY.find(x => x.name === upgrade);\n    if (def == null) {\n      def = new UpgradeDefinition(upgrade, 'MISSING');\n      UPGRADE_LIBRARY.push(def);\n    }\n    return def;\n  }\n\n  getNextLevelWithAdvancement(discipline: string): number {\n    const disc = this.getDiscipline(discipline);\n    const currLevel = this.getProgress(discipline).knowledgeLevel;\n    let nextLv = 0;\n    disc.upgradeUnlocks.forEach((name, lv) => {\n      if (lv <= currLevel) {return;}\n      if (nextLv == 0 || lv < nextLv) {\n        nextLv = lv;\n      }\n    });\n    disc.flagUnlocks.forEach((name, lv) => {\n      if (lv <= currLevel) {return;}\n      if (nextLv == 0 || lv < nextLv) {\n        nextLv = lv;\n      }\n    });\n    return nextLv;\n  }\n\n  buyUpgrade(upgrade: string): boolean {\n    const def = this.getUpgradeDefinition(upgrade);\n    const upgradeCost = def.cost;\n    let result = false;\n    if (!this.completedUpgrades.some(x => x === upgrade)) {\n      const spentResourcesSuccessfully = this._resourceService.spend(upgradeCost);\n      if (spentResourcesSuccessfully) {\n        result = true;\n        const unlockIndex = this.unlockedUpgrades.indexOf(upgrade);\n        if (unlockIndex > -1) {this.unlockedUpgrades.splice(unlockIndex, 1);}\n        this.completedUpgrades.push(upgrade);\n      }\n    }\n    this.onResearchUpdated.next();\n    return result;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Resource, ResourceCollection } from '../models/resource';\nimport { TimeService } from './time.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ResourceService {\n\n  public globalResources: ResourceCollection = new ResourceCollection();\n  public discoveredResources: string[] = [];\n  public energyRate = 0.45;\n\n  constructor(private _timeService: TimeService) { }\n\n  init() {\n    this._timeService.tick.subscribe(x => this.update(x));\n  }\n\n  update(dt: number) {\n    this.globalResources.resources.forEach(element => {\n      if (!this.discoveredResources.includes(element.resource) && this.globalResources.has(element.resource)) {\n        this.discoveredResources.push(element.resource);\n      }\n    });\n  }\n\n  get(resource: string): number {\n    return this.globalResources.getAmount(resource);\n  }\n\n  getMax(resource: string): number {\n    return this.globalResources.getMax(resource);\n  }\n\n  getProduction(resource: string): number {\n    return this.globalResources.getProduction(resource);\n  }\n\n  getConsumption(resource: string): number {\n    return this.globalResources.getConsumption(resource);\n  }\n\n  canAfford(resources: Resource | ResourceCollection): boolean {\n    let result = true;\n    if (resources instanceof Resource) {\n      return this.globalResources.has(resources.resource, resources.amount);\n    }\n    resources.resources.forEach(element => {\n      if (!this.globalResources.has(element.resource, element.amount)) {\n        result = false;\n      }\n    });\n    return result;\n  }\n\n  spend(resources: Resource | ResourceCollection): boolean {\n    let couldAfford = true;\n    if (resources instanceof Resource) {\n      return this.globalResources.remove(resources.resource, resources.amount);\n    }\n    if (!this.canAfford(resources)) { return false; }\n    couldAfford = this.globalResources.removeCollection(resources);\n    return couldAfford;\n  }\n\n  addMax(resource: string, amount: number) {\n    const currentMax = this.globalResources.getMax(resource);\n    this.globalResources.setMax(resource, currentMax + amount);\n  }\n\n  addEnergyRate(amount: number) {\n    this.energyRate += amount;\n  }\n\n  isDiscovered(resource: string): boolean {\n    return this.discoveredResources.includes(resource);\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { ResourceService } from './resource.service';\nimport { TimeService } from './time.service';\nimport { PlanetService } from './planet.service';\nimport { STRUCTURE_LIBRARY } from '../staticData/structureDefinitions';\nimport { Structure, RegionInteraction, FeatureInteraction } from '../models/planetInteractionModel';\nimport { ResourceCollection } from '../models/resource';\nimport { Feature, Region } from '../models/planet';\nimport { EXPLOIT_LIBRARY } from '../staticData/exploitDefinitions';\nimport { FEATURE_LIBRARY } from '../staticData/featureDefinitions';\nimport { BaseProductionEffect, BaseConsumptionEffect, Effect } from '../staticData/effectDefinitions';\nimport { ResearchService } from './research.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SimulationService {\n\n  constructor(private _researchService: ResearchService, private _resourceService: ResourceService, private _timeService: TimeService, private _planetService: PlanetService) { }\n\n  init() {\n    this._timeService.tick.subscribe(x => this.update(x));\n\n    this._resourceService.globalResources.setMax('drones', 50);\n    //this._resourceService.globalResources.setMax('metal', 500);\n    //this._resourceService.globalResources.setMax('rareMetal', 500);\n    //this._resourceService.globalResources.setMax('silicate', 500);\n    //this._resourceService.globalResources.setMax('hydrocarbon', 500);\n    //this._resourceService.globalResources.setMax('duranium', 500);\n\n    this._resourceService.globalResources.setMax('energy', 10);\n    this._resourceService.globalResources.add('energy', 10);\n\n    this._resourceService.globalResources.add('metal', 5);\n\n    //this._resourceService.globalResources.add('drones', 50);\n    //this._resourceService.globalResources.add('metal', 5000);\n    //this._resourceService.globalResources.add('silicate', 5000);\n    //this._resourceService.globalResources.add('rareMetal', 5000);\n    //this._resourceService.globalResources.add('hydrocarbon', 5000);\n    //this._resourceService.globalResources.add('nanochips', 5000);\n  }\n\n  reset() {\n\n  }\n\n  update(dT: number) {\n    const globalResources = this._resourceService.globalResources;\n    globalResources.resetRates();\n    const system = this._planetService.getCurrentSystem();\n    system.forEach(planet => {\n      this.updatePlanet(dT, planet.instanceId);\n    });\n    this.updateEnergy(dT);\n  }\n\n  private updateEnergy(dT: number) {\n    let rate = this._resourceService.energyRate;\n    rate += rate * this._researchService.getProgress('Power Systems').knowledgeLevel * 0.2;\n    this._resourceService.globalResources.add('energy', rate * (dT/1000));\n  }\n\n  private updatePlanet(dT: number, instanceId: number) {\n    this.updateLocalPlanetProductionRates(instanceId);\n    this.addNetLocalProductionRatesToGlobalProductionRates(instanceId);\n    this.runPlanetProduction(dT, instanceId);\n  }\n\n  private updateLocalPlanetProductionRates(instanceId: number) {\n    const regions = this._planetService.getPlanet(instanceId).regions;\n    const interactionModel = this._planetService.getPlanetInteractionModel(instanceId);\n    interactionModel.localResources.resetRates();\n    const regionInteractions = interactionModel.regions;\n    regionInteractions.regions.forEach(regionInteraction => {\n      const region = regions.find(x => x.instanceId === regionInteraction.regionInstanceId);\n      if (regionInteraction.surveyLevel == 0) {return;}\n      regionInteraction.features.forEach(featureInteraction => {\n        const feature = region.features.find(x => x.instanceId === featureInteraction.featureInstanceId);\n        if (feature.hiddenBehindSurvey > regionInteraction.surveyLevel) {return;}\n        const assignedDrones = featureInteraction.assignedDrones;\n        this.updateFeatureProductionRate(feature, featureInteraction, assignedDrones, interactionModel.localResources);\n      });\n    });\n\n    interactionModel.structures.forEach(structure => {\n      this.updateStructureProductionRate(structure, interactionModel.localResources);\n    });\n    interactionModel.structures.forEach(structure => {\n      this.updateStructureConsumptionRate(structure, interactionModel.localResources);\n    });\n  }\n\n  private updateFeatureProductionRate(feature: Feature, featureInteraction: FeatureInteraction,\n                                      assignedDrones: number, resources: ResourceCollection) {\n    const def = FEATURE_LIBRARY.find(x => feature.name === x.name);\n    let droneRate = 0.05;\n    if (this._researchService.isUpgradeCompleted('Bandwidth Multiplexing')) {\n      droneRate += 0.10;\n    }\n    if (this._researchService.isUpgradeCompleted('Adaptive Tooling')) {\n      droneRate += 0.15;\n    }\n    if (this._researchService.isUpgradeCompleted('Heuristic Processors')) {\n      droneRate += 0.30;\n    }\n    const researchMultiplier = 1 + (this._researchService.getProgress('Resource Exploitation').knowledgeLevel * 0.1);\n    if (def.hasGather && assignedDrones > 0) {\n      def.gatherRates.resources.forEach(x => {\n        resources.addProductionRate(x.resource, x.amount * assignedDrones * droneRate * researchMultiplier);\n      });\n    }\n\n    def.effects.forEach(e => {\n      if (e instanceof BaseProductionEffect) {\n        resources.addProductionRate(e.resource, e.amount);\n      }\n      if (e instanceof BaseConsumptionEffect) {\n        resources.addConsumptionRate(e.resource, e.amount);\n      }\n    })\n  }\n\n  private getActiveEffectsForRegion(region: Region, regionInteraction: RegionInteraction): Effect[] {\n    let result: Effect[] = [];\n    region.features.forEach(feature => {\n      const featureDef = FEATURE_LIBRARY.find(x => feature.name === x.name);\n      result = result.concat(featureDef.effects);\n    });\n    return result;\n  }\n\n  private updateStructureProductionRate(structure: Structure, resources: ResourceCollection) {\n    const structureDef = STRUCTURE_LIBRARY.find(x => x.name === structure.name);\n    structureDef.effects.forEach(element => {\n      if (element instanceof BaseProductionEffect) {\n        const resourceGen = (element as BaseProductionEffect);\n        resources.addProductionRate(resourceGen.resource, resourceGen.amount * structure.active);\n      }\n    });\n  }\n\n  // Adds resource consumption to local resources.\n  // If consumption ends up higher than production, spend from global stockpile to make it up.\n  // If we can't, power down to a sustainable number of buildings.\n  private updateStructureConsumptionRate(structure: Structure, resources: ResourceCollection) {\n    const structureDef = STRUCTURE_LIBRARY.find(x => x.name === structure.name);\n\n    const currentActive = structure.active;\n    let finalActive = structure.active;\n    const consumption = new ResourceCollection();\n\n    // Add all possible consumption, but move finalActive down to the max sustainable amount of active structures\n    structureDef.effects.forEach(element => {\n      if (element instanceof BaseConsumptionEffect) {\n        const resource = (element as BaseConsumptionEffect).resource;\n        const amountPerActive = (element as BaseConsumptionEffect).amount;\n        const consumeRate = amountPerActive * currentActive;\n        consumption.add(resource, consumeRate);\n        const prodRate = resources.getNetProduction(resource);\n        const stock = this._resourceService.globalResources.getAmount(resource);\n        if (prodRate + stock < consumeRate) {\n          const deficit = consumeRate - (prodRate + stock);\n          const deficitBldgs = Math.ceil(deficit / amountPerActive);\n          finalActive = Math.min(finalActive, currentActive - deficitBldgs);\n        }\n      }\n    });\n\n    // If we ended up needing to power down structures, power them down and reduce consumption accordingly\n    if (finalActive < currentActive) {\n      structure.active = finalActive;\n      structureDef.effects.forEach(element => {\n        const resource = (element as BaseConsumptionEffect).resource;\n        const amountPerActive = (element as BaseConsumptionEffect).amount;\n        consumption.remove(resource, amountPerActive * (currentActive - finalActive));\n      });\n    }\n\n    consumption.resources.forEach(resource => {\n      resources.addConsumptionRate(resource.resource, resource.amount);\n    });\n  }\n\n  private addNetLocalProductionRatesToGlobalProductionRates(instanceId: number) {\n    const interactionModel = this._planetService.getPlanetInteractionModel(instanceId);\n    interactionModel.localResources.resources.forEach(resource => {\n      this._resourceService.globalResources.addProductionRate(resource.resource, resource.productionRate);\n    });\n  }\n\n  private runPlanetProduction(dT: number, instanceId: number) {\n    const interactionModel = this._planetService.getPlanetInteractionModel(instanceId);\n    interactionModel.localResources.resources.forEach(resource => {\n      if (resource.isPower()) { return; }\n      const production = resource.getNetProductionRate();\n      if (production > 0) {\n        this._resourceService.globalResources.add(resource.resource, production * (dT / 1000));\n      } else {\n        this._resourceService.globalResources.remove(resource.resource, Math.abs(production * (dT / 1000)));\n      }\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ResearchService } from './research.service';\nimport { Task, SurveyTask, ResearchTask, FeatureTask } from '../models/task';\nimport { TimeService } from './time.service';\nimport { PlanetService } from './planet.service';\nimport { FeatureAction } from '../staticData/actionDefinitions';\nimport { ActionService } from './action.service';\nimport { Feature } from '../models/planet';\nimport { ResearchDiscipline } from '../staticData/researchDefinitions';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TaskService {\n\n  _currentTask: Task = null;\n\n  constructor(private _actionService: ActionService, private _planetService: PlanetService, private _researchService: ResearchService, private _timeService: TimeService) { }\n\n  init() {\n    this._timeService.tick.subscribe(x => this.update(x));\n  }\n\n  public getCurrentTask(): Task {\n    return this._currentTask;\n  }\n\n  public clearTask() {\n    this._currentTask = null;\n  }\n\n  public beginTask(task: Task) {\n    this._currentTask = task;\n  }\n\n  public beginFeatureTask(feature: Feature, taskName: string) {\n    const featureDef = this._planetService.getFeatureDefinition(feature.name);\n    const featureInteraction = this._planetService.getPlanetInteractionModel(feature.planetId)\n                                    .regions.getFeature(feature.regionId, feature.instanceId);\n    const taskDef = featureDef.tasks.find(x => x.name === taskName);\n    let taskInstance = featureInteraction.tasks.find(x => x.name === taskName);\n    if (taskInstance == null) {\n      taskInstance = new FeatureTask();\n      taskInstance.name = taskDef.name;\n      taskInstance.needed = taskDef.needed;\n      taskInstance.definition = taskDef;\n      taskInstance.planetId = feature.planetId;\n      taskInstance.regionId = feature.regionId;\n      taskInstance.featureId = feature.instanceId;\n      taskInstance.progress = 0;\n      featureInteraction.tasks.push(taskInstance);\n    }\n    this.beginTask(taskInstance);\n    this._planetService.regionChanged.next(this._planetService.getRegion(feature.regionId, feature.planetId));\n  }\n\n  public beginSurvey(planetId: number, regionId: number) {\n    const region = this._planetService.getRegion(regionId, planetId);\n    const surveyTask = new SurveyTask();\n    surveyTask.name = \"Surveying \" + region.name;\n    surveyTask.planetId = planetId;\n    surveyTask.regionId = regionId;\n    surveyTask.progress = 0;\n    surveyTask.needed = 100;\n    this._currentTask = surveyTask;\n  }\n\n  public isSurveyRunning(planetId: number, regionId: number) {\n    if (this._currentTask == null || !(this._currentTask instanceof SurveyTask)) {return false;}\n    return this._currentTask.planetId == planetId && this._currentTask.regionId == regionId;\n  }\n\n  public beginResearch(discipline: string) {\n    const researchTask = new ResearchTask();\n    researchTask.name = \"Researching \" + discipline;\n    researchTask.discipline = discipline;\n    researchTask.progress = 0;\n    researchTask.needed = 100;\n    this._currentTask = researchTask;\n  }\n\n  public update(dT: number) {\n    if (this._currentTask == null) {return;}\n\n    if (this._currentTask instanceof SurveyTask) {\n      const surveyTask = this._currentTask as SurveyTask;\n      this.tickSurveyTask(surveyTask, dT);\n    }\n\n    if (this._currentTask instanceof ResearchTask) {\n      const researchTask = this._currentTask as ResearchTask;\n      this.tickResearchTask(researchTask, dT);\n    }\n\n    if (this._currentTask instanceof FeatureTask) {\n      const featureTask = this._currentTask as FeatureTask;\n      this.tickFeatureTask(featureTask, dT);\n    }\n  }\n\n  tickSurveyTask(task: SurveyTask, dT: number) {\n    const planetId = task.planetId;\n    const regionId = task.regionId;\n\n    this._planetService.surveyRegion(0.001*dT*1.32, regionId, planetId);\n    task.needed = this._planetService.getSurveyProgressNeeded(regionId, planetId);\n    task.progress = this._planetService.getPlanetInteractionModel(planetId).regions.getRegion(regionId).surveyProgress;\n  }\n\n  tickResearchTask(task: ResearchTask, dT: number) {\n    const discipline = task.discipline;\n    const theoryBonus = this._researchService.theoryBonus(discipline);\n    this._researchService.addKnowledge(discipline, ResearchDiscipline.baseResearchPerSec*theoryBonus*dT*0.001);\n    task.needed = this._researchService.knowledgeNeeded(discipline);\n    task.progress = this._researchService.getProgress(discipline).knowledgeProgress;\n  }\n\n  tickFeatureTask(task: FeatureTask, dT: number) {\n    const planetId = task.planetId;\n    const regionId = task.regionId;\n    const featureId = task.featureId;\n    task.progress += task.definition.baseRate*dT;\n    if (task.progress >= task.needed) {\n      this.completeFeatureTask(task);\n    }\n  }\n\n  completeFeatureTask(task: FeatureTask) {\n    task.definition.resultsOnComplete.forEach(action => {\n      if (action instanceof FeatureAction) {\n        (action as FeatureAction).doFeatureAction(this._actionService, this._planetService.getFeature(task.regionId, task.featureId, task.planetId));\n      }\n      else {\n        action.doAction(this._actionService);\n      }\n    });\n    if (task.definition.repeatable) {\n      task.progress = 0;\n    }\n    else {\n      this.clearTask();\n    }\n    this._planetService.regionChanged.next(this._planetService.getRegion(task.regionId, task.planetId));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, timer, interval, Subject, Subscription } from 'rxjs';\nimport { isNullOrUndefined } from 'util';\n\nconst tickRate = 100;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TimeService {\n\n  tick: Subject<number> = new Subject();\n\n  private _timerSubscription: Subscription;\n\n\n\n  constructor() { }\n\n  startGame() {\n    if (!isNullOrUndefined(this._timerSubscription)) {\n      this._timerSubscription.unsubscribe();\n    }\n    this._timerSubscription = interval(tickRate).subscribe(x => this.tick.next(tickRate));\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatGridListModule } from '@angular/material/grid-list';\nimport { MatListModule } from '@angular/material/list';\nimport { MatRadioModule } from '@angular/material/radio';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n\n@NgModule({\n  imports: [\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatCheckboxModule,\n    MatCardModule,\n    MatListModule,\n    MatGridListModule,\n    MatRadioModule,\n    MatTabsModule,\n    MatTooltipModule\n  ],\n  exports: [\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatCheckboxModule,\n    MatCardModule,\n    MatListModule,\n    MatGridListModule,\n    MatRadioModule,\n    MatTabsModule,\n    MatTooltipModule\n  ]\n})\nexport class MaterialModule { }\n","import { ResourceCollection } from \"../models/resource\";\nimport { Action, AddResourceAction, FlagAction, AddTheoryAction, AddMaxResourceAction, AddEnergyRateAction } from './actionDefinitions';\n\n\n// Defines ship abilities and feature abilities\nexport class AbilityDefinition {\n  public name: string;\n  public desc: string;\n  public cooldown: number;\n  public costs: ResourceCollection = new ResourceCollection();\n  public actions: Action[] = [];\n  public visibleFlags: string[] = [];\n  public hiddenFlag: string = '';\n  public visibleUpgrade: string = '';\n  public visibleNeededResearchName: string = '';\n  public visibleNeededResearchLevel: number = 0;\n  public researchNeeded: string = '';\n  public researchLevelNeeded: number = 0;\n  public upgradeNeeded: string = '';\n  public costScalesWithResource: string = '';\n  public costScalesWithTheory: string = '';\n  public costMultiplier: number = 2.0;\n\n  setDescription(desc: string): AbilityDefinition {\n    this.desc = desc;\n    return this;\n  }\n\n  addVisibleFlag(flag: string): AbilityDefinition {\n    this.visibleFlags.push(flag);\n    return this;\n  }\n\n  setHiddenFlag(flag: string): AbilityDefinition {\n    this.hiddenFlag = flag;\n    return this;\n  }\n\n  setVisibleUpgrade(upgrade: string): AbilityDefinition {\n    this.visibleUpgrade = upgrade;\n    return this;\n  }\n\n  setVisibleNeededResearch(discipline: string, level: number): AbilityDefinition {\n    this.visibleNeededResearchName = discipline;\n    this.visibleNeededResearchLevel = level;\n    return this;\n  }\n\n  setUpgradeNeeded(upgrade: string): AbilityDefinition {\n    this.upgradeNeeded = upgrade;\n    return this;\n  }\n\n  addCost(resource: string, amount: number): AbilityDefinition {\n    this.costs.add(resource, amount);\n    return this;\n  }\n\n  addCooldown(cooldown: number): AbilityDefinition {\n    this.cooldown = cooldown;\n    return this;\n  }\n\n  addAction(action: Action): AbilityDefinition {\n    this.actions.push(action);\n    return this;\n  }\n\n  addsMaxResource(resource: string, amount: number): AbilityDefinition {\n    const action = new AddMaxResourceAction(resource, amount);\n    this.addAction(action);\n    return this;\n  }\n\n  addsEnergyRate(amount: number): AbilityDefinition {\n    const action = new AddEnergyRateAction(amount);\n    this.addAction(action);\n    return this;\n  }\n\n  grantsResource(resource: string, amount: number): AbilityDefinition {\n    const action = new AddResourceAction(resource, amount);\n    this.addAction(action);\n    return this;\n  }\n\n  grantsTheory(discipline: string, amount: number): AbilityDefinition {\n    const action = new AddTheoryAction(discipline, amount);\n    this.addAction(action);\n    return this;\n  }\n\n  setsFlag(flag: string): AbilityDefinition {\n    const action = new FlagAction(flag);\n    this.addAction(action);\n    return this;\n  }\n\n  scalesWithTheory(discipline: string, multiplier: number): AbilityDefinition {\n    this.costScalesWithTheory = discipline;\n    this.costMultiplier = multiplier;\n    return this;\n  }\n\n  scalesWithResourceCount(resource: string, multiplier: number): AbilityDefinition {\n    this.costScalesWithResource = resource;\n    this.costMultiplier = multiplier;\n    return this;\n  }\n}\n\nexport class FeatureAbilityDefinition extends AbilityDefinition {\n  public droneHubLevelNeeded: number = 0;\n}\n\nexport class ShipAbilityDefinition extends AbilityDefinition {\n  constructor(name: string) {\n    super();\n    this.name = name;\n  }\n}\n\nexport const SHIP_ABILITY_LIBRARY: ShipAbilityDefinition[] = [\n  new ShipAbilityDefinition('Build Drone')\n  .addCost('metal', 5)\n  .addCost('energy', 1)\n  .addCooldown(1)\n  .grantsResource('drones', 1)\n  .scalesWithResourceCount('drones', 1.2),\n  new ShipAbilityDefinition('Fabricate Nanochip')\n  .addVisibleFlag('fabricatorRepaired')\n  .addCost('energy', 3)\n  .addCost('rareMetal', 0.1)\n  .addCost('silicate', 8)\n  .addCooldown(8)\n  .grantsResource('nanochips', 1),\n  new ShipAbilityDefinition('Repair Fabricator')\n  .addCost('metal', 20)\n  .addVisibleFlag('shuttleFound')\n  .setsFlag('fabricatorRepaired')\n  .setHiddenFlag('fabricatorRepaired'),\n  new ShipAbilityDefinition('Repair Survey Scanner')\n  .addCost('nanochips', 55)\n  .addVisibleFlag('computerRepaired')\n  .setsFlag('surveyRepaired')\n  .setHiddenFlag('surveyRepaired'),\n  new ShipAbilityDefinition('Repair Drone Relay')\n  .addCost('nanochips', 2)\n  .addVisibleFlag('shuttleFound')\n  .setsFlag('droneRelayRepaired')\n  .setHiddenFlag('droneRelayRepaired'),\n  new ShipAbilityDefinition('Repair Hull')\n  .addCost('silksteel', 50)\n  .setVisibleNeededResearch('Material Science', 5)\n  .setsFlag('hullRepaired')\n  .setHiddenFlag('hullRepaired'),\n  new ShipAbilityDefinition('Repair Navigation Systems')\n  .addCost('cogitex', 50)\n  .setVisibleNeededResearch('Electronics', 5)\n  .setsFlag('navRepaired')\n  .setHiddenFlag('navRepaired'),\n  new ShipAbilityDefinition('Refit Drive Core')\n  .addCost('hyperlattice', 50)\n  .setVisibleNeededResearch('Hypertopology', 1)\n  .setsFlag('driveRepaired')\n  .setHiddenFlag('driveRepaired'),\n  new ShipAbilityDefinition('Refit Inertial Dampeners')\n  .addCost('gravalloy', 50)\n  .setVisibleNeededResearch('Gravitics', 1)\n  .setsFlag('gravRepaired')\n  .setHiddenFlag('gravRepaired'),\n  new ShipAbilityDefinition('Launch Ship')\n  .addVisibleFlag('hullRepaired')\n  .addVisibleFlag('navRepaired')\n  .addVisibleFlag('driveRepaired')\n  .addVisibleFlag('gravRepaired')\n  .setsFlag('shuttleLaunched')\n  .setHiddenFlag('shuttleLaunched')\n\n];\n","import { ResourceCollection, Resource } from \"../models/resource\";\nimport { Feature } from \"../models/planet\";\nimport { ActionService } from '../services/action.service';\n\nexport abstract class Action {\n  public abstract doAction(actionService: ActionService);\n}\n\nexport class AddResourceAction extends Action {\n  public resource: Resource;\n  constructor (resource: string, amount: number) {\n    super();\n    this.resource = new Resource(resource, amount);\n  }\n\n  doAction(actionService: ActionService) {\n    actionService.addResource(this.resource);\n  }\n}\n\nexport class AddMaxResourceAction extends Action {\n  public resource: Resource;\n  constructor (resource: string, amount: number) {\n    super();\n    this.resource = new Resource(resource, amount);\n  }\n\n  doAction(actionService: ActionService) {\n    actionService.addMaxResource(this.resource);\n  }\n}\n\nexport class AddEnergyRateAction extends Action {\n  constructor (public amount: number) {\n    super();\n  }\n\n  doAction(actionService: ActionService) {\n    actionService.addEnergyRate(this.amount);\n  }\n}\n\nexport class AddTheoryAction extends Action {\n\n  constructor (public discipline: string, public amount: number) {\n    super();\n  }\n\n  doAction(actionService: ActionService) {\n    actionService.addTheory(this.discipline, this.amount);\n  }\n}\n\nexport class FlagAction extends Action {\n  public flag: string;\n  constructor (flag: string) {\n    super();\n    this.flag = flag;\n  }\n\n  doAction(actionService: ActionService) {\n    actionService.setFlag(this.flag);\n  }\n}\n\nexport abstract class FeatureAction extends Action {\n  doAction(actionService: ActionService) {};\n  public abstract doFeatureAction(actionService: ActionService, targetFeature: Feature);\n}\n\nexport class GatherFeatureAction extends FeatureAction {\n  doFeatureAction(actionService: ActionService, targetFeature: Feature) {\n    actionService.gatherFeature(targetFeature);\n  }\n}\n\nexport class TransformFeatureAction extends FeatureAction {\n  constructor(public newFeatureName: string) {\n    super();\n  }\n\n  doFeatureAction(actionService: ActionService, targetFeature: Feature) {\n    actionService.replaceFeature(targetFeature.regionId, targetFeature.instanceId, this.newFeatureName);\n  }\n}\n\nexport class RemoveFeatureAction extends FeatureAction {\n  doFeatureAction(actionService: ActionService, targetFeature: Feature) {\n    actionService.removeFeature(targetFeature);\n  }\n}\n","export class Effect {\n  public canStack = true;\n  public isGlobal = false;\n}\n\nexport class BaseProductionEffect extends Effect {\n  constructor(\n    public resource: string,\n    public amount: number\n    ) {\n      super();\n    }\n}\n\nexport class BaseConsumptionEffect extends Effect {\n  constructor(\n    public resource: string,\n    public amount: number\n  ) {\n    super();\n  }\n}\n","import { ResourceCollection } from '../models/resource';\nimport { Effect, BaseProductionEffect } from './effectDefinitions';\n\nexport class ExploitDefinition {\n  public cost: ResourceCollection = new ResourceCollection();\n  public effects: Effect[] = [];\n  constructor (\n    public name: string,\n    public description: string\n  ) {}\n\n  public addCost(resource: string, amount: number): ExploitDefinition {\n    this.cost.add(resource, amount);\n    return this;\n  }\n\n  public addEffect(bonusEffect: Effect): ExploitDefinition {\n    this.effects.push(bonusEffect);\n    return this;\n  }\n\n  public addProduction(resource: string, amount: number): ExploitDefinition {\n    const bonusEffect = new BaseProductionEffect(resource, amount*6);\n    this.effects.push(bonusEffect);\n    return this;\n  }\n\n  public getProduction(): ResourceCollection {\n    const production = new ResourceCollection();\n      this.effects.forEach(element => {\n        if (element instanceof BaseProductionEffect) {\n          const resourceGen = (element as BaseProductionEffect);\n          production.add(resourceGen.resource, resourceGen.amount);\n        }\n      });\n      return production;\n  }\n}\n\nexport const EXPLOIT_LIBRARY: ExploitDefinition[] = [\n  new ExploitDefinition('hematite mineshaft', 'extracts iron').addCost('metal', 10)\n                                                                    .addProduction('metal', 0.4),\n  new ExploitDefinition('magnetite mineshaft', 'extracts iron').addCost('metal', 20)\n                                                                    .addProduction('metal', 0.6),\n  new ExploitDefinition('corundum quarry', 'extracts minerals').addCost('metal', 75).addProduction('silicate', 0.3)\n                                                              .addProduction('metal', 0.1).addProduction('rareMetal', 0.05),\n  new ExploitDefinition('copper mineshaft', 'extracts copper').addCost('metal', 5).addProduction('metal', 0.2),\n  new ExploitDefinition('silver mineshaft', 'extracts silver').addCost('metal', 50)\n                                                              .addProduction('metal', 0.2).addProduction('rareMetal', 0.1),\n  new ExploitDefinition('gold mineshaft', 'extracts gold').addCost('metal', 50)\n                                                              .addProduction('metal', 0.3).addProduction('rareMetal', 0.2),\n  new ExploitDefinition('lignite mine', 'extracts lignite').addCost('metal', 150).addProduction('hydrocarbon', 0.4),\n  new ExploitDefinition('bitumen mine', 'extracts bitumen').addCost('metal', 150).addProduction('hydrocarbon', 0.6),\n  new ExploitDefinition('methane extractor', 'collects methane').addCost('duranium', 15)\n                                                              .addProduction('hydrocarbon', 0.5).addProduction('gas', 0.1),\n  new ExploitDefinition('energy recombiner', 'generates power').addCost('nanofiber', 10).addProduction('power', 10),\n  new ExploitDefinition('helium extractor', 'produces gases').addCost('duranium', 6).addProduction('gas', 0.5),\n  new ExploitDefinition('crawler', 'produces glittersand').addCost('nanofiber', 10).addProduction('glittersand', 0.4),\n  new ExploitDefinition('charybdin drill', 'produces charybdin').addCost('duranium', 50).addProduction('charybdin', 0.2),\n  new ExploitDefinition('synaptite scoop', 'produces synaptite').addCost('duranium', 50).addProduction('synaptite', 0.2),\n  new ExploitDefinition('dyene collector', 'produces dyene').addCost('duranium', 50).addProduction('dyene', 0.2),\n  new ExploitDefinition('oil drill', 'extracts oil').addCost('duranium', 30).addProduction('hydrocarbon', 1.4)\n];\n","import { Effect, BaseProductionEffect } from \"./effectDefinitions\";\nimport { ResourceCollection } from \"../models/resource\";\nimport { FeatureAction, TransformFeatureAction, FlagAction, AddTheoryAction, GatherFeatureAction, AddResourceAction, RemoveFeatureAction, AddMaxResourceAction } from \"./actionDefinitions\";\nimport { FeatureAbilityDefinition } from \"./abilityDefinitions\";\nimport { TaskDefinition } from './taskDefinitions';\n\nexport class FeatureDefinition {\n  public abilities: FeatureAbilityDefinition[] = [];\n  public tasks: TaskDefinition[] = [];\n  public effects: Effect[] = [];\n  public description = '';\n  public exploitName = '';\n  public droneSlots = 0;\n  public hasGather: boolean = false;\n  public gatherRates: ResourceCollection = new ResourceCollection();\n\n  constructor (\n    public name: string,\n    description?: string,\n    exploitName?: string\n  ) {\n    if (description) {\n      this.description = description;\n    }\n    if (exploitName) {\n      this.exploitName = exploitName;\n    }\n  }\n\n  public addGather(resource: string, amount: number, cooldown: number = 2.5): FeatureDefinition {\n    if (!this.hasGather) {\n      const gatherAbility = new FeatureAbilityDefinition();\n      gatherAbility.name = 'Gather';\n      gatherAbility.addAction(new GatherFeatureAction());\n      gatherAbility.addCost('energy', 3);\n      gatherAbility.addCooldown(cooldown);\n      this.abilities.push(gatherAbility);\n      this.droneSlots = 1;\n      this.hasGather = true;\n    }\n    this.gatherRates.add(resource, amount);\n    return this;\n  }\n\n  public addPower(amount: number): FeatureDefinition {\n    const powerEffect = new BaseProductionEffect('power', amount);\n    this.effects.push(powerEffect);\n    return this;\n  }\n\n  public setDescription(desc: string): FeatureDefinition {\n    this.description = desc;\n    return this;\n  }\n\n  public setDroneSlots(slots: number): FeatureDefinition {\n    this.droneSlots = slots;\n    return this;\n  }\n\n  public addAbility(name: string, costResource: string, costAmount: number): FeatureDefinition {\n    const ability = new FeatureAbilityDefinition();\n    ability.name = name;\n    if (costAmount > 0) {\n      ability.addCost(costResource, costAmount);\n    }\n    this.abilities.push(ability);\n    return this;\n  }\n\n  public addAbilityCost(abilityName: string, costResource: string, costAmount: number): FeatureDefinition {\n    const ability = this.abilities.find(x => x.name === abilityName);\n    ability.addCost(costResource, costAmount);\n    return this;\n  }\n\n  public abilityVisibleUpgrade(abilityName: string, upgrade: string): FeatureDefinition {\n    const ability = this.abilities.find(x => x.name === abilityName);\n    ability.setVisibleUpgrade(upgrade);\n    return this;\n  }\n\n  public abilityNeedsUpgrade(abilityName: string, upgrade: string): FeatureDefinition {\n    const ability = this.abilities.find(x => x.name === abilityName);\n    ability.setUpgradeNeeded(upgrade);\n    return this;\n  }\n\n  public abilityNeedsDroneHub(abilityName: string, level: number = 1): FeatureDefinition {\n    const ability = this.abilities.find(x => x.name === abilityName);\n    ability.droneHubLevelNeeded = level;\n    return this;\n  }\n\n  public addResourceAction(triggerAbilityName: string, resource: string, amount: number): FeatureDefinition {\n    const action = new AddResourceAction(resource, amount);\n    const ability = this.abilities.find(x => x.name === triggerAbilityName);\n    ability.addAction(action);\n    return this;\n  }\n\n  public addMaxResourceAction(triggerAbilityName: string, resource: string, amount: number): FeatureDefinition {\n    const action = new AddMaxResourceAction(resource, amount);\n    const ability = this.abilities.find(x => x.name === triggerAbilityName);\n    ability.addAction(action);\n    return this;\n  }\n\n  public addResearchAction(triggerAbilityName: string, discipline: string, amount: number): FeatureDefinition {\n    const action = new AddTheoryAction(discipline, amount);\n    const ability = this.abilities.find(x => x.name === triggerAbilityName);\n    ability.addAction(action);\n    return this;\n  }\n\n  public addTransformAction(triggerAbilityName: string, newFeatureName: string): FeatureDefinition {\n    const action = new TransformFeatureAction(newFeatureName);\n    const ability = this.abilities.find(x => x.name === triggerAbilityName);\n    ability.addAction(action);\n    return this;\n  }\n\n  public addFlagAction(triggerAbilityName: string, flagName: string): FeatureDefinition {\n    const action = new FlagAction(flagName);\n    const ability = this.abilities.find(x => x.name === triggerAbilityName);\n    ability.addAction(action);\n    return this;\n  }\n\n  public addRemoveFeatureAction(triggerAbilityName: string): FeatureDefinition {\n    const action = new RemoveFeatureAction();\n    const ability = this.abilities.find(x => x.name === triggerAbilityName);\n    ability.addAction(action);\n    return this;\n  }\n\n  public addTask(name: string, needed: number): FeatureDefinition {\n    const task = new TaskDefinition(name, needed);\n    this.tasks.push(task);\n    return this;\n  }\n\n  public addTaskResearchResult(taskName: string, discipline: string, amount: number): FeatureDefinition {\n    const task = this.tasks.find(x => x.name === taskName);\n    const action = new AddTheoryAction(discipline, amount);\n    task.resultsOnComplete.push(action);\n    return this;\n  }\n\n  public addTaskTransformResult(taskName: string, newFeatureName: string): FeatureDefinition {\n    const task = this.tasks.find(x => x.name === taskName);\n    const action = new TransformFeatureAction(newFeatureName);\n    task.resultsOnComplete.push(action);\n    return this;\n  }\n\n  public addTaskRemoveResult(taskName: string): FeatureDefinition {\n    const task = this.tasks.find(x => x.name === taskName);\n    const action = new RemoveFeatureAction();\n    task.resultsOnComplete.push(action);\n    return this;\n  }\n}\n\nexport const FEATURE_LIBRARY: FeatureDefinition[] = [\n  new FeatureDefinition('crater',\n    'A crater in the distance appears to have been recently made.')\n    .addAbility('Search', 'drones', 1)\n    .addTransformAction('Search', 'crashed shuttle')\n    .addMaxResourceAction('Search', 'energy', 5)\n    .addFlagAction('Search', 'shuttleFound'),\n  new FeatureDefinition('crashed shuttle',\n    'The ship\\'s reserve power is still functioning, along with basic fabrication systems.  It may be possible to repair the computer.')\n    .addPower(5)\n    .addAbility('Repair Computer', 'nanochips', 5)\n    .addAbilityCost('Repair Computer', 'metal', 100)\n    .addTransformAction('Repair Computer', 'downed shuttle')\n    .addFlagAction('Repair Computer', 'computerRepaired')\n    .addFlagAction('Repair Computer', 'showResearchTab'),\n  new FeatureDefinition('downed shuttle',\n    'With core systems repaired, the shuttle may be able to reach space with the help of a launch facility.')\n    .addPower(5),\n\n  new FeatureDefinition('wrecked hull plating',\n    'This shredded plating is mostly useless, but some metals can be extracted from the remains.')\n    .addAbility('Salvage', 'drones', 2)\n    .addResourceAction('Salvage', 'metal', 50)\n    .addResearchAction('Salvage', 'Material Science', 20)\n    .addRemoveFeatureAction('Salvage'),\n  new FeatureDefinition('corrupted databank',\n    'Any data this may have contained is irretrievable, but the components could be salvaged.')\n    .addAbility('Salvage', 'drones', 2)\n    .addAbilityCost('Salvage', 'nanochips', 1)\n    .addResourceAction('Salvage', 'nanochips', 8)\n    .addResearchAction('Salvage', 'Electronics', 20)\n    .addRemoveFeatureAction('Salvage'),\n  new FeatureDefinition('waterlogged processing unit',\n    'Seawater has destroyed most of the more delicate circuits, but some could be recovered.')\n    .addAbility('Salvage', 'drones', 4)\n    .abilityNeedsUpgrade('Salvage', 'Hydrophobic Alloys')\n    .addResourceAction('Salvage', 'nanochips', 47)\n    .addResearchAction('Salvage', 'Electronics', 20)\n    .addRemoveFeatureAction('Salvage'),\n\n  new FeatureDefinition('tectonic activity',\n    'The geologic activity in this area could provide insight into new survey techniques.')\n    .addTask('Study', 100)\n    .addTaskResearchResult('Study', 'Planetary Survey', 20)\n    .addTaskRemoveResult('Study'),\n  new FeatureDefinition('resonance field',\n    'Electromagnetic signals in this area are distorted and re-broadcast.  This effect could enhance drone control signals.')\n    .addTask('Study', 100)\n    .addTaskResearchResult('Study', 'Drone Control', 20)\n    .addTaskRemoveResult('Study'),\n  new FeatureDefinition('energy signature',\n    'Energy readings in this area are inconsistent with the rest of the region.')\n    .addTask('Study', 100)\n    .addTaskResearchResult('Study', 'Power Systems', 20)\n    .addTaskRemoveResult('Study'),\n  new FeatureDefinition('electric storm',\n    'A powerful storm is creating electromagnetic interference in a wide area.')\n    .addTask('Study', 120)\n    .addTaskResearchResult('Study', 'Power Systems', 20)\n    .addTaskRemoveResult('Study'),\n  new FeatureDefinition('graviton emissions',\n    'Scanners are picking up faint graviton emissions inconsistent with the planet\\'s mass.')\n    .addTask('Study', 150)\n    .addTaskResearchResult('Study', 'Gravitics', 20)\n    .addTaskRemoveResult('Study'),\n  new FeatureDefinition('spatial distortion',\n    'An anomalous force is causing disruptions in local spacetime.')\n    .addTask('Study', 150)\n    .addTaskResearchResult('Study', 'Hypertopology', 20)\n    .addTaskRemoveResult('Study'),\n\n  new FeatureDefinition('energy cell',\n    'A mostly intact energy storage cell.  This could be refurbished and put to use.')\n    .addAbility('Repair', 'drones', 5)\n    .addAbilityCost('Repair', 'nanochips', 15)\n    .addMaxResourceAction('Repair', 'energy', 5)\n    .addResearchAction('Repair', 'Power Systems', 20)\n    .addRemoveFeatureAction('Repair'),\n\n  new FeatureDefinition('hematite deposit', 'A deposit of the iron-rich mineral hematite.')\n  .addGather('metal', 18, 30)\n  .addAbility('Build Mine', 'metal', 50)\n  .addTransformAction('Build Mine', 'hematite mineshaft')\n  .addResearchAction('Build Mine', 'Resource Exploitation', 5)\n  .abilityVisibleUpgrade('Build Mine', 'Mineral Extraction'),\n  new FeatureDefinition('hematite mineshaft', 'A mineshaft built on a hematite deposit.')\n  .addGather('metal', 74, 30)\n  .setDroneSlots(6),\n\n  new FeatureDefinition('magnetite deposit', 'A deposit of the iron-rich mineral magnetite.')\n  .addGather('metal', 26, 45)\n  .addAbility('Build Mine', 'metal', 50)\n  .addTransformAction('Build Mine', 'hematite mineshaft')\n  .addResearchAction('Build Mine', 'Resource Exploitation', 5)\n  .abilityVisibleUpgrade('Build Mine', 'Mineral Extraction'),\n  new FeatureDefinition('hematite mineshaft', 'A mineshaft built on a hematite deposit.')\n  .addGather('metal', 120, 45)\n  .setDroneSlots(8),\n\n  new FeatureDefinition('copper deposit', 'A native deposit of metallic copper.')\n  .addGather('metal', 2)\n  .addAbility('Build Mine', 'metal', 50)\n  .addTransformAction('Build Mine', 'copper mineshaft')\n  .addResearchAction('Build Mine', 'Resource Exploitation', 5)\n  .abilityVisibleUpgrade('Build Mine', 'Mineral Extraction'),\n  new FeatureDefinition('copper mineshaft', 'A mineshaft built on a copper deposit.')\n  .addGather('metal', 4)\n  .setDroneSlots(4),\n\n  new FeatureDefinition('silver vein', 'A native deposit of metallic silver.')\n  .addGather('metal', 14, 12)\n  .addGather('rareMetal', 0.12)\n  .addAbility('Build Mine', 'metal', 250)\n  .addTransformAction('Build Mine', 'silver mineshaft')\n  .addResearchAction('Build Mine', 'Resource Exploitation', 5)\n  .abilityVisibleUpgrade('Build Mine', 'Mineral Extraction'),\n  new FeatureDefinition('silver mineshaft', 'A mineshaft built on a silver vein.')\n  .addGather('metal', 20)\n  .addGather('rareMetal', 1)\n  .setDroneSlots(4),\n\n  new FeatureDefinition('corundum deposit', 'A deposit of the semi-precious crystalline mineral corundum.')\n  .addGather('silicate', 6)\n  .addAbility('Build Mine', 'metal', 150)\n  .addTransformAction('Build Mine', 'corundum quarry')\n  .addResearchAction('Build Mine', 'Resource Exploitation', 5)\n  .abilityVisibleUpgrade('Build Mine', 'Mineral Extraction'),\n  new FeatureDefinition('corundum quarry', 'A quarry for collecting minerals from a corundum deposit.')\n  .addGather('silicate', 30)\n  .setDroneSlots(6),\n\n  new FeatureDefinition('gold vein', 'A native deposit of metallic gold.')\n  .addGather('metal', 18, 14)\n  .addGather('rareMetal', 0.18)\n  .addAbility('Build Mine', 'metal', 350)\n  .addTransformAction('Build Mine', 'gold mineshaft')\n  .addResearchAction('Build Mine', 'Resource Exploitation', 5)\n  .abilityVisibleUpgrade('Build Mine', 'Mineral Extraction'),\n  new FeatureDefinition('gold mineshaft', 'A mineshaft built on a gold vein.')\n  .addGather('metal', 24)\n  .addGather('rareMetal', 1.5)\n  .setDroneSlots(8),\n\n  new FeatureDefinition('lignite deposit',\n                        'A deposit of lignite, a carbon-rich rock formed from long-decayed organic matter.')\n  .addGather('hydrocarbon', 3, 6)\n  .addAbility('Build Mine', 'metal', 150)\n  .addTransformAction('Build Mine', 'lignite mineshaft')\n  .addResearchAction('Build Mine', 'Resource Exploitation', 5)\n  .abilityVisibleUpgrade('Build Mine', 'Mineral Extraction'),\n  new FeatureDefinition('lignite mineshaft', 'A mineshaft built on a lignite deposit.')\n  .addGather('hydrocarbon', 15, 6)\n  .setDroneSlots(4),\n\n  new FeatureDefinition('bitumen deposit',\n                        'A deposit of bitumen, a carbon-rich rock formed from long-decayed organic matter.')\n  .addGather('hydrocarbon', 5, 12)\n  .addAbility('Build Mine', 'metal', 275)\n  .addTransformAction('Build Mine', 'bitumen mineshaft')\n  .addResearchAction('Build Mine', 'Resource Exploitation', 5)\n  .abilityVisibleUpgrade('Build Mine', 'Mineral Extraction'),\n  new FeatureDefinition('bitumen mineshaft', 'A mineshaft built on a bitumen deposit.')\n  .addGather('hydrocarbon', 28, 12)\n  .setDroneSlots(6),\n\n  new FeatureDefinition('methane vent',\n                        'The ground here emits methane, a simple gaseous hydrocarbon that can be used as fuel or in chemical engineering,' +\n                        'as well as small amounts of other gases.')\n  .addAbility('Build Extractor', 'duranium', 25)\n  .addTransformAction('Build Extractor', 'methane extractor')\n  .addResearchAction('Build Extractor', 'Resource Exploitation', 5)\n  .abilityVisibleUpgrade('Build Extractor', 'Gas Extraction'),\n  new FeatureDefinition('methane extractor', 'Extracts methane and refines it into hydrocarbons.')\n  .addGather('hydrocarbon', 6, 50)\n  .setDroneSlots(15),\n\n  new FeatureDefinition('glittersand spout',\n                        'An unknown process, either geologic or organic, causes glittersand to erupt from the desert\\'s depths at semi-regular intervals')\n  .addAbility('Build Crawler', 'duranium', 250)\n  .addTransformAction('Build Crawler', 'glittersand crawler')\n  .addResearchAction('Build Crawler', 'Resource Extraction', 10)\n  .abilityVisibleUpgrade('Build Crawler', 'Particulate Enrichment'),\n  new FeatureDefinition('glittersand crawler', 'Harvests glittersand from desert spouts.')\n  .addGather('glittersand', 5, 50)\n  .setDroneSlots(12),\n\n  new FeatureDefinition('helium clathrates',\n                        'The ice here has formed tight crystals which trap molecules of helium within their structure.')\n  .addAbility('Build Extractor', 'duranium', 150)\n  .addTransformAction('Build Extractor', 'helium extractor')\n  .addResearchAction('Build Extractor', 'Resource Exploitation', 5)\n  .abilityVisibleUpgrade('Build Extractor', 'Clathrate Extraction'),\n  new FeatureDefinition('helium extractor', 'Extracts helium from ice fields.')\n  .addGather('gas', 6, 50)\n  .setDroneSlots(15),\n\n  new FeatureDefinition('argon clathrates',\n                        'The ice here has formed tight crystals which trap molecules of argon within their structure.')\n  .addAbility('Build Extractor', 'duranium', 250)\n  .addTransformAction('Build Extractor', 'argon extractor')\n  .addResearchAction('Build Extractor', 'Resource Exploitation', 5)\n  .abilityVisibleUpgrade('Build Extractor', 'Clathrate Extraction'),\n  new FeatureDefinition('argon extractor', 'Extracts argon from ice fields.')\n  .addGather('gas', 15, 50)\n  .setDroneSlots(18),\n\n  new FeatureDefinition('charybdin crystals',\n                        'Scans of this deep-sea mineral indicate its structure extends beyond three-dimensional space.')\n  .addAbility('Drill', 'silksteel', 150)\n  .addTransformAction('Drill', 'charybdin drill')\n  .addResearchAction('Drill', 'Resource Exploitation', 25)\n  .abilityVisibleUpgrade('Drill', 'Crystal Extraction'),\n  new FeatureDefinition('charybdin drill', 'Extracts charybdin from deep undersea crystals.')\n  .addGather('charybdin', 4, 90)\n  .setDroneSlots(8),\n\n  new FeatureDefinition('porphyritic synaptite',\n                        'Tiny sparks of current run across the surface of this luminous mineral')\n  .addAbility('Build Scoop', 'nanofiber', 150)\n  .addTransformAction('Build Scoop', 'synaptite scoop')\n  .addResearchAction('Build Scoop', 'Resource Exploitation', 25)\n  .abilityVisibleUpgrade('Build Scoop', 'Crystal Extraction'),\n  new FeatureDefinition('synaptite scoop', 'An intricate device for extracting synaptite without damaging its delicate subatomic structure.')\n  .addGather('synaptite', 4, 90)\n  .setDroneSlots(8),\n\n  new FeatureDefinition('dyene cluster',\n                        'This brittle material gives off a weak field which interferes with elementary particles.', 'dyene collector')\n  .addAbility('Build Collector', 'optronics', 150)\n  .addTransformAction('Build Collector', 'dyene collector')\n  .addResearchAction('Build Collector', 'Resource Exploitation', 25)\n  .abilityVisibleUpgrade('Build Collector', 'Crystal Extraction'),\n  new FeatureDefinition('dyene collector', 'Provides drones with the necessary telemetry to extract dyene.')\n  .addGather('dyene', 4, 90)\n  .setDroneSlots(8),\n\n  new FeatureDefinition('oil field',\n                        'An underground deposit of crude oil - a liquid mixture of complex hydrocarbons with a variety of industrial uses.')\n  .addAbility('Drill Well', 'duranium', 50)\n  .addTransformAction('Drill Well', 'oil well')\n  .addResearchAction('Drill Well', 'Resource Exploitation', 5)\n  .abilityVisibleUpgrade('Drill Well', 'Liquid Extraction'),\n  new FeatureDefinition('undersea oil field',\n                        'A rich deposit of oil, deep under the ocean.')\n  .addAbility('Drill Well', 'nanofiber', 50)\n  .addTransformAction('Drill Well', 'oil well')\n  .addResearchAction('Drill Well', 'Resource Exploitation', 5)\n  .abilityVisibleUpgrade('Drill Well', 'Liquid Extraction'),\n  new FeatureDefinition('oil well',\n                        'Extracts oil.')\n  .addGather('hydrocarbon', 7)\n  .setDroneSlots(8)\n];\n","import { ResourceCollection, Resource } from \"../models/resource\";\n\nexport class OutpostDefinition {\n  levels: OutpostLevelDefinition[] = [];\n\n  constructor(public planetType: string) { }\n\n  public getLevel(level: number): OutpostLevelDefinition {\n    return this.levels.find(x => x.level === level);\n  }\n\n  public addLevel(level: number, name: string): OutpostDefinition {\n    this.levels.push(new OutpostLevelDefinition(level, name));\n    return this;\n  }\n\n  public addCost(level: number, resource: string, amount: number): OutpostDefinition {\n    const levelDef = this.getLevel(level);\n    levelDef.cost.add(resource, amount);\n    return this;\n  }\n\n  public addPrerequisite(level: number, researchNeeded: string): OutpostDefinition {\n    const levelDef = this.getLevel(level);\n    levelDef.researchNeeded = researchNeeded;\n    return this;\n  }\n\n  public setDroneCapacity(level: number, capacity: number): OutpostDefinition {\n    const levelDef = this.getLevel(level);\n    levelDef.droneCapacity = capacity;\n    return this;\n  }\n}\n\nexport class OutpostLevelDefinition {\n  public cost: ResourceCollection = new ResourceCollection();\n  public researchNeeded = '';\n  public droneCapacity = 0;\n\n  constructor(public level: number, public name: string) { }\n}\n\nexport const OUTPOST_LIBRARY: OutpostDefinition[] = [\n  new OutpostDefinition('temperate')\n      .addLevel(1, 'Survival Outpost').addCost(1, 'metal', 10).setDroneCapacity(1, 10)\n      .addLevel(2, 'Command Hub').addCost(2, 'optronics', 20).addCost(2, 'nanofiber', 50)\n      .setDroneCapacity(2, 100)\n      .addLevel(3, 'Launch Complex').addCost(3, 'silksteel', 100).setDroneCapacity(3, 500)\n];\n","import { ResourceCollection } from '../models/resource';\n\nexport class InfrastructureDefinition {\n\n  public description = '';\n  public tech = '';\n  public cost = new ResourceCollection();\n\n  constructor(\n    public name: string\n  ) { }\n}\n\nexport class RegionDefinition {\n\n  public description = '';\n  public surveyUpgradeNeeded = '';\n  public surveyBaseCost: number = 25;\n  public surveyCostMultiplier: number = 1.8;\n  public droneHubBaseCost: ResourceCollection = new ResourceCollection();\n  public droneHubCostMultiplier: number = 1.6;\n  public infrastructure: InfrastructureDefinition[] = [];\n\n  constructor(\n    public name: string\n  ) { }\n\n  public setDescription(desc: string): RegionDefinition {\n    this.description = desc;\n    return this;\n  }\n\n  public setSurveyUpgradeNeeded(upgrade: string): RegionDefinition {\n    this.surveyUpgradeNeeded = upgrade;\n    return this;\n  }\n\n  public setSurveyBaseCost(cost: number): RegionDefinition {\n    this.surveyBaseCost = cost;\n    return this;\n  }\n\n  public setSurveyCostMultiplier(multiplier: number): RegionDefinition {\n    this.surveyCostMultiplier = multiplier;\n    return this;\n  }\n\n  public addDroneHubCost(resource: string, amount: number): RegionDefinition {\n    this.droneHubBaseCost.add(resource, amount);\n    return this;\n  }\n\n  public setDroneHubCostMultiplier(multiplier: number): RegionDefinition {\n    this.droneHubCostMultiplier = multiplier;\n    return this;\n  }\n}\n\nexport const REGION_LIBRARY: RegionDefinition[] = [\n  new RegionDefinition('Plains').setDescription('Rolling plains.')\n    .setSurveyBaseCost(10)\n    .setSurveyCostMultiplier(1.6)\n    .addDroneHubCost('metal', 24),\n  new RegionDefinition('Hills').setDescription('Geographically complex region rich in minerals.')\n  .setSurveyBaseCost(25)\n  .addDroneHubCost('nanochips', 4),\n  new RegionDefinition('Mountain').setDescription('Difficult to traverse, but can contain many valuable materials.')\n  .setSurveyUpgradeNeeded('Mountain Survey')\n  .setSurveyBaseCost(25)\n  .addDroneHubCost('duranium', 25)\n  .setDroneHubCostMultiplier(2.2),\n  new RegionDefinition('Coast').setDescription('Coast description.')\n  .setSurveyBaseCost(25)\n  .addDroneHubCost('duranium', 25),\n  new RegionDefinition('Forest').setDescription('Forest description.')\n  .setSurveyBaseCost(25)\n  .addDroneHubCost('duranium', 25),\n  new RegionDefinition('Ocean').setDescription('Ocean description.')\n  .setSurveyUpgradeNeeded('Maritime Survey')\n  .setSurveyBaseCost(25)\n  .addDroneHubCost('duranium', 25),\n  new RegionDefinition('Ocean Floor').setDescription('Ocean Floor description.')\n  .setSurveyUpgradeNeeded('Undersea Survey')\n  .setSurveyBaseCost(25)\n  .addDroneHubCost('duranium', 25),\n  new RegionDefinition('Desert').setDescription('Desert description.')\n  .setSurveyUpgradeNeeded('Desert Survey')\n  .setSurveyBaseCost(25)\n  .addDroneHubCost('duranium', 25),\n  new RegionDefinition('Arctic').setDescription('Arctic description.')\n  .setSurveyUpgradeNeeded('Arctic Survey')\n  .setSurveyBaseCost(25)\n  .addDroneHubCost('duranium', 25),\n];\n","export class ResearchDiscipline {\n    static baseKnowledgeCost: number = 24;\n    static baseTheoryCost: number = 20;\n    static baseResearchPerSec: number = 1.43;\n    static knowledgeExpCost: number = Math.sqrt(14);\n\n    name: string;\n    desc: string = '';\n    theoryDesc: string = '';\n    revealAtStart: boolean = false;\n    baseCostMultiplier: number = 1;\n    compoundingCostMultiplier: number = 1;\n    theoryCostMultiplier: number = 1;\n\n    upgradeUnlocks: Map<number, string> = new Map<number, string>();\n    flagUnlocks: Map<number, string> = new Map<number, string>();\n\n    constructor(name: string) {\n      this.name = name;\n    }\n\n    setDesc(desc: string): ResearchDiscipline {\n      this.desc = desc;\n      return this;\n    }\n\n    setTheoryDesc(desc: string): ResearchDiscipline {\n      this.theoryDesc = desc;\n      return this;\n    }\n\n    addUpgrade(level: number, upgrade: string): ResearchDiscipline {\n      this.upgradeUnlocks.set(level, upgrade);\n      return this;\n    }\n\n    addFlag(level: number, flag: string): ResearchDiscipline {\n      this.flagUnlocks.set(level, flag);\n      return this;\n    }\n\n    setRevealAtStart(): ResearchDiscipline {\n      this.revealAtStart = true;\n      return this;\n    }\n\n}\n\nexport const RESEARCH_LIBRARY: ResearchDiscipline[] = [\n  new ResearchDiscipline('Material Science')\n    .setDesc('Structures cost 5% less (diminishing) per level.')\n    .setTheoryDesc('Gain theory by salvaging materials.')\n    .setRevealAtStart()\n    .addUpgrade(1, 'Construction')\n    .addUpgrade(2, 'Hydrophobic Alloys')\n    .addUpgrade(3, 'Tensile Polymers')\n    .addUpgrade(5, 'Unbreakable Materials'),\n  new ResearchDiscipline('Electronics')\n  .setTheoryDesc('Gain theory by salvaging and fabricating electronics.')\n    .addUpgrade(1, 'Automated Fabrication')\n    .addUpgrade(3, 'Photon Processing')\n    .addUpgrade(5, 'Synthetic Thought'),\n  new ResearchDiscipline('Hypertopology')\n  .setTheoryDesc('Gain theory by studying spatial anomalies.')\n    .addUpgrade(1, 'Extradimensional Synthesis'),\n  new ResearchDiscipline('Power Systems')\n  .setDesc('Ship energy recharges 20% faster per level.')\n  .setTheoryDesc('Gain theory by salvaging power and energy systems.')\n    .addUpgrade(1, 'Fueled Generators')\n    .addUpgrade(3, 'Electrodynamics')\n    .addUpgrade(4, 'Solar Power'),\n  new ResearchDiscipline('Gravitics')\n  .setTheoryDesc('Gain theory by studying particle anomalies.')\n    .addUpgrade(1, 'Artificial Gravity'),\n  new ResearchDiscipline('Planetary Survey')\n  .setDesc('Survey scannning is 20% faster per level.')\n  .setTheoryDesc('Gain theory by surveying regions.')\n    .addUpgrade(2, 'Maritime Survey')\n    .addUpgrade(3, 'Mountain Survey')\n    .addUpgrade(4, 'Desert Survey')\n    .addUpgrade(5, 'Arctic Survey')\n    .addUpgrade(6, 'Undersea Survey'),\n  new ResearchDiscipline('Drone Control')\n  .setDesc('Drone hubs cost 5% less (diminishing) per level.')\n  .setTheoryDesc('Gain theory by building drone hubs.')\n    .addUpgrade(1, 'Bandwidth Multiplexing')\n    .addUpgrade(2, 'Adaptive Tooling')\n    .addUpgrade(3, 'Heuristic Processors'),\n  new ResearchDiscipline('Resource Exploitation')\n  .setDesc('Drones collect 10% extra resources/sec per level.')\n  .setTheoryDesc('Gain theory by building resource extraction improvements.')\n    .setRevealAtStart()\n    .addUpgrade(1, 'Mineral Extraction')\n    .addUpgrade(2, 'Liquid Extraction')\n    .addUpgrade(3, 'Gas Extraction')\n    .addUpgrade(4, 'Clathrate Extraction')\n    .addUpgrade(5, 'Particulate Enrichment')\n    .addUpgrade(6, 'Crystal Extraction'),\n  new ResearchDiscipline('Anomaly Scanning')\n];\n","import {Resource, ResourceCollection} from '../models/resource';\nimport { Effect, BaseProductionEffect, BaseConsumptionEffect } from './effectDefinitions';\n\nexport class StructureDefinition {\n    baseBuildCost: ResourceCollection = new ResourceCollection();\n    costMultiplier: number = 1.15;\n    effects: Effect[] = [];\n    prereqs: string[] = [];\n\n    constructor(public name: string, public sortCategory: string) {\n\n    }\n\n    public addCost(resource: string, amount: number): StructureDefinition {\n      this.baseBuildCost.add(resource, amount);\n      return this;\n    }\n\n    public addEffect(bonusEffect: Effect): StructureDefinition {\n      this.effects.push(bonusEffect);\n      return this;\n    }\n\n    public addProduction(resource: string, amount: number): StructureDefinition {\n      const bonusEffect = new BaseProductionEffect(resource, amount);\n      this.effects.push(bonusEffect);\n      return this;\n    }\n\n    public addConsumption(resource: string, amount: number): StructureDefinition {\n      const effect = new BaseConsumptionEffect(resource, amount);\n      this.effects.push(effect);\n      return this;\n    }\n\n    public addPrereq(upgrade: string): StructureDefinition {\n      this.prereqs.push(upgrade);\n      return this;\n    }\n\n    // TODO: Move these into a proper service that can account for external bonuses and stuff\n    public getProductionRates(): ResourceCollection {\n      const production = new ResourceCollection();\n      this.effects.forEach(element => {\n        if (element instanceof BaseProductionEffect) {\n          const resourceGen = (element as BaseProductionEffect);\n          production.add(resourceGen.resource, resourceGen.amount);\n        }\n      });\n      return production;\n    }\n\n    public getConsumptionRates(): ResourceCollection {\n      const consumption = new ResourceCollection();\n      this.effects.forEach(element => {\n        if (element instanceof BaseConsumptionEffect) {\n          const resourceGen = (element as BaseConsumptionEffect);\n          consumption.add(resourceGen.resource, resourceGen.amount);\n        }\n      });\n      return consumption;\n    }\n\n    public hasConsumption(): boolean {\n      return this.effects.some(element => element instanceof BaseConsumptionEffect);\n    }\n\n\n}\n\nexport const STRUCTURE_LIBRARY: StructureDefinition[] = [\n    // Refinement\n    new StructureDefinition('Smelter', 'refine').addPrereq('Construction')\n            .addCost('metal', 100)\n            .addConsumption('power', 1).addConsumption('metal', 3)\n            .addConsumption('hydrocarbon', 1.2)\n            .addProduction('duranium', 0.3),\n    new StructureDefinition('Electronics Lab', 'refine').addPrereq('Automated Fabrication')\n            .addCost('duranium', 10)\n            .addConsumption('power', 2).addConsumption('silicate', 1)\n            .addConsumption('rareMetal', 0.15)\n            .addProduction('nanochips', 0.2),\n    new StructureDefinition('Cryodistillery', 'refine').addPrereq('Clathrate Extraction')\n            .addCost('duranium', 30)\n            .addConsumption('power', 3).addConsumption('gas', 0.5)\n            .addProduction('cryofluid', 0.6),\n    new StructureDefinition('Nanofiber Loom', 'refine').addPrereq('Tensile Polymers')\n            .addCost('duranium', 40).addCost('nanochips', 20)\n            .addConsumption('power', 2).addConsumption('hydrocarbon', 3)\n            .addConsumption('silicate', 0.6)\n            .addProduction('nanofiber', 0.4),\n    new StructureDefinition('Optronics Workshop', 'refine').addPrereq('Photon Processing')\n            .addCost('duranium', 100).addCost('nanochips', 50)\n            .addConsumption('power', 2).addConsumption('glittersand', 0.2)\n            .addConsumption('nanochips', 1).addConsumption('gas', 0.5)\n            .addProduction('optronics', 0.6),\n    new StructureDefinition('High-Energy Lab', 'refine').addPrereq('Electrodynamics')\n            .addCost('duranium', 100).addCost('nanofiber', 20)\n            .addConsumption('power', 4).addConsumption('rareMetal', 0.04)\n            .addConsumption('cryofluid', 1)\n            .addProduction('ultraconductors', 0.4),\n    new StructureDefinition('Dimensional Forge', 'refine').addPrereq('Extradimensional Synthesis')\n            .addCost('nanofiber', 50).addCost('optronics', 25)\n            .addConsumption('power', 4).addConsumption('charybdin', 1)\n            .addConsumption('nanofiber', 1).addConsumption('glittersand', 1)\n            .addProduction('hyperlattice', 0.4),\n    new StructureDefinition('Silksteel Foundry', 'refine').addPrereq('Unbreakable Materials')\n            .addCost('duranium', 100).addCost('nanofiber', 20).addCost('optronics', 20)\n            .addConsumption('power', 4).addConsumption('duranium', 3)\n            .addConsumption('nanofiber', 2).addConsumption('cryofluid', 1)\n            .addProduction('silksteel', 0.6),\n    new StructureDefinition('Neurocomputing Lab', 'refine').addPrereq('Synthetic Thought')\n            .addCost('silksteel', 30).addCost('optronics', 50)\n            .addConsumption('power', 5).addConsumption('synaptite', 1)\n            .addConsumption('optronics', 2).addConsumption('ultraconductors', 1)\n            .addProduction('cogitex', 0.6),\n    new StructureDefinition('Gravitics Lab', 'refine').addPrereq('Artificial Gravity')\n            .addCost('silksteel', 50).addCost('optronics', 50)\n            .addConsumption('power', 5).addConsumption('dyene', 1)\n            .addConsumption('ultraconductors', 1)\n            .addProduction('gravalloy', 0.8),\n\n    // Power\n    new StructureDefinition('Combustion Reactor', 'power').addPrereq('Fueled Generators')\n            .addCost('metal', 10)\n            .addConsumption('hydrocarbon', 1.5)\n            .addProduction('power', 10),\n    new StructureDefinition('Solar Plant', 'power').addPrereq('Solar Power')\n            .addCost('duranium', 10).addCost('silicate', 100).addCost('ultraconductors', 5)\n            .addProduction('power', 10)\n];\n","import { ResourceCollection } from '../models/resource';\nimport { Action } from './actionDefinitions';\n\nexport class TaskDefinition {\n  name: string;\n  desc: string = '';\n  baseRate: number = 0.01;\n  needed: number;\n  startCost: ResourceCollection = new ResourceCollection();\n  costPerSecond: ResourceCollection = new ResourceCollection();\n  resultsOnComplete: Action[] = [];\n  resultsPerTick: Action[] = [];\n  repeatable: boolean = false;\n\n  constructor(name: string, needed: number) {\n    this.name = name;\n    this.needed = needed;\n  }\n}\n","import { Resource, ResourceCollection } from '../models/resource';\nimport { Effect } from './effectDefinitions';\nimport { Action, FlagAction } from './actionDefinitions';\n\nexport class UpgradeDefinition {\n  public cost: ResourceCollection = new ResourceCollection();\n  public effects: Effect[] = [];\n  public actions: Action[] = [];\n  public friendlyName: string;\n  constructor(\n    public name: string,\n    public description: string,\n    public researchNeeded?: string\n  ) {\n    this.friendlyName = name;\n  }\n\n  public addCost(resource: string, amount: number): UpgradeDefinition {\n    this.cost.add(resource, amount);\n    return this;\n  }\n\n  public addAction(action: Action): UpgradeDefinition {\n    this.actions.push(action);\n    return this;\n  }\n\n  public setsFlag(flag: string): UpgradeDefinition {\n    const action = new FlagAction(flag);\n    this.addAction(action);\n    return this;\n  }\n\n}\n\nexport const UPGRADE_LIBRARY: UpgradeDefinition[] = [\n  new UpgradeDefinition('Construction', 'Large scale construction projects.')\n  .addCost('metal', 50)\n  .setsFlag('showStructureTab'),\n  new UpgradeDefinition('Hydrophobic Alloys', 'Waterproofed drones for aquatic salvage operations.')\n  .addCost('metal', 75),\n  new UpgradeDefinition('Tensile Polymers', 'High-strength, lightweight polymers for advanced construction.')\n  .addCost('duranium', 15)\n  .addCost('silicate', 50),\n  new UpgradeDefinition('Unbreakable Materials', 'Engineered at the subatomic level to withstand extreme stress.')\n  .addCost('duranium', 15)\n  .addCost('silicate', 50),\n\n  new UpgradeDefinition('Automated Fabrication', 'Scale up the nanochip fabrication process for bulk production.')\n  .addCost('nanochips', 8),\n  new UpgradeDefinition('Photon Processing', 'Using glittersand to manipulate photon waveforms provides a new foundation for electronic engineering.')\n  .addCost('nanochips', 35)\n  .addCost('glittersand', 15),\n  new UpgradeDefinition('Synthetic Thought', 'The neural patterns in synaptite form the basis of self-adaptive, intelligent networks.')\n  .addCost('optronics', 35)\n  .addCost('synaptite', 15),\n\n  new UpgradeDefinition('Extradimensional Synthesis', '4-dimensional crystalloid materials allow construction to extend beyond mundane limits.')\n  .addCost('charybdin', 35),\n\n  new UpgradeDefinition('Fueled Generators', 'On planets rich with oxygen and organic molecules, burning hydrocarbons can be a simple, effective power source.')\n  .addCost('hydrocarbon', 25),\n  new UpgradeDefinition('Electrodynamics', 'As power needs increase, the inefficiencies of typical conductive materials become a problem.')\n  .addCost('cryofluid', 15),\n  new UpgradeDefinition('Solar Power', '')\n  .addCost('ultraconductors', 15),\n\n  new UpgradeDefinition('Artificial Gravity', '')\n  .addCost('dyene', 15),\n\n  new UpgradeDefinition('Maritime Survey', '')\n  .addCost('metal', 15),\n  new UpgradeDefinition('Mountain Survey', '')\n  .addCost('duranium', 15),\n  new UpgradeDefinition('Desert Survey', '')\n  .addCost('duranium', 15),\n  new UpgradeDefinition('Arctic Survey', '')\n  .addCost('duranium', 15),\n  new UpgradeDefinition('Undersea Survey', '')\n  .addCost('duranium', 15),\n\n  new UpgradeDefinition('Bandwidth Multiplexing', '')\n  .addCost('nanochips', 15),\n  new UpgradeDefinition('Adaptive Tooling', '')\n  .addCost('optronics', 15),\n  new UpgradeDefinition('Heuristic Processors', '')\n  .addCost('cogitex', 15),\n\n  new UpgradeDefinition('Mineral Extraction', '')\n  .addCost('metal', 25),\n  new UpgradeDefinition('Liquid Extraction', '')\n  .addCost('duranium', 25),\n  new UpgradeDefinition('Gas Extraction', '')\n  .addCost('duranium', 50),\n  new UpgradeDefinition('Clathrate Extraction', '')\n  .addCost('nanofiber', 15),\n  new UpgradeDefinition('Particulate Enrichment', '')\n  .addCost('nanofiber', 25),\n  new UpgradeDefinition('Crystal Extraction', '')\n  .addCost('nanofiber', 50),\n];\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n\n"]}